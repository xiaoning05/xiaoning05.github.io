import{n as T,d as g,k as j,r as i,o as H,q as V,e as n,b as f,a as o,h as P,w as x,j as R,A,v as E,__tla as O}from"./index-34f06ebd.js";import{_ as q,__tla as D}from"./Dialog.vue_vue_type_style_index_0_lang-08560286.js";import{_ as I,__tla as N}from"./Form-980450b6.js";import{a as z,c as B,u as G,__tla as J}from"./seckillConfig-60aecae5.js";import{d as K,__tla as L}from"./formatTime-ed0a77fd.js";import{r as m,__tla as Q}from"./formRules-ecd4de8b.js";import{D as W,__tla as X}from"./dict-e142e39a.js";import{u as Y,__tla as Z}from"./useCrudSchemas-8bd8b360.js";import{u as $,__tla as ee}from"./useMessage-7a5ab7ef.js";let U,d,ae=Promise.all([(()=>{try{return O}catch{}})(),(()=>{try{return D}catch{}})(),(()=>{try{return N}catch{}})(),(()=>{try{return J}catch{}})(),(()=>{try{return L}catch{}})(),(()=>{try{return Q}catch{}})(),(()=>{try{return X}catch{}})(),(()=>{try{return Z}catch{}})(),(()=>{try{return ee}catch{}})()]).then(async()=>{let p,h;p=T({name:[m],startTime:[m],endTime:[m],picUrl:[m],status:[m]}),h=T([{label:"\u79D2\u6740\u65F6\u6BB5\u540D\u79F0",field:"name",isSearch:!0},{label:"\u5F00\u59CB\u65F6\u95F4\u70B9",field:"startTime",isSearch:!1,search:{component:"TimePicker"},form:{component:"TimePicker",componentProps:{valueFormat:"HH:mm:ss"}}},{label:"\u7ED3\u675F\u65F6\u95F4\u70B9",field:"endTime",isSearch:!1,search:{component:"TimePicker"},form:{component:"TimePicker",componentProps:{valueFormat:"HH:mm:ss"}}},{label:"\u79D2\u6740\u8F6E\u64AD\u56FE",field:"sliderPicUrls",isSearch:!1,form:{component:"UploadImgs"},table:{width:300}},{label:"\u72B6\u6001",field:"status",dictType:W.COMMON_STATUS,dictClass:"number",isSearch:!0,form:{component:"Radio"}},{label:"\u521B\u5EFA\u65F6\u95F4",field:"createTime",isForm:!1,isSearch:!1,formatter:K},{label:"\u64CD\u4F5C",field:"action",isForm:!1}]),{allSchemas:d}=Y(h),U=g({__name:"SeckillConfigForm",emits:["success"],setup(te,{expose:k,emit:w}){const{t:u}=j(),y=$(),r=i(!1),v=i(""),l=i(!1),b=i(""),s=i();k({open:async(t,e)=>{var a;if(r.value=!0,v.value=u("action."+t),b.value=t,e){l.value=!0;try{const c=await z(e);c.sliderPicUrls=(a=c.sliderPicUrls)==null?void 0:a.map(_=>({url:_})),s.value.setValues(c)}finally{l.value=!1}}}});const C=w,F=async()=>{if(s&&await s.value.getElFormRef().validate()){l.value=!0;try{const t=[];s.value.formModel.sliderPicUrls.forEach(a=>{typeof a=="object"?t.push(a.url):t.push(a)});const e={...s.value.formModel,sliderPicUrls:t};b.value==="create"?(await B(e),y.success(u("common.createSuccess"))):(await G(e),y.success(u("common.updateSuccess"))),r.value=!1,C("success")}finally{l.value=!1}}};return(t,e)=>{const a=I,c=A,_=q,M=E;return H(),V(_,{modelValue:o(r),"onUpdate:modelValue":e[1]||(e[1]=S=>R(r)?r.value=S:null),title:o(v)},{footer:n(()=>[f(c,{disabled:o(l),type:"primary",onClick:F},{default:n(()=>[P("\u786E \u5B9A")]),_:1},8,["disabled"]),f(c,{onClick:e[0]||(e[0]=S=>r.value=!1)},{default:n(()=>[P("\u53D6 \u6D88")]),_:1})]),default:n(()=>[x(f(a,{ref_key:"formRef",ref:s,rules:o(p),schema:o(d).formSchema},null,8,["rules","schema"]),[[M,o(l)]])]),_:1},8,["modelValue","title"])}}})});export{U as _,ae as __tla,d as a};
