import{d as ee,r as _,e as ae,p as re,K as te,o as p,c as le,f as e,w as r,a,L as oe,h as u,x as F,v as m,a4 as y,F as ne,P as de,A as ie,y as se,z as _e,B as pe,_ as ue,C as ce,D as me,G as be,$ as fe,H as ge,I as he,__tla as ke}from"./index-d5b00dc9.js";import{_ as ye,__tla as we}from"./index.vue_vue_type_script_setup_true_lang-8478be74.js";import{E as xe,a as Ue,b as ve,__tla as Ee}from"./el-dropdown-item-0e269d4d.js";import{E as Ve,__tla as Ce}from"./el-avatar-217488c4.js";import{_ as Be,__tla as Te}from"./ContentWrap.vue_vue_type_script_setup_true_lang-29ba9b6b.js";import{d as q,__tla as De}from"./formatTime-9063410f.js";import{g as Ie,c as Pe,b as ze,__tla as Fe}from"./index-26173a9e.js";import{c as b,__tla as qe}from"./permission-d53da488.js";import{f as w,__tla as Oe}from"./formatter-e5bd4542.js";import{_ as Re,__tla as Se}from"./UpdateBindUserForm.vue_vue_type_script_setup_true_lang-b835bcf4.js";import{_ as Le,__tla as Ne}from"./BrokerageUserListDialog.vue_vue_type_script_setup_true_lang-fcf2e38d.js";import{_ as Ye,__tla as $e}from"./BrokerageOrderListDialog.vue_vue_type_script_setup_true_lang-3ee09264.js";import{u as He,__tla as Ke}from"./useMessage-2288a5f2.js";import{__tla as Me}from"./index-9ed43bfb.js";import{__tla as Ae}from"./index-bd0d9e6c.js";import{__tla as Ge}from"./Dialog.vue_vue_type_style_index_0_lang-03cf6454.js";import{__tla as je}from"./el-descriptions-item-2a4731b6.js";import{__tla as Je}from"./DictTag.vue_vue_type_script_lang-2a9ae33e.js";import"./color-f5b6e279.js";import{__tla as Qe}from"./dict-29b94c3f.js";import{__tla as We}from"./index-a463e0c5.js";import"./constants-99751ef9.js";let O,Xe=Promise.all([(()=>{try{return ke}catch{}})(),(()=>{try{return we}catch{}})(),(()=>{try{return Ee}catch{}})(),(()=>{try{return Ce}catch{}})(),(()=>{try{return Te}catch{}})(),(()=>{try{return De}catch{}})(),(()=>{try{return Fe}catch{}})(),(()=>{try{return qe}catch{}})(),(()=>{try{return Oe}catch{}})(),(()=>{try{return Se}catch{}})(),(()=>{try{return Ne}catch{}})(),(()=>{try{return $e}catch{}})(),(()=>{try{return Ke}catch{}})(),(()=>{try{return Me}catch{}})(),(()=>{try{return Ae}catch{}})(),(()=>{try{return Ge}catch{}})(),(()=>{try{return je}catch{}})(),(()=>{try{return Je}catch{}})(),(()=>{try{return Qe}catch{}})(),(()=>{try{return We}catch{}})()]).then(async()=>{O=ee({name:"TradeBrokerageUser",__name:"index",setup(Ze){const f=He(),x=_(!0),V=_(0),C=_([]),o=ae({pageNo:1,pageSize:10,bindUserId:null,brokerageEnabled:!0,createTime:[]}),B=_(),c=async()=>{x.value=!0;try{const n=await Ie(o);C.value=n.list,V.value=n.total}finally{x.value=!1}},U=()=>{o.pageNo=1,c()},R=()=>{B.value.resetFields(),U()},T=_(),S=n=>{T.value.open(n)},D=_(),L=n=>{D.value.open(n)},I=_(),N=n=>{I.value.open(n)},Y=async n=>{try{await f.confirm(`\u786E\u8BA4\u8981\u6E05\u9664"${n.nickname}"\u7684\u4E0A\u7EA7\u63A8\u5E7F\u4EBA\u5417\uFF1F`),await Pe({id:n.id}),f.success("\u6E05\u9664\u6210\u529F"),await c()}catch{}};return re(()=>{c()}),(n,d)=>{const $=de,g=ie,P=se,H=_e,K=pe,v=ue,E=ce,M=me,z=Be,l=be,A=Ve,G=fe,h=xe,j=Ue,J=ve,Q=ge,W=ye,X=te("hasPermi"),Z=he;return p(),le(ne,null,[e(z,null,{default:r(()=>[e(M,{class:"-mb-15px",model:a(o),ref_key:"queryFormRef",ref:B,inline:!0,"label-width":"85px"},{default:r(()=>[e(g,{label:"\u63A8\u5E7F\u5458\u7F16\u53F7",prop:"bindUserId"},{default:r(()=>[e($,{modelValue:a(o).bindUserId,"onUpdate:modelValue":d[0]||(d[0]=t=>a(o).bindUserId=t),placeholder:"\u8BF7\u8F93\u5165\u63A8\u5E7F\u5458\u7F16\u53F7",clearable:"",onKeyup:oe(U,["enter"]),class:"!w-240px"},null,8,["modelValue"])]),_:1}),e(g,{label:"\u63A8\u5E7F\u8D44\u683C",prop:"brokerageEnabled"},{default:r(()=>[e(H,{modelValue:a(o).brokerageEnabled,"onUpdate:modelValue":d[1]||(d[1]=t=>a(o).brokerageEnabled=t),class:"!w-240px",clearable:"",placeholder:"\u8BF7\u9009\u62E9\u63A8\u5E7F\u8D44\u683C"},{default:r(()=>[e(P,{label:"\u6709",value:!0}),e(P,{label:"\u65E0",value:!1})]),_:1},8,["modelValue"])]),_:1}),e(g,{label:"\u521B\u5EFA\u65F6\u95F4",prop:"createTime"},{default:r(()=>[e(K,{modelValue:a(o).createTime,"onUpdate:modelValue":d[2]||(d[2]=t=>a(o).createTime=t),"value-format":"YYYY-MM-DD HH:mm:ss",type:"daterange","start-placeholder":"\u5F00\u59CB\u65E5\u671F","end-placeholder":"\u7ED3\u675F\u65E5\u671F","default-time":[new Date("1 00:00:00"),new Date("1 23:59:59")],class:"!w-240px"},null,8,["modelValue","default-time"])]),_:1}),e(g,null,{default:r(()=>[e(E,{onClick:U},{default:r(()=>[e(v,{icon:"ep:search",class:"mr-5px"}),u(" \u641C\u7D22")]),_:1}),e(E,{onClick:R},{default:r(()=>[e(v,{icon:"ep:refresh",class:"mr-5px"}),u(" \u91CD\u7F6E")]),_:1})]),_:1})]),_:1},8,["model"])]),_:1}),e(z,null,{default:r(()=>[F((p(),m(Q,{data:a(C),stripe:!0,"show-overflow-tooltip":!0},{default:r(()=>[e(l,{label:"\u7528\u6237\u7F16\u53F7",align:"center",prop:"id","min-width":"80px"}),e(l,{label:"\u5934\u50CF",align:"center",prop:"avatar",width:"70px"},{default:r(t=>[e(A,{src:t.row.avatar},null,8,["src"])]),_:1}),e(l,{label:"\u6635\u79F0",align:"center",prop:"nickname","min-width":"80px"}),e(l,{label:"\u63A8\u5E7F\u4EBA\u6570",align:"center",prop:"brokerageUserCount",width:"80px"}),e(l,{label:"\u63A8\u5E7F\u8BA2\u5355\u6570\u91CF",align:"center",prop:"brokerageOrderCount","min-width":"110px"}),e(l,{label:"\u63A8\u5E7F\u8BA2\u5355\u91D1\u989D",align:"center",prop:"brokerageOrderPrice","min-width":"110px",formatter:a(w)},null,8,["formatter"]),e(l,{label:"\u5DF2\u63D0\u73B0\u91D1\u989D",align:"center",prop:"withdrawPrice","min-width":"100px",formatter:a(w)},null,8,["formatter"]),e(l,{label:"\u5DF2\u63D0\u73B0\u6B21\u6570",align:"center",prop:"withdrawCount","min-width":"100px"}),e(l,{label:"\u672A\u63D0\u73B0\u91D1\u989D",align:"center",prop:"price","min-width":"100px",formatter:a(w)},null,8,["formatter"]),e(l,{label:"\u51BB\u7ED3\u4E2D\u4F63\u91D1",align:"center",prop:"frozenPrice","min-width":"100px",formatter:a(w)},null,8,["formatter"]),e(l,{label:"\u63A8\u5E7F\u8D44\u683C",align:"center",prop:"brokerageEnabled","min-width":"80px"},{default:r(t=>[e(G,{modelValue:t.row.brokerageEnabled,"onUpdate:modelValue":k=>t.row.brokerageEnabled=k,"active-text":"\u6709","inactive-text":"\u65E0","inline-prompt":"",disabled:!a(b)(["trade:brokerage-user:update-bind-user"]),onChange:k=>(async i=>{try{const s=i.brokerageEnabled?"\u5F00\u901A":"\u5173\u95ED";await f.confirm(`\u786E\u8BA4\u8981${s}"${i.nickname}"\u7684\u63A8\u5E7F\u8D44\u683C\u5417\uFF1F`),await ze({id:i.id,enabled:i.brokerageEnabled}),f.success(s+"\u6210\u529F"),await c()}catch{i.brokerageEnabled=!i.brokerageEnabled}})(t.row)},null,8,["modelValue","onUpdate:modelValue","disabled","onChange"])]),_:1}),e(l,{label:"\u6210\u4E3A\u63A8\u5E7F\u5458\u65F6\u95F4",align:"center",prop:"brokerageTime",formatter:a(q),width:"180px"},null,8,["formatter"]),e(l,{label:"\u4E0A\u7EA7\u63A8\u5E7F\u5458\u7F16\u53F7",align:"center",prop:"bindUserId",width:"150px"}),e(l,{label:"\u63A8\u5E7F\u5458\u7ED1\u5B9A\u65F6\u95F4",align:"center",prop:"bindUserTime",formatter:a(q),width:"180px"},null,8,["formatter"]),e(l,{label:"\u64CD\u4F5C",align:"center",width:"150px",fixed:"right"},{default:r(t=>[F((p(),m(J,{onCommand:k=>((i,s)=>{switch(i){case"openBrokerageUserTable":S(s.id);break;case"openBrokerageOrderTable":L(s.id);break;case"openUpdateBindUserForm":N(s);break;case"handleClearBindUser":Y(s)}})(k,t.row)},{dropdown:r(()=>[e(j,null,{default:r(()=>[a(b)(["trade:brokerage-user:user-query"])?(p(),m(h,{key:0,command:"openBrokerageUserTable"},{default:r(()=>[u(" \u63A8\u5E7F\u4EBA ")]),_:1})):y("",!0),a(b)(["trade:brokerage-user:order-query"])?(p(),m(h,{key:1,command:"openBrokerageOrderTable"},{default:r(()=>[u(" \u63A8\u5E7F\u8BA2\u5355 ")]),_:1})):y("",!0),a(b)(["trade:brokerage-user:update-bind-user"])?(p(),m(h,{key:2,command:"openUpdateBindUserForm"},{default:r(()=>[u(" \u4FEE\u6539\u4E0A\u7EA7\u63A8\u5E7F\u4EBA ")]),_:1})):y("",!0),t.row.bindUserId&&a(b)(["trade:brokerage-user:clear-bind-user"])?(p(),m(h,{key:3,command:"handleClearBindUser"},{default:r(()=>[u(" \u6E05\u9664\u4E0A\u7EA7\u63A8\u5E7F\u4EBA ")]),_:1})):y("",!0)]),_:2},1024)]),default:r(()=>[e(E,{link:"",type:"primary"},{default:r(()=>[e(v,{icon:"ep:d-arrow-right"}),u(" \u66F4\u591A ")]),_:1})]),_:2},1032,["onCommand"])),[[X,["trade:brokerage-user:user-query","trade:brokerage-user:order-query","trade:brokerage-user:update-bind-user","trade:brokerage-user:clear-bind-user"]]])]),_:1})]),_:1},8,["data"])),[[Z,a(x)]]),e(W,{total:a(V),page:a(o).pageNo,"onUpdate:page":d[3]||(d[3]=t=>a(o).pageNo=t),limit:a(o).pageSize,"onUpdate:limit":d[4]||(d[4]=t=>a(o).pageSize=t),onPagination:c},null,8,["total","page","limit"])]),_:1}),e(Re,{ref_key:"updateBindUserFormRef",ref:I,onSuccess:c},null,512),e(Le,{ref_key:"brokerageUserListDialogRef",ref:T},null,512),e(Ye,{ref_key:"brokerageOrderListDialogRef",ref:D},null,512)],64)}}})});export{Xe as __tla,O as default};
