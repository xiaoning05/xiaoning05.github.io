import{d as D,r as n,e as M,u as A,aS as E,o as y,c as L,f as t,w as o,h as g,x as P,v as j,a,t as B,F,_ as G,C as H,k as O,G as q,H as J,I as K,__tla as Q}from"./index-d2088aec.js";import{_ as V,__tla as W}from"./ContentWrap.vue_vue_type_script_setup_true_lang-3fd6aef1.js";import{_ as X,__tla as Y}from"./index.vue_vue_type_script_setup_true_lang-6baf9e60.js";import{_ as Z,__tla as $}from"./DictTag.vue_vue_type_script_lang-754cee6f.js";import{E as tt,__tla as at}from"./el-link-3f427b16.js";import{b as rt,__tla as et}from"./index-2a8c377b.js";import{_ as lt,__tla as ot}from"./ContractForm.vue_vue_type_script_setup_true_lang-086218eb.js";import{B as _t,__tla as st}from"./index-05c907cf.js";import{f as it,__tla as nt}from"./formatter-38679f6e.js";import{d as h,__tla as pt}from"./formatTime-c7e0c543.js";import{D as ct,__tla as mt}from"./dict-999fbee6.js";let b,ut=Promise.all([(()=>{try{return Q}catch{}})(),(()=>{try{return W}catch{}})(),(()=>{try{return Y}catch{}})(),(()=>{try{return $}catch{}})(),(()=>{try{return at}catch{}})(),(()=>{try{return et}catch{}})(),(()=>{try{return ot}catch{}})(),(()=>{try{return st}catch{}})(),(()=>{try{return nt}catch{}})(),(()=>{try{return pt}catch{}})(),(()=>{try{return mt}catch{}})()]).then(async()=>{b=D({name:"CrmContractList",__name:"ContractList",props:{bizType:{},bizId:{}},setup(v){const _=v,p=n(!0),m=n(0),u=n([]),r=M({pageNo:1,pageSize:10,customerId:void 0}),c=async()=>{p.value=!0;try{r.customerId=void 0;let s={list:[],total:0};if(_.bizType!==_t.CRM_CUSTOMER)return;r.customerId=_.bizId,s=await rt(r),u.value=s.list,m.value=s.total}finally{p.value=!1}},f=n(),C=()=>{f.value.open("create")},{push:w}=A();return E(()=>[_.bizId,_.bizType],()=>{r.pageNo=1,c()},{immediate:!0,deep:!0}),(s,i)=>{const S=G,z=H,I=O,T=tt,l=q,x=Z,R=J,k=X,N=V,U=K;return y(),L(F,null,[t(I,{justify:"end"},{default:o(()=>[t(z,{onClick:C},{default:o(()=>[t(S,{class:"mr-5px",icon:"clarity:contract-line"}),g(" \u521B\u5EFA\u5408\u540C ")]),_:1})]),_:1}),t(N,{class:"mt-10px"},{default:o(()=>[P((y(),j(R,{data:a(u),stripe:!0,"show-overflow-tooltip":!0},{default:o(()=>[t(l,{label:"\u5408\u540C\u540D\u79F0",fixed:"left",align:"center",prop:"name"},{default:o(e=>[t(T,{type:"primary",underline:!1,onClick:ft=>{return d=e.row.id,void w({name:"CrmContractDetail",params:{id:d}});var d}},{default:o(()=>[g(B(e.row.name),1)]),_:2},1032,["onClick"])]),_:1}),t(l,{label:"\u5408\u540C\u7F16\u53F7",align:"center",prop:"no"}),t(l,{label:"\u5BA2\u6237\u540D\u79F0",align:"center",prop:"customerName"}),t(l,{label:"\u5408\u540C\u91D1\u989D\uFF08\u5143\uFF09",align:"center",prop:"price",formatter:a(it)},null,8,["formatter"]),t(l,{label:"\u5F00\u59CB\u65F6\u95F4",align:"center",prop:"startTime",formatter:a(h),width:"180px"},null,8,["formatter"]),t(l,{label:"\u7ED3\u675F\u65F6\u95F4",align:"center",prop:"endTime",formatter:a(h),width:"180px"},null,8,["formatter"]),t(l,{align:"center",label:"\u72B6\u6001",prop:"auditStatus"},{default:o(e=>[t(x,{type:a(ct).CRM_AUDIT_STATUS,value:e.row.auditStatus},null,8,["type","value"])]),_:1})]),_:1},8,["data"])),[[U,a(p)]]),t(k,{total:a(m),page:a(r).pageNo,"onUpdate:page":i[0]||(i[0]=e=>a(r).pageNo=e),limit:a(r).pageSize,"onUpdate:limit":i[1]||(i[1]=e=>a(r).pageSize=e),onPagination:c},null,8,["total","page","limit"])]),_:1}),t(lt,{ref_key:"formRef",ref:f,onSuccess:c},null,512)],64)}}})});export{b as _,ut as __tla};
