import{d as U,r as _,n as k,o as i,q as f,e as s,b as u,a as t,h,w as q,c as x,F as T,g as j,j as I,y as A,L as B,C as D,B as E,v as G,_ as L,__tla as N}from"./index-aaa5adb3.js";import{_ as R,__tla as X}from"./Dialog-9a73a39c.js";import{_ as Y,__tla as Z}from"./Editor-71118346.js";import{g as z,s as H,__tla as J}from"./index-ca0e42b1.js";import{u as K,__tla as O}from"./useMessage-873da1e2.js";let b,Q=Promise.all([(()=>{try{return N}catch{}})(),(()=>{try{return X}catch{}})(),(()=>{try{return Z}catch{}})(),(()=>{try{return J}catch{}})(),(()=>{try{return O}catch{}})()]).then(async()=>{b=L(U({name:"SystemMailTemplateSendForm",__name:"MailTemplateSendForm",setup(W,{expose:g}){const P=K(),p=_(!1),n=_(!1),a=_({content:"",params:{},mail:"",templateCode:"",templateParams:new Map}),c=k({mail:[{required:!0,message:"\u90AE\u7BB1\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],templateCode:[{required:!0,message:"\u6A21\u7248\u7F16\u53F7\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],templateParams:{}}),d=_();g({open:async m=>{p.value=!0,w(),n.value=!0;try{const e=await z(m);a.value.content=e.content,a.value.params=e.params,a.value.templateCode=e.code,a.value.templateParams=e.params.reduce((o,r)=>(o[r]="",o),{}),c.templateParams=e.params.reduce((o,r)=>(o[r]={required:!0,message:"\u53C2\u6570 "+r+" \u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"},o),{})}finally{n.value=!1}}});const V=async()=>{if(d&&await d.value.validate()){n.value=!0;try{const m=a.value,e=await H(m);e&&P.success("\u63D0\u4EA4\u53D1\u9001\u6210\u529F\uFF01\u53D1\u9001\u7ED3\u679C\uFF0C\u89C1\u53D1\u9001\u65E5\u5FD7\u7F16\u53F7\uFF1A"+e),p.value=!1}finally{n.value=!1}}},w=()=>{var m;a.value={content:"",params:{},mail:"",templateCode:"",templateParams:new Map},c.templateParams={},(m=d.value)==null||m.resetFields()};return(m,e)=>{const o=Y,r=A,v=B,C=D,y=E,M=R,F=G;return i(),f(M,{modelValue:t(p),"onUpdate:modelValue":e[2]||(e[2]=l=>I(p)?p.value=l:null),title:"\u6D4B\u8BD5"},{footer:s(()=>[u(y,{disabled:t(n),type:"primary",onClick:V},{default:s(()=>[h("\u786E \u5B9A")]),_:1},8,["disabled"]),u(y,{onClick:e[1]||(e[1]=l=>p.value=!1)},{default:s(()=>[h("\u53D6 \u6D88")]),_:1})]),default:s(()=>[q((i(),f(C,{ref_key:"formRef",ref:d,model:t(a),rules:t(c),"label-width":"120px"},{default:s(()=>[u(r,{label:"\u6A21\u677F\u5185\u5BB9",prop:"content"},{default:s(()=>[u(o,{"model-value":t(a).content,height:"150px",readonly:""},null,8,["model-value"])]),_:1}),u(r,{label:"\u6536\u4EF6\u90AE\u7BB1",prop:"mail"},{default:s(()=>[u(v,{modelValue:t(a).mail,"onUpdate:modelValue":e[0]||(e[0]=l=>t(a).mail=l),placeholder:"\u8BF7\u8F93\u5165\u6536\u4EF6\u90AE\u7BB1"},null,8,["modelValue"])]),_:1}),(i(!0),x(T,null,j(t(a).params,l=>(i(),f(r,{key:l,label:"\u53C2\u6570 {"+l+"}",prop:"templateParams."+l},{default:s(()=>[u(v,{modelValue:t(a).templateParams[l],"onUpdate:modelValue":S=>t(a).templateParams[l]=S,placeholder:"\u8BF7\u8F93\u5165 "+l+" \u53C2\u6570"},null,8,["modelValue","onUpdate:modelValue","placeholder"])]),_:2},1032,["label","prop"]))),128))]),_:1},8,["model","rules"])),[[F,t(n)]])]),_:1},8,["modelValue"])}}}),[["__file","E:/newCode/GYZX-UI-ADMIN/src/views/system/mail/template/MailTemplateSendForm.vue"]])});export{Q as __tla,b as default};
