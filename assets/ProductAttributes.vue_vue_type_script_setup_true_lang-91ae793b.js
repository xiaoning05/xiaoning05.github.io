import{d as Z,ad as H,r as v,X as J,aQ as M,o as y,c as A,g as D,a as m,F as K,q as V,e as c,f as P,b as n,h as _,t as g,w as z,Z as B,j as N,G as O,K as R,k as T,ah as W,A as Y,b$ as j,a8 as aa,__tla as ea}from"./index-34f06ebd.js";import{E as sa,__tla as la}from"./el-text-b3569e32.js";import{c as ta,__tla as ua}from"./property-3518a151.js";import{u as oa,__tla as ra}from"./useMessage-7a5ab7ef.js";let L,ca=Promise.all([(()=>{try{return ea}catch{}})(),(()=>{try{return la}catch{}})(),(()=>{try{return ua}catch{}})(),(()=>{try{return ra}catch{}})()]).then(async()=>{L=Z({name:"ProductAttributes",__name:"ProductAttributes",props:{propertyList:{type:Array,default:()=>{}},isDetail:H.bool.def(!1)},emits:["success"],setup(f,{emit:$}){const{t:q}=T(),x=oa(),l=v(""),d=v(null),C=J(()=>a=>d.value!==null&&(d.value===a||void 0)),b=v([]),E=a=>{a!=null&&(b.value.some(o=>{var t,i;return((t=o.input)==null?void 0:t.attributes.id)===((i=a.input)==null?void 0:i.attributes.id)})||b.value.push(a))},u=v([]),F=f;M(()=>F.propertyList,a=>{a&&(u.value=a)},{deep:!0,immediate:!0});const G=$,k=async(a,o)=>{if(l.value)try{const t=await ta({propertyId:o,name:l.value});u.value[a].values.push({id:t,name:l.value}),x.success(q("common.createSuccess")),G("success",u.value)}catch{x.error("\u6DFB\u52A0\u5931\u8D25\uFF0C\u8BF7\u91CD\u8BD5")}d.value=null,l.value=""};return(a,o)=>{const t=sa,i=W,I=Y,Q=j,S=aa;return y(!0),A(K,null,D(m(u),(p,e)=>(y(),V(S,{key:e},{default:c(()=>[P("div",null,[n(t,{class:"mx-1"},{default:c(()=>[_("\u5C5E\u6027\u540D\uFF1A")]),_:1}),n(i,{class:"mx-1",closable:!f.isDetail,type:"success",onClose:s=>(r=>{var h;(h=u.value)==null||h.splice(r,1)})(e)},{default:c(()=>[_(g(p.name),1)]),_:2},1032,["closable","onClose"])]),P("div",null,[n(t,{class:"mx-1"},{default:c(()=>[_("\u5C5E\u6027\u503C\uFF1A")]),_:1}),(y(!0),A(K,null,D(p.values,(s,r)=>(y(),V(i,{key:s.id,class:"mx-1",closable:!f.isDetail,onClose:h=>((U,X)=>{var w;(w=u.value[U].values)==null||w.splice(X,1)})(e,r)},{default:c(()=>[_(g(s.name),1)]),_:2},1032,["closable","onClose"]))),128)),z(n(m(R),{id:`input${e}`,ref_for:!0,ref:E,modelValue:m(l),"onUpdate:modelValue":o[0]||(o[0]=s=>N(l)?l.value=s:null),class:"!w-20",size:"small",onBlur:s=>k(e,p.id),onKeyup:O(s=>k(e,p.id),["enter"])},null,8,["id","modelValue","onBlur","onKeyup"]),[[B,m(C)(e)]]),z(n(I,{class:"button-new-tag ml-1",size:"small",onClick:s=>(async r=>{d.value=r,b.value[r].focus()})(e)},{default:c(()=>[_(" + \u6DFB\u52A0 ")]),_:2},1032,["onClick"]),[[B,!m(C)(e)]])]),n(Q,{class:"my-10px"})]),_:2},1024))),128)}}})});export{L as _,ca as __tla};
