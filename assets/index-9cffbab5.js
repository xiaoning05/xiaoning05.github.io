import{d as U,C as q,r as o,u as B,p as D,o as u,c as L,w as W,a as t,q as p,e as _,h as k,$ as z,b as a,F as j,A as E,l as H,m as J,a8 as K,v as Q,__tla as $}from"./index-34f06ebd.js";import{g as G,_ as X,__tla as Y}from"./index-cb9c746b.js";import{u as Z,__tla as tt}from"./tagsView-0be307a7.js";import{a as at,t as rt,__tla as _t}from"./index-e159fffb.js";import{_ as lt,__tla as et}from"./ContractDetailsHeader.vue_vue_type_script_setup_true_lang-0fa0440e.js";import{_ as ot,__tla as st}from"./ContractDetailsInfo.vue_vue_type_script_setup_true_lang-516904cf.js";import{_ as ct,__tla as mt}from"./ContractProductList.vue_vue_type_script_setup_true_lang-309fe62b.js";import{B as T,__tla as ut}from"./index-ad2ad2c3.js";import{_ as nt,__tla as it}from"./ContractForm.vue_vue_type_script_setup_true_lang-e3adda46.js";import{_ as ft,__tla as pt}from"./TransferForm.vue_vue_type_script_setup_true_lang-d26834ea.js";import{_ as yt,__tla as ht}from"./PermissionList.vue_vue_type_script_setup_true_lang-200f292a.js";import{u as dt,__tla as vt}from"./useMessage-7a5ab7ef.js";import{__tla as bt}from"./el-timeline-item-d0b9b464.js";import{__tla as wt}from"./formatTime-ed0a77fd.js";import{__tla as Ct}from"./dict-e142e39a.js";import"./_plugin-vue_export-helper-1b428a4d.js";import{__tla as Rt}from"./ContentWrap.vue_vue_type_script_setup_true_lang-80915c85.js";import{__tla as kt}from"./index-460c50ff.js";import{__tla as zt}from"./el-descriptions-item-a4aeefac.js";import{__tla as Tt}from"./el-collapse-item-c051ca56.js";import{__tla as gt}from"./DictTag.vue_vue_type_script_lang-942df0b2.js";import"./color-f5b6e279.js";import{__tla as Vt}from"./formatter-20c10600.js";import{__tla as xt}from"./Dialog.vue_vue_type_style_index_0_lang-08560286.js";import{__tla as At}from"./index-93aed665.js";import{__tla as It}from"./index-cd2bb9f6.js";import{__tla as Ot}from"./index-f9574535.js";import{__tla as Pt}from"./index-afd15d48.js";import{__tla as Ft}from"./ProductList.vue_vue_type_script_setup_true_lang-ad83c411.js";import{__tla as Mt}from"./index-7e724689.js";import{__tla as Nt}from"./Table.vue_vue_type_style_index_0_scoped_1ee0f9ba_lang-2275dbf6.js";import{__tla as St}from"./tsxHelper-15dafc9f.js";import{__tla as Ut}from"./index-f8693880.js";import{__tla as qt}from"./index.vue_vue_type_script_setup_true_lang-68fe248c.js";import{__tla as Bt}from"./PermissionForm.vue_vue_type_script_setup_true_lang-56c4e6d5.js";let g,Dt=Promise.all([(()=>{try{return $}catch{}})(),(()=>{try{return Y}catch{}})(),(()=>{try{return tt}catch{}})(),(()=>{try{return _t}catch{}})(),(()=>{try{return et}catch{}})(),(()=>{try{return st}catch{}})(),(()=>{try{return mt}catch{}})(),(()=>{try{return ut}catch{}})(),(()=>{try{return it}catch{}})(),(()=>{try{return pt}catch{}})(),(()=>{try{return ht}catch{}})(),(()=>{try{return vt}catch{}})(),(()=>{try{return bt}catch{}})(),(()=>{try{return wt}catch{}})(),(()=>{try{return Ct}catch{}})(),(()=>{try{return Rt}catch{}})(),(()=>{try{return kt}catch{}})(),(()=>{try{return zt}catch{}})(),(()=>{try{return Tt}catch{}})(),(()=>{try{return gt}catch{}})(),(()=>{try{return Vt}catch{}})(),(()=>{try{return xt}catch{}})(),(()=>{try{return At}catch{}})(),(()=>{try{return It}catch{}})(),(()=>{try{return Ot}catch{}})(),(()=>{try{return Pt}catch{}})(),(()=>{try{return Ft}catch{}})(),(()=>{try{return Mt}catch{}})(),(()=>{try{return Nt}catch{}})(),(()=>{try{return St}catch{}})(),(()=>{try{return Ut}catch{}})(),(()=>{try{return qt}catch{}})(),(()=>{try{return Bt}catch{}})()]).then(async()=>{g=U({name:"CrmContractDetail",__name:"index",setup(Lt){const V=q(),x=dt(),n=o(0),i=o(!0),l=o({}),c=o(),y=o(),h=async()=>{i.value=!0;try{await A(n.value),l.value=await at(n.value)}finally{i.value=!1}},d=o([]),A=async r=>{if(!r)return;const s=await G({bizType:T.CRM_CONTRACT,bizId:r});d.value=s.list},v=o(),I=()=>{var r;(r=v.value)==null||r.open("\u5408\u540C\u8F6C\u79FB",l.value.id,rt)},{delView:O}=Z(),{currentRoute:P}=B(),f=()=>{O(t(P))};return D(async()=>{const r=V.params.id;if(!r)return x.warning("\u53C2\u6570\u9519\u8BEF\uFF0C\u5408\u540C\u4E0D\u80FD\u4E3A\u7A7A\uFF01"),void f();n.value=r,await h()}),(r,s)=>{const b=E,m=H,F=X,M=J,N=K,S=Q;return u(),L(j,null,[W((u(),p(lt,{contract:t(l)},{default:_(()=>{var e,w;return[(e=t(c))!=null&&e.validateWrite?(u(),p(b,{key:0,onClick:s[0]||(s[0]=Wt=>{return C="update",R=t(l).id,void y.value.open(C,R);var C,R})},{default:_(()=>[k(" \u7F16\u8F91 ")]),_:1})):z("",!0),(w=t(c))!=null&&w.validateOwnerUser?(u(),p(b,{key:1,type:"primary",onClick:I},{default:_(()=>[k(" \u8F6C\u79FB ")]),_:1})):z("",!0)]}),_:1},8,["contract"])),[[S,t(i)]]),a(N,null,{default:_(()=>[a(M,null,{default:_(()=>[a(m,{label:"\u57FA\u672C\u4FE1\u606F"},{default:_(()=>[a(ot,{contract:t(l)},null,8,["contract"])]),_:1}),a(m,{label:"\u4EA7\u54C1"},{default:_(()=>[a(ct,{modelValue:t(l).productItems,"onUpdate:modelValue":s[1]||(s[1]=e=>t(l).productItems=e)},null,8,["modelValue"])]),_:1}),a(m,{label:"\u56E2\u961F\u6210\u5458"},{default:_(()=>{var e;return[a(yt,{ref_key:"permissionListRef",ref:c,"biz-id":t(l).id,"biz-type":t(T).CRM_CONTRACT,"show-action":!((e=t(c))!=null&&e.isPool)||!1,onQuitTeam:f},null,8,["biz-id","biz-type","show-action"])]}),_:1}),a(m,{label:"\u64CD\u4F5C\u65E5\u5FD7"},{default:_(()=>[a(F,{"log-list":t(d)},null,8,["log-list"])]),_:1})]),_:1})]),_:1}),a(nt,{ref_key:"formRef",ref:y,onSuccess:h},null,512),a(ft,{ref_key:"transferFormRef",ref:v,onSuccess:f},null,512)],64)}}})});export{Dt as __tla,g as default};
