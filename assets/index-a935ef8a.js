import{an as V,d as J,k as K,r as y,n as O,p as T,D as W,o as d,q as _,e as l,w as h,a as e,b as t,f as $,h as n,c as x,$ as D,A as F,ae as G,af as H,y as I,bU as L,B as N,v as Q,__tla as X}from"./index-34f06ebd.js";import{_ as Y,__tla as Z}from"./ContentWrap.vue_vue_type_script_setup_true_lang-80915c85.js";import{C as aa,__tla as ea}from"./CardTitle-b727423c.js";import{u as la,__tla as ta}from"./useMessage-7a5ab7ef.js";import{E as sa,__tla as oa}from"./index-460c50ff.js";import"./_plugin-vue_export-helper-1b428a4d.js";let w,na=Promise.all([(()=>{try{return X}catch{}})(),(()=>{try{return Z}catch{}})(),(()=>{try{return ea}catch{}})(),(()=>{try{return ta}catch{}})(),(()=>{try{return oa}catch{}})()]).then(async()=>{let p,v,b;p={class:"flex items-center justify-between"},v={key:0},b={key:0},w=J({name:"CrmCustomerPoolConfig",__name:"index",setup(ra){const C=la(),{t:U}=K(),r=y(!1),a=y({enabled:!1,contactExpireDays:void 0,dealExpireDays:void 0,notifyEnabled:!1,notifyDays:void 0}),k=O({enabled:[{required:!0,message:"\u662F\u5426\u542F\u7528\u5BA2\u6237\u516C\u6D77\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}]}),c=y(),E=async()=>{try{r.value=!0;const u=await(async()=>await V.get({url:"/crm/customer-pool-config/get"}))();if(u===null)return;a.value=u}finally{r.value=!1}},q=async()=>{if(c&&await c.value.validate()){r.value=!0;try{const u=a.value;await(async s=>await V.put({url:"/crm/customer-pool-config/save",data:s}))(u),C.success(U("common.updateSuccess")),await E(),r.value=!1}finally{r.value=!1}}},z=()=>{a.value.enabled||(a.value.contactExpireDays=void 0,a.value.dealExpireDays=void 0,a.value.notifyEnabled=!1,a.value.notifyDays=void 0)},P=()=>{a.value.notifyEnabled||(a.value.notifyDays=void 0)};return T(()=>{E()}),(u,s)=>{const j=F,i=G,g=H,m=I,f=L,A=sa,B=N,M=Y,R=W("hasPermi"),S=Q;return d(),_(M,null,{default:l(()=>[h((d(),_(B,{ref_key:"formRef",ref:c,model:e(a),rules:e(k),"label-width":"160px"},{default:l(()=>[t(A,{shadow:"never"},{header:l(()=>[$("div",p,[t(e(aa),{title:"\u5BA2\u6237\u516C\u6D77\u89C4\u5219\u8BBE\u7F6E"}),h((d(),_(j,{type:"primary",onClick:q},{default:l(()=>[n(" \u4FDD\u5B58 ")]),_:1})),[[R,["crm:customer-pool-config:update"]]])])]),default:l(()=>[t(m,{label:"\u5BA2\u6237\u516C\u6D77\u89C4\u5219\u8BBE\u7F6E",prop:"enabled"},{default:l(()=>[t(g,{modelValue:e(a).enabled,"onUpdate:modelValue":s[0]||(s[0]=o=>e(a).enabled=o),onChange:z,class:"ml-4"},{default:l(()=>[t(i,{label:!1,size:"large"},{default:l(()=>[n("\u4E0D\u542F\u7528")]),_:1}),t(i,{label:!0,size:"large"},{default:l(()=>[n("\u542F\u7528")]),_:1})]),_:1},8,["modelValue"])]),_:1}),e(a).enabled?(d(),x("div",v,[t(m,null,{default:l(()=>[t(f,{class:"mr-2",modelValue:e(a).contactExpireDays,"onUpdate:modelValue":s[1]||(s[1]=o=>e(a).contactExpireDays=o)},null,8,["modelValue"]),n(" \u5929\u4E0D\u8DDF\u8FDB\u6216 "),t(f,{class:"mx-2",modelValue:e(a).dealExpireDays,"onUpdate:modelValue":s[2]||(s[2]=o=>e(a).dealExpireDays=o)},null,8,["modelValue"]),n(" \u5929\u672A\u6210\u4EA4 ")]),_:1}),t(m,{label:"\u63D0\u524D\u63D0\u9192\u8BBE\u7F6E",prop:"notifyEnabled"},{default:l(()=>[t(g,{modelValue:e(a).notifyEnabled,"onUpdate:modelValue":s[3]||(s[3]=o=>e(a).notifyEnabled=o),onChange:P,class:"ml-4"},{default:l(()=>[t(i,{label:!1,size:"large"},{default:l(()=>[n("\u4E0D\u63D0\u9192")]),_:1}),t(i,{label:!0,size:"large"},{default:l(()=>[n("\u63D0\u9192")]),_:1})]),_:1},8,["modelValue"])]),_:1}),e(a).notifyEnabled?(d(),x("div",b,[t(m,null,{default:l(()=>[n(" \u63D0\u524D "),t(f,{class:"mx-2",modelValue:e(a).notifyDays,"onUpdate:modelValue":s[4]||(s[4]=o=>e(a).notifyDays=o)},null,8,["modelValue"]),n(" \u5929\u63D0\u9192 ")]),_:1})])):D("",!0)])):D("",!0)]),_:1})]),_:1},8,["model","rules"])),[[S,e(r)]])]),_:1})}}})});export{na as __tla,w as default};
