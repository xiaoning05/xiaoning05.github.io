import{d as O,k as z,r as f,n as P,p as j,D,o as c,c as F,b as t,e as i,h as d,w as y,q as m,a as e,$ as Q,F as Y,_ as q,A as B,E as G,i as $,v as H,__tla as J}from"./index-34f06ebd.js";import{_ as K,__tla as V}from"./index.vue_vue_type_script_setup_true_lang-68fe248c.js";import{_ as W,__tla as X}from"./DictTag.vue_vue_type_script_lang-942df0b2.js";import{d as Z,__tla as aa}from"./formatTime-ed0a77fd.js";import{L as N,_ as ta,g as ea,d as la,__tla as ra}from"./CustomerLimitConfigForm.vue_vue_type_script_setup_true_lang-ee2c99c9.js";import{D as na,__tla as oa}from"./dict-e142e39a.js";import{u as ia,__tla as sa}from"./useMessage-7a5ab7ef.js";let S,ca=Promise.all([(()=>{try{return J}catch{}})(),(()=>{try{return V}catch{}})(),(()=>{try{return X}catch{}})(),(()=>{try{return aa}catch{}})(),(()=>{try{return ra}catch{}})(),(()=>{try{return oa}catch{}})(),(()=>{try{return sa}catch{}})()]).then(async()=>{S=O({name:"CustomerLimitConfigList",__name:"CustomerLimitConfigList",props:{confType:{}},setup(v){const C=ia(),{t:U}=z(),{confType:T}=v,g=f(!0),b=f(0),k=f([]),s=P({pageNo:1,pageSize:10,type:T}),p=async()=>{g.value=!0;try{const n=await ea(s);k.value=n.list,b.value=n.total}finally{g.value=!1}},w=f(),I=(n,l)=>{w.value.open(n,T,l)},x=()=>{s.pageNo=1,p()};return j(()=>{p()}),(n,l)=>{const L=q,u=B,r=G,E=W,A=$,R=K,h=D("hasPermi"),M=H;return c(),F(Y,null,[t(u,{plain:"",onClick:x},{default:i(()=>[t(L,{icon:"ep:refresh",class:"mr-5px"}),d(" \u5237\u65B0 ")]),_:1}),y((c(),m(u,{type:"primary",plain:"",onClick:l[0]||(l[0]=a=>I("create"))},{default:i(()=>[t(L,{icon:"ep:plus",class:"mr-5px"}),d(" \u65B0\u589E ")]),_:1})),[[h,["crm:customer-limit-config:create"]]]),y((c(),m(A,{data:e(k),stripe:!0,"show-overflow-tooltip":!0,class:"mt-4"},{default:i(()=>[t(r,{label:"\u7F16\u53F7",align:"center",prop:"id"}),t(r,{label:"\u89C4\u5219\u7C7B\u578B",align:"center",prop:"type"}),t(r,{label:"\u89C4\u5219\u9002\u7528\u4EBA\u7FA4",align:"center",formatter:a=>{var o;return(o=a.users)==null?void 0:o.map(_=>_.nickname).join("\uFF0C")}},null,8,["formatter"]),t(r,{label:"\u89C4\u5219\u9002\u7528\u90E8\u95E8",align:"center",formatter:a=>{var o;return(o=a.depts)==null?void 0:o.map(_=>_.name).join("\uFF0C")}},null,8,["formatter"]),t(r,{label:n.confType===e(N).CUSTOMER_QUANTITY_LIMIT?"\u62E5\u6709\u5BA2\u6237\u6570\u4E0A\u9650":"\u9501\u5B9A\u5BA2\u6237\u6570\u4E0A\u9650",align:"center",prop:"maxCount"},null,8,["label"]),n.confType===e(N).CUSTOMER_QUANTITY_LIMIT?(c(),m(r,{key:0,label:"\u6210\u4EA4\u5BA2\u6237\u662F\u5426\u5360\u7528\u62E5\u6709\u5BA2\u6237\u6570",align:"center",prop:"dealCountEnabled"},{default:i(a=>[t(E,{type:e(na).INFRA_BOOLEAN_STRING,value:a.row.dealCountEnabled},null,8,["type","value"])]),_:1})):Q("",!0),t(r,{label:"\u521B\u5EFA\u65F6\u95F4",align:"center",prop:"createTime",formatter:e(Z),width:"180px"},null,8,["formatter"]),t(r,{label:"\u64CD\u4F5C",align:"center","min-width":"110",fixed:"right"},{default:i(a=>[y((c(),m(u,{link:"",type:"primary",onClick:o=>I("update",a.row.id)},{default:i(()=>[d(" \u7F16\u8F91 ")]),_:2},1032,["onClick"])),[[h,["crm:customer-limit-config:update"]]]),y((c(),m(u,{link:"",type:"danger",onClick:o=>(async _=>{try{await C.delConfirm(),await la(_),C.success(U("common.delSuccess")),await p()}catch{}})(a.row.id)},{default:i(()=>[d(" \u5220\u9664 ")]),_:2},1032,["onClick"])),[[h,["crm:customer-limit-config:delete"]]])]),_:1})]),_:1},8,["data"])),[[M,e(g)]]),t(R,{total:e(b),page:e(s).pageNo,"onUpdate:page":l[1]||(l[1]=a=>e(s).pageNo=a),limit:e(s).pageSize,"onUpdate:limit":l[2]||(l[2]=a=>e(s).pageSize=a),onPagination:p},null,8,["total","page","limit"]),t(ta,{ref_key:"formRef",ref:w,onSuccess:p},null,512)],64)}}})});export{S as _,ca as __tla};
