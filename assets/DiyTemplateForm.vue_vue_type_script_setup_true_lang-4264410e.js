import{d as q,i as A,r as m,e as I,o as w,v as V,w as s,f as o,a,h,x as j,l as B,P as R,A as z,D as E,C as G,I as H,__tla as J}from"./index-d5b00dc9.js";import{_ as K,__tla as L}from"./Dialog.vue_vue_type_style_index_0_lang-03cf6454.js";import{_ as M,__tla as N}from"./UploadImgs-75fdd3de.js";import{a as O,c as Q,b as W,__tla as X}from"./template-dca52a26.js";import{u as Y,__tla as Z}from"./useMessage-2288a5f2.js";let U,$=Promise.all([(()=>{try{return J}catch{}})(),(()=>{try{return L}catch{}})(),(()=>{try{return N}catch{}})(),(()=>{try{return X}catch{}})(),(()=>{try{return Z}catch{}})()]).then(async()=>{U=q({name:"DiyTemplateForm",__name:"DiyTemplateForm",emits:["success"],setup(ee,{expose:k,emit:b}){const{t:c}=A(),_=Y(),u=m(!1),p=m(""),i=m(!1),v=m(""),l=m({id:void 0,name:void 0,remark:void 0,previewPicUrls:[]}),P=I({name:[{required:!0,message:"\u6A21\u677F\u540D\u79F0\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}]}),d=m();k({open:async(t,e)=>{if(u.value=!0,p.value=c("action."+t),v.value=t,C(),e){i.value=!0;try{l.value=await O(e)}finally{i.value=!1}}}});const g=b,x=async()=>{if(d&&await d.value.validate()){i.value=!0;try{const t=l.value;v.value==="create"?(await Q(t),_.success(c("common.createSuccess"))):(await W(t),_.success(c("common.updateSuccess"))),u.value=!1,g("success")}finally{i.value=!1}}},C=()=>{var t;l.value={id:void 0,name:void 0,remark:void 0,previewPicUrls:[]},(t=d.value)==null||t.resetFields()};return(t,e)=>{const f=R,n=z,D=M,F=E,y=G,S=K,T=H;return w(),V(S,{modelValue:a(u),"onUpdate:modelValue":e[4]||(e[4]=r=>B(u)?u.value=r:null),title:a(p)},{footer:s(()=>[o(y,{disabled:a(i),type:"primary",onClick:x},{default:s(()=>[h("\u786E \u5B9A")]),_:1},8,["disabled"]),o(y,{onClick:e[3]||(e[3]=r=>u.value=!1)},{default:s(()=>[h("\u53D6 \u6D88")]),_:1})]),default:s(()=>[j((w(),V(F,{ref_key:"formRef",ref:d,model:a(l),rules:a(P),"label-width":"100px"},{default:s(()=>[o(n,{label:"\u6A21\u677F\u540D\u79F0",prop:"name"},{default:s(()=>[o(f,{modelValue:a(l).name,"onUpdate:modelValue":e[0]||(e[0]=r=>a(l).name=r),placeholder:"\u8BF7\u8F93\u5165\u6A21\u677F\u540D\u79F0"},null,8,["modelValue"])]),_:1}),o(n,{label:"\u5907\u6CE8",prop:"remark"},{default:s(()=>[o(f,{modelValue:a(l).remark,"onUpdate:modelValue":e[1]||(e[1]=r=>a(l).remark=r),placeholder:"\u8BF7\u8F93\u5165\u5907\u6CE8",type:"textarea"},null,8,["modelValue"])]),_:1}),o(n,{label:"\u9884\u89C8\u56FE",prop:"previewPicUrls"},{default:s(()=>[o(D,{modelValue:a(l).previewPicUrls,"onUpdate:modelValue":e[2]||(e[2]=r=>a(l).previewPicUrls=r)},null,8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])),[[T,a(i)]])]),_:1},8,["modelValue","title"])}}})});export{U as _,$ as __tla};
