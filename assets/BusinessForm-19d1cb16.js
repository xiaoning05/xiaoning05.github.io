import{d as ue,i as de,r,e as B,o as _,v as V,w as o,f as l,a,h as b,x as re,I as se,c as D,F,q as O,l as ie,Q as ne,A as ce,H as me,j as pe,k as _e,D as ve,dU as fe,y as ye,z as Ve,B as be,G as he,J as ge,_ as we,__tla as Ue}from"./index-f0743f71.js";import{_ as Ie,__tla as ke}from"./Dialog-8f786edd.js";import{_ as Te,__tla as Se}from"./index-cf7b3541.js";import{_ as Pe,__tla as Ce}from"./DictTag-4f08045a.js";import{g as Ne,c as Re,u as xe,__tla as Ee}from"./index-109e656c.js";import{g as ze,a as Me,__tla as Le}from"./index-a6e0da93.js";import{g as Be,__tla as De}from"./index-3518afc7.js";import{D as A,__tla as Fe}from"./dict-4a9940b3.js";import{u as Oe,__tla as Ae}from"./useMessage-75a00a06.js";import{__tla as qe}from"./index-8beae3df.js";import"./color-f5b6e279.js";let q,Ge=Promise.all([(()=>{try{return Ue}catch{}})(),(()=>{try{return ke}catch{}})(),(()=>{try{return Se}catch{}})(),(()=>{try{return Ce}catch{}})(),(()=>{try{return Ee}catch{}})(),(()=>{try{return Le}catch{}})(),(()=>{try{return De}catch{}})(),(()=>{try{return Fe}catch{}})(),(()=>{try{return Ae}catch{}})(),(()=>{try{return qe}catch{}})()]).then(async()=>{q=we(ue({__name:"BusinessForm",emits:["success"],setup(He,{expose:G,emit:H}){const{t:h}=de(),U=Oe(),i=r(!1),I=r(""),n=r(!1),k=r(""),u=r({id:void 0,name:void 0,statusTypeId:void 0,statusId:void 0,contactNextTime:void 0,customerId:void 0,dealTime:void 0,price:void 0,discountPercent:void 0,productPrice:void 0,remark:void 0,ownerUserId:void 0,roUserIds:void 0,rwUserIds:void 0,endStatus:void 0,endRemark:void 0,contactLastTime:void 0,followUpStatus:void 0}),j=B({name:[{required:!0,message:"\u5546\u673A\u540D\u79F0\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}]}),f=r(),T=r([]),S=r([]),P=r(!0),C=r(0),N=r([]);G({open:async(d,t)=>{if(i.value=!0,I.value=h("action."+d),k.value=d,X(),t){n.value=!0;try{u.value=await Ne(t)}finally{n.value=!1}}S.value=await ze()}});const J=H,Q=async()=>{if(f&&await f.value.validate()){n.value=!0;try{const d=u.value;k.value==="create"?(await Re(d),U.success(h("common.createSuccess"))):(await xe(d),U.success(h("common.updateSuccess"))),i.value=!1,J("success")}finally{n.value=!1}}},X=()=>{var d;u.value={id:void 0,name:void 0,statusTypeId:void 0,statusId:void 0,contactNextTime:void 0,customerId:void 0,dealTime:void 0,price:void 0,discountPercent:void 0,productPrice:void 0,remark:void 0,ownerUserId:void 0,roUserIds:void 0,rwUserIds:void 0,endStatus:void 0,endRemark:void 0,contactLastTime:void 0,followUpStatus:void 0},(d=f.value)==null||d.resetFields()},Y=async d=>{T.value=await Me(d)},c=B({pageNo:1,pageSize:10,name:null,mobile:null,industryId:null,level:null,source:null,pool:!1}),m=r(!1),Z=()=>{m.value=!m.value,c.pageNo=1,R()},R=async()=>{P.value=!0;try{const d=await Be(c);N.value=d.list,C.value=d.total}finally{P.value=!1}},g=r(),w=r(),$=({},d)=>{w.value=d,g.value.clearSelection(),g.value.toggleRowSelection(d,void 0)},K=()=>{u.value.customerId=w.value.id,u.value.customerName=w.value.name,m.value=!m.value};return(d,t)=>{const p=ne,s=ce,v=me,x=Pe,W=Te,E=pe,z=_e,y=ve,ee=fe,M=ye,L=Ve,le=be,ae=he,te=Ie,oe=ge;return _(),V(te,{title:a(I),modelValue:a(i),"onUpdate:modelValue":t[13]||(t[13]=e=>ie(i)?i.value=e:null)},{footer:o(()=>[l(y,{onClick:Q,type:"primary",disabled:a(n)},{default:o(()=>[b("\u786E \u5B9A")]),_:1},8,["disabled"]),l(y,{onClick:t[12]||(t[12]=e=>i.value=!1)},{default:o(()=>[b("\u53D6 \u6D88")]),_:1})]),default:o(()=>[re((_(),V(ae,{ref_key:"formRef",ref:f,model:a(u),rules:a(j),"label-width":"100px"},{default:o(()=>[l(s,{label:"\u5546\u673A\u540D\u79F0",prop:"name"},{default:o(()=>[l(p,{modelValue:a(u).name,"onUpdate:modelValue":t[0]||(t[0]=e=>a(u).name=e),placeholder:"\u8BF7\u8F93\u5165\u5546\u673A\u540D\u79F0"},null,8,["modelValue"])]),_:1}),l(s,{label:"\u5BA2\u6237\u540D\u79F0",prop:"customerName"},{default:o(()=>[l(ee,{placement:"bottom",width:600,trigger:"click",teleported:!1,visible:a(m),offset:10},{reference:o(()=>[l(p,{placeholder:"\u8BF7\u9009\u62E9\u5BA2\u6237",onClick:Z,modelValue:a(u).customerName,"onUpdate:modelValue":t[1]||(t[1]=e=>a(u).customerName=e)},null,8,["modelValue"])]),default:o(()=>[l(a(se),{data:a(N),ref_key:"multipleTableRef",ref:g,onSelect:$},{default:o(()=>[l(v,{width:"55",label:"\u9009\u62E9",type:"selection"}),l(v,{width:"100",label:"\u7F16\u53F7",property:"id"}),l(v,{width:"150",label:"\u5BA2\u6237\u540D\u79F0",property:"name"}),l(v,{width:"100",label:"\u5BA2\u6237\u6765\u6E90",prop:"source",align:"center"},{default:o(e=>[l(x,{type:a(A).CRM_CUSTOMER_SOURCE,value:e.row.source},null,8,["type","value"])]),_:1}),l(v,{label:"\u5BA2\u6237\u7B49\u7EA7",align:"center",prop:"level",width:"120"},{default:o(e=>[l(x,{type:a(A).CRM_CUSTOMER_LEVEL,value:e.row.level},null,8,["type","value"])]),_:1})]),_:1},8,["data"]),l(z,{gutter:20},{default:o(()=>[l(E,null,{default:o(()=>[l(W,{total:a(C),page:a(c).pageNo,"onUpdate:page":t[2]||(t[2]=e=>a(c).pageNo=e),limit:a(c).pageSize,"onUpdate:limit":t[3]||(t[3]=e=>a(c).pageSize=e),onPagination:R,layout:"sizes, prev, pager, next"},null,8,["total","page","limit"])]),_:1})]),_:1}),l(z,{gutter:20},{default:o(()=>[l(E,{span:10,offset:13},{default:o(()=>[l(y,{onClick:K},{default:o(()=>[b("\u786E\u8BA4")]),_:1}),l(y,{onClick:t[4]||(t[4]=e=>m.value=!1)},{default:o(()=>[b("\u53D6\u6D88")]),_:1})]),_:1})]),_:1})]),_:1},8,["visible"])]),_:1}),l(s,{label:"\u5546\u673A\u72B6\u6001\u7C7B\u578B",prop:"statusTypeId"},{default:o(()=>[l(L,{modelValue:a(u).statusTypeId,"onUpdate:modelValue":t[5]||(t[5]=e=>a(u).statusTypeId=e),placeholder:"\u8BF7\u9009\u62E9\u5546\u673A\u72B6\u6001\u7C7B\u578B",clearable:"",onChange:Y},{default:o(()=>[(_(!0),D(F,null,O(a(S),e=>(_(),V(M,{key:e.id,label:e.name,value:e.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),l(s,{label:"\u5546\u673A\u72B6\u6001",prop:"statusId"},{default:o(()=>[l(L,{modelValue:a(u).statusId,"onUpdate:modelValue":t[6]||(t[6]=e=>a(u).statusId=e),placeholder:"\u8BF7\u9009\u62E9\u5546\u673A\u72B6\u6001",clearable:""},{default:o(()=>[(_(!0),D(F,null,O(a(T),e=>(_(),V(M,{key:e.id,label:e.name,value:e.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),l(s,{label:"\u9884\u8BA1\u6210\u4EA4\u65E5\u671F",prop:"dealTime"},{default:o(()=>[l(le,{modelValue:a(u).dealTime,"onUpdate:modelValue":t[7]||(t[7]=e=>a(u).dealTime=e),type:"date","value-format":"x",placeholder:"\u9009\u62E9\u9884\u8BA1\u6210\u4EA4\u65E5\u671F"},null,8,["modelValue"])]),_:1}),l(s,{label:"\u5546\u673A\u91D1\u989D",prop:"price"},{default:o(()=>[l(p,{modelValue:a(u).price,"onUpdate:modelValue":t[8]||(t[8]=e=>a(u).price=e),placeholder:"\u8BF7\u8F93\u5165\u5546\u673A\u91D1\u989D"},null,8,["modelValue"])]),_:1}),l(s,{label:"\u6574\u5355\u6298\u6263",prop:"discountPercent"},{default:o(()=>[l(p,{modelValue:a(u).discountPercent,"onUpdate:modelValue":t[9]||(t[9]=e=>a(u).discountPercent=e),placeholder:"\u8BF7\u8F93\u5165\u6574\u5355\u6298\u6263"},null,8,["modelValue"])]),_:1}),l(s,{label:"\u4EA7\u54C1\u603B\u91D1\u989D",prop:"productPrice"},{default:o(()=>[l(p,{modelValue:a(u).productPrice,"onUpdate:modelValue":t[10]||(t[10]=e=>a(u).productPrice=e),placeholder:"\u8BF7\u8F93\u5165\u4EA7\u54C1\u603B\u91D1\u989D"},null,8,["modelValue"])]),_:1}),l(s,{label:"\u5907\u6CE8",prop:"remark"},{default:o(()=>[l(p,{modelValue:a(u).remark,"onUpdate:modelValue":t[11]||(t[11]=e=>a(u).remark=e),placeholder:"\u8BF7\u8F93\u5165\u5907\u6CE8"},null,8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])),[[oe,a(n)]])]),_:1},8,["title","modelValue"])}}}),[["__file","E:/newCode/GYZX-UI-ADMIN/src/views/crm/business/BusinessForm.vue"]])});export{Ge as __tla,q as default};
