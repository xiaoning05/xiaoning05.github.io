import{cq as oe,cr as se,d as re,aY as ie,a2 as G,r as ce,o as d,v as y,w as o,f as e,g as p,c as C,F as ue,q as de,a,S as K,t as L,a5 as _,l as me,C as pe,D as _e,k as ge,aV as ve,Q as he,j as fe,eb as ye,aZ as Ce,W as we,X as ke,_ as Ve,__tla as Ue}from"./index-f0743f71.js";import{_ as be,__tla as Fe}from"./Editor-9944a8eb.js";import{u as Q,__tla as Ne}from"./useMessage-75a00a06.js";import Se,{__tla as Ie}from"./CoverSelect-bb211b8e.js";let F,R,H,xe=Promise.all([(()=>{try{return Ue}catch{}})(),(()=>{try{return Fe}catch{}})(),(()=>{try{return Ne}catch{}})(),(()=>{try{return Ie}catch{}})()]).then(async()=>{let V,N,S,I,x,z,A,M,O,E,P,j,q,B,D,T,W;V=Q(),N=(g,U)=>({MENU_CONF:{uploadImage:{server:g,maxFileSize:5242880,maxNumberOfFiles:10,allowedFileTypes:["image/*"],meta:{accountId:U,type:"image"},metaWithUrl:!0,headers:{Accept:"*",Authorization:"Bearer "+oe(),"tenant-id":se()},withCredentials:!0,timeout:5e3,fieldName:"file",onBeforeUpload:n=>(console.log(n),n),onProgress(n){console.log("progress",n)},onSuccess(n,u){console.log("onSuccess",n,u)},onFailed(n,u){V.alertError(u.message),console.log("onFailed",n,u)},onError(n,u,b){V.alertError(u.message),console.error("onError",n,u,b)},customInsert(n,u){u(n.data.url,"image",n.data.url)}}}}),H=()=>({title:"",thumbMediaId:"",author:"",digest:"",showCoverPic:"",content:"",contentSourceUrl:"",needOpenComment:"",onlyFansCanComment:"",thumbUrl:""}),S={class:"select-item"},I=["onClick"],x={class:"news-content"},z=["src"],A={class:"news-content-title"},M={key:0,class:"child"},O=["onClick"],E={class:"news-content-item"},P={class:"news-content-item-title"},j={class:"news-content-item-img"},q=["src"],B={class:"child"},D={key:0},T=(g=>(we("data-v-3b275aea"),g=g(),ke(),g))(()=>p("p",null,"\u6458\u8981:",-1)),W=re({name:"NewsForm",__name:"NewsForm",props:{isCreating:{type:Boolean,required:!0},modelValue:{type:[Array,null],required:!0}},emits:["update:modelValue"],setup(g,{emit:U}){const n=Q(),u=g,b=ie("accountId"),J=N("http://192.168.35.229:48080/admin-api/mp/material/upload-permanent",b),$=U,l=G({get:()=>u.modelValue===null?[{title:"",thumbMediaId:"",author:"",digest:"",showCoverPic:"",content:"",contentSourceUrl:"",needOpenComment:"",onlyFansCanComment:"",thumbUrl:""}]:u.modelValue,set(s){$("update:modelValue",s)}}),m=ce(0),c=G(()=>l.value[m.value]),X=s=>{const r=l.value[s];l.value[s]=l.value[s+1],l.value[s+1]=r,m.value=s+1},Y=async s=>{try{await n.confirm("\u786E\u5B9A\u5220\u9664\u8BE5\u56FE\u6587\u5417?"),l.value.splice(s,1),m.value===s&&(m.value=0)}catch{}},ee=()=>{l.value.push({title:"",thumbMediaId:"",author:"",digest:"",showCoverPic:"",content:"",contentSourceUrl:"",needOpenComment:"",onlyFansCanComment:"",thumbUrl:""}),m.value=l.value.length-1};return(s,r)=>{const h=pe,f=_e,w=ge,ae=ve,k=he,Z=fe,le=ye,te=Ce;return d(),y(te,null,{default:o(()=>[e(ae,{width:"40%"},{default:o(()=>[p("div",S,[(d(!0),C(ue,null,de(a(l),(t,i)=>(d(),C("div",{key:i},[i===0?(d(),C("div",{key:0,class:K(["news-main father",{activeAddNews:a(m)===i}]),onClick:v=>m.value=i},[p("div",x,[p("img",{class:"material-img",src:t.thumbUrl},null,8,z),p("div",A,L(t.title),1)]),a(l).length>1?(d(),C("div",M,[e(f,{type:"info",circle:"",size:"small",onClick:()=>X(i)},{default:o(()=>[e(h,{icon:"ep:arrow-down-bold"})]),_:2},1032,["onClick"]),s.isCreating?(d(),y(f,{key:0,type:"danger",circle:"",size:"small",onClick:()=>Y(i)},{default:o(()=>[e(h,{icon:"ep:delete"})]),_:2},1032,["onClick"])):_("",!0)])):_("",!0)],10,I)):_("",!0),i>0?(d(),C("div",{key:1,class:K(["news-main-item father",{activeAddNews:a(m)===i}]),onClick:v=>m.value=i},[p("div",E,[p("div",P,L(t.title),1),p("div",j,[p("img",{class:"material-img",src:t.thumbUrl,width:"100%"},null,8,q)])]),p("div",B,[a(l).length>i+1?(d(),y(f,{key:0,circle:"",type:"info",size:"small",onClick:()=>X(i)},{default:o(()=>[e(h,{icon:"ep:arrow-down-bold"})]),_:2},1032,["onClick"])):_("",!0),i>0?(d(),y(f,{key:1,type:"info",circle:"",size:"small",onClick:()=>(v=>{const ne=l.value[v];l.value[v]=l.value[v-1],l.value[v-1]=ne,m.value=v-1})(i)},{default:o(()=>[e(h,{icon:"ep:arrow-up-bold"})]),_:2},1032,["onClick"])):_("",!0),s.isCreating?(d(),y(f,{key:2,type:"danger",size:"small",circle:"",onClick:()=>Y(i)},{default:o(()=>[e(h,{icon:"ep:delete"})]),_:2},1032,["onClick"])):_("",!0)])],10,O)):_("",!0)]))),128)),e(w,{justify:"center",class:"ope-row"},{default:o(()=>[a(l).length<8&&s.isCreating?(d(),y(f,{key:0,type:"primary",circle:"",onClick:ee},{default:o(()=>[e(h,{icon:"ep:plus"})]),_:1})):_("",!0)]),_:1})])]),_:1}),e(le,null,{default:o(()=>[a(l).length>0?(d(),C("div",D,[e(w,{gutter:20},{default:o(()=>[e(k,{modelValue:a(c).title,"onUpdate:modelValue":r[0]||(r[0]=t=>a(c).title=t),placeholder:"\u8BF7\u8F93\u5165\u6807\u9898\uFF08\u5FC5\u586B\uFF09"},null,8,["modelValue"]),e(k,{modelValue:a(c).author,"onUpdate:modelValue":r[1]||(r[1]=t=>a(c).author=t),placeholder:"\u8BF7\u8F93\u5165\u4F5C\u8005",style:{"margin-top":"5px"}},null,8,["modelValue"]),e(k,{modelValue:a(c).contentSourceUrl,"onUpdate:modelValue":r[2]||(r[2]=t=>a(c).contentSourceUrl=t),placeholder:"\u8BF7\u8F93\u5165\u539F\u6587\u5730\u5740",style:{"margin-top":"5px"}},null,8,["modelValue"])]),_:1}),e(w,{gutter:20},{default:o(()=>[e(Z,{span:12},{default:o(()=>[e(Se,{modelValue:a(c),"onUpdate:modelValue":r[3]||(r[3]=t=>me(c)?c.value=t:null),"is-first":a(m)===0},null,8,["modelValue","is-first"])]),_:1}),e(Z,{span:12},{default:o(()=>[T,e(k,{rows:8,type:"textarea",modelValue:a(c).digest,"onUpdate:modelValue":r[4]||(r[4]=t=>a(c).digest=t),placeholder:"\u8BF7\u8F93\u5165\u6458\u8981",class:"digest",maxlength:"120"},null,8,["modelValue"])]),_:1})]),_:1}),e(w,null,{default:o(()=>[e(a(be),{modelValue:a(c).content,"onUpdate:modelValue":r[5]||(r[5]=t=>a(c).content=t),"editor-config":a(J)},null,8,["modelValue","editor-config"])]),_:1})])):_("",!0)]),_:1})]),_:1})}}}),F=Ve(W,[["__scopeId","data-v-3b275aea"],["__file","E:/newCode/GYZX-UI-ADMIN/src/views/mp/draft/components/NewsForm.vue"]]),R=Object.freeze(Object.defineProperty({__proto__:null,default:F},Symbol.toStringTag,{value:"Module"}))});export{F as N,xe as __tla,R as a,H as c};
