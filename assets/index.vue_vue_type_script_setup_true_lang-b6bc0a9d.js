import{d as O,k as j,r as _,n as q,aQ as A,D as M,o as u,c as W,b as a,e as o,h as f,w as y,q as b,a as e,F as Y,_ as Q,A as B,aa as G,E as H,i as J,v as K,__tla as V}from"./index-34f06ebd.js";import{_ as X,__tla as Z}from"./ContentWrap.vue_vue_type_script_setup_true_lang-80915c85.js";import{_ as $,__tla as aa}from"./index.vue_vue_type_script_setup_true_lang-68fe248c.js";import{_ as ea,__tla as ta}from"./DictTag.vue_vue_type_script_lang-942df0b2.js";import{d as v,__tla as la}from"./formatTime-ed0a77fd.js";import{D as ra,__tla as oa}from"./dict-e142e39a.js";import{_ as ia,F as T,__tla as na}from"./FollowUpRecordForm.vue_vue_type_script_setup_true_lang-1319857e.js";import{u as pa,__tla as sa}from"./useMessage-7a5ab7ef.js";let x,ca=Promise.all([(()=>{try{return V}catch{}})(),(()=>{try{return Z}catch{}})(),(()=>{try{return aa}catch{}})(),(()=>{try{return ta}catch{}})(),(()=>{try{return la}catch{}})(),(()=>{try{return oa}catch{}})(),(()=>{try{return na}catch{}})(),(()=>{try{return sa}catch{}})()]).then(async()=>{x=O({name:"FollowUpRecord",__name:"index",props:{bizType:{},bizId:{}},setup(C){const n=C,g=pa(),{t:P}=j(),d=_(!0),h=_([]),w=_(0),i=q({pageNo:1,pageSize:10,bizType:0,bizId:0}),s=async()=>{d.value=!0;try{const p=await T.getFollowUpRecordPage(i);h.value=p.list,w.value=p.total}finally{d.value=!1}},z=_(),k=(p,r)=>{var c;(c=z.value)==null||c.open(n.bizType,n.bizId,p,r)};return A(()=>n.bizId,()=>{i.bizType=n.bizType,i.bizId=n.bizId,s()}),(p,r)=>{const c=Q,m=B,U=G,t=H,F=ea,R=J,S=$,N=X,I=M("hasPermi"),D=K;return u(),W(Y,null,[a(U,{class:"mb-10px",justify:"end"},{default:o(()=>[a(m,{onClick:r[0]||(r[0]=l=>k("create"))},{default:o(()=>[a(c,{class:"mr-5px",icon:"ep:edit"}),f(" \u5199\u8DDF\u8FDB ")]),_:1})]),_:1}),a(N,null,{default:o(()=>[y((u(),b(R,{data:e(h),"show-overflow-tooltip":!0,stripe:!0},{default:o(()=>[a(t,{align:"center",label:"\u7F16\u53F7",prop:"id"}),a(t,{align:"center",label:"\u8DDF\u8FDB\u4EBA",prop:"creatorName"}),a(t,{align:"center",label:"\u8DDF\u8FDB\u7C7B\u578B",prop:"type"},{default:o(l=>[a(F,{type:e(ra).CRM_FOLLOW_UP_TYPE,value:l.row.type},null,8,["type","value"])]),_:1}),a(t,{align:"center",label:"\u8DDF\u8FDB\u5185\u5BB9",prop:"content"}),a(t,{formatter:e(v),align:"center",label:"\u4E0B\u6B21\u8054\u7CFB\u65F6\u95F4",prop:"nextTime",width:"180px"},null,8,["formatter"]),a(t,{align:"center",label:"\u5173\u8054\u8054\u7CFB\u4EBA",prop:"contactIds"}),a(t,{align:"center",label:"\u5173\u8054\u5546\u673A",prop:"businessIds"}),a(t,{formatter:e(v),align:"center",label:"\u521B\u5EFA\u65F6\u95F4",prop:"createTime",width:"180px"},null,8,["formatter"]),a(t,{align:"center",label:"\u64CD\u4F5C"},{default:o(l=>[y((u(),b(m,{link:"",type:"primary",onClick:E=>k("update",l.row.id)},{default:o(()=>[f(" \u7F16\u8F91 ")]),_:2},1032,["onClick"])),[[I,["crm:follow-up-record:update"]]]),y((u(),b(m,{link:"",type:"danger",onClick:E=>(async L=>{try{await g.delConfirm(),await T.deleteFollowUpRecord(L),g.success(P("common.delSuccess")),await s()}catch{}})(l.row.id)},{default:o(()=>[f(" \u5220\u9664 ")]),_:2},1032,["onClick"])),[[I,["crm:follow-up-record:delete"]]])]),_:1})]),_:1},8,["data"])),[[D,e(d)]]),a(S,{limit:e(i).pageSize,"onUpdate:limit":r[1]||(r[1]=l=>e(i).pageSize=l),page:e(i).pageNo,"onUpdate:page":r[2]||(r[2]=l=>e(i).pageNo=l),total:e(w),onPagination:s},null,8,["limit","page","total"])]),_:1}),a(ia,{ref_key:"formRef",ref:z,onSuccess:s},null,512)],64)}}})});export{x as _,ca as __tla};
