import{e as S,d as M,i as x,r as i,o as H,v as V,w as u,f,a as o,h as T,x as R,l as j,C as E,I,__tla as O}from"./index-d2088aec.js";import{_ as A,__tla as D}from"./Dialog.vue_vue_type_style_index_0_lang-4d2024bd.js";import{_ as N,__tla as q}from"./Form-e9fe9dea.js";import{a as z,c as B,u as G,__tla as J}from"./seckillConfig-dda7850d.js";import{d as K,__tla as L}from"./formatTime-c7e0c543.js";import{r as m,__tla as Q}from"./formRules-fb12266a.js";import{D as W,__tla as X}from"./dict-999fbee6.js";import{u as Y,__tla as Z}from"./useCrudSchemas-705f912c.js";import{u as $,__tla as ee}from"./useMessage-c5990e2c.js";let U,d,ae=Promise.all([(()=>{try{return O}catch{}})(),(()=>{try{return D}catch{}})(),(()=>{try{return q}catch{}})(),(()=>{try{return J}catch{}})(),(()=>{try{return L}catch{}})(),(()=>{try{return Q}catch{}})(),(()=>{try{return X}catch{}})(),(()=>{try{return Z}catch{}})(),(()=>{try{return ee}catch{}})()]).then(async()=>{let p,h;p=S({name:[m],startTime:[m],endTime:[m],picUrl:[m],status:[m]}),h=S([{label:"\u79D2\u6740\u65F6\u6BB5\u540D\u79F0",field:"name",isSearch:!0},{label:"\u5F00\u59CB\u65F6\u95F4\u70B9",field:"startTime",isSearch:!1,search:{component:"TimePicker"},form:{component:"TimePicker",componentProps:{valueFormat:"HH:mm:ss"}}},{label:"\u7ED3\u675F\u65F6\u95F4\u70B9",field:"endTime",isSearch:!1,search:{component:"TimePicker"},form:{component:"TimePicker",componentProps:{valueFormat:"HH:mm:ss"}}},{label:"\u79D2\u6740\u8F6E\u64AD\u56FE",field:"sliderPicUrls",isSearch:!1,form:{component:"UploadImgs"},table:{width:300}},{label:"\u72B6\u6001",field:"status",dictType:W.COMMON_STATUS,dictClass:"number",isSearch:!0,form:{component:"Radio"}},{label:"\u521B\u5EFA\u65F6\u95F4",field:"createTime",isForm:!1,isSearch:!1,formatter:K},{label:"\u64CD\u4F5C",field:"action",isForm:!1}]),{allSchemas:d}=Y(h),U=M({__name:"SeckillConfigForm",emits:["success"],setup(te,{expose:k,emit:w}){const{t:_}=x(),y=$(),l=i(!1),v=i(""),r=i(!1),b=i(""),s=i();k({open:async(t,e)=>{var a;if(l.value=!0,v.value=_("action."+t),b.value=t,e){r.value=!0;try{const c=await z(e);c.sliderPicUrls=(a=c.sliderPicUrls)==null?void 0:a.map(n=>({url:n})),s.value.setValues(c)}finally{r.value=!1}}}});const C=w,F=async()=>{if(s&&await s.value.getElFormRef().validate()){r.value=!0;try{const t=[];s.value.formModel.sliderPicUrls.forEach(a=>{typeof a=="object"?t.push(a.url):t.push(a)});const e={...s.value.formModel,sliderPicUrls:t};b.value==="create"?(await B(e),y.success(_("common.createSuccess"))):(await G(e),y.success(_("common.updateSuccess"))),l.value=!1,C("success")}finally{r.value=!1}}};return(t,e)=>{const a=N,c=E,n=A,g=I;return H(),V(n,{modelValue:o(l),"onUpdate:modelValue":e[1]||(e[1]=P=>j(l)?l.value=P:null),title:o(v)},{footer:u(()=>[f(c,{disabled:o(r),type:"primary",onClick:F},{default:u(()=>[T("\u786E \u5B9A")]),_:1},8,["disabled"]),f(c,{onClick:e[0]||(e[0]=P=>l.value=!1)},{default:u(()=>[T("\u53D6 \u6D88")]),_:1})]),default:u(()=>[R(f(a,{ref_key:"formRef",ref:s,rules:o(p),schema:o(d).formSchema},null,8,["rules","schema"]),[[g,o(r)]])]),_:1},8,["modelValue","title"])}}})});export{U as _,ae as __tla,d as a};
