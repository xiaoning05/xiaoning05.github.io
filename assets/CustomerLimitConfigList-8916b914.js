import{d as O,k as z,r as f,n as G,p as P,G as Y,o as _,c as j,b as a,e as n,h as d,w as y,q as p,a as e,a0 as D,F,A as q,B,E as Q,i as X,v as Z,_ as H,__tla as J}from"./index-aaa5adb3.js";import{_ as K,__tla as V}from"./index-b47c179c.js";import{_ as W,__tla as $}from"./DictTag-1c1088ae.js";import{d as tt,__tla as at}from"./formatTime-9c0e8879.js";import{L as N,C as et,g as rt,d as lt,__tla as ot}from"./CustomerLimitConfigForm-13aa72d3.js";import{D as it,__tla as nt}from"./dict-f2796e71.js";import{u as st,__tla as _t}from"./useMessage-873da1e2.js";import{__tla as ct}from"./index-c602062a.js";import"./color-f5b6e279.js";import{__tla as mt}from"./Dialog-9a73a39c.js";import{__tla as pt}from"./el-tree-select-49584d8b.js";import{__tla as ut}from"./index-d1d19999.js";import"./tree-02f455f9.js";import{__tla as ft}from"./index-c1a6a53a.js";let I,dt=Promise.all([(()=>{try{return J}catch{}})(),(()=>{try{return V}catch{}})(),(()=>{try{return $}catch{}})(),(()=>{try{return at}catch{}})(),(()=>{try{return ot}catch{}})(),(()=>{try{return nt}catch{}})(),(()=>{try{return _t}catch{}})(),(()=>{try{return ct}catch{}})(),(()=>{try{return mt}catch{}})(),(()=>{try{return pt}catch{}})(),(()=>{try{return ut}catch{}})(),(()=>{try{return ft}catch{}})()]).then(async()=>{I=H(O({name:"CustomerLimitConfigList",__name:"CustomerLimitConfigList",props:{confType:{type:Number,required:!0}},setup(S){const C=st(),{t:E}=z(),{confType:b}=S,g=f(!0),w=f(0),T=f([]),s=G({pageNo:1,pageSize:10,type:b}),c=async()=>{g.value=!0;try{const o=await rt(s);T.value=o.list,w.value=o.total}finally{g.value=!1}},k=f(),v=(o,r)=>{k.value.open(o,b,r)},U=()=>{s.pageNo=1,c()};return P(()=>{c()}),(o,r)=>{const L=q,u=B,l=Q,x=W,A=X,M=K,h=Y("hasPermi"),R=Z;return _(),j(F,null,[a(u,{plain:"",onClick:U},{default:n(()=>[a(L,{icon:"ep:refresh",class:"mr-5px"}),d(" \u5237\u65B0 ")]),_:1}),y((_(),p(u,{type:"primary",plain:"",onClick:r[0]||(r[0]=t=>v("create"))},{default:n(()=>[a(L,{icon:"ep:plus",class:"mr-5px"}),d(" \u65B0\u589E ")]),_:1})),[[h,["crm:customer-limit-config:create"]]]),y((_(),p(A,{data:e(T),stripe:!0,"show-overflow-tooltip":!0,class:"mt-4"},{default:n(()=>[a(l,{label:"\u7F16\u53F7",align:"center",prop:"id"}),a(l,{label:"\u89C4\u5219\u7C7B\u578B",align:"center",prop:"type"}),a(l,{label:"\u89C4\u5219\u9002\u7528\u4EBA\u7FA4",align:"center",formatter:t=>{var i;return(i=t.users)==null?void 0:i.map(m=>m.nickname).join("\uFF0C")}},null,8,["formatter"]),a(l,{label:"\u89C4\u5219\u9002\u7528\u90E8\u95E8",align:"center",formatter:t=>{var i;return(i=t.depts)==null?void 0:i.map(m=>m.name).join("\uFF0C")}},null,8,["formatter"]),a(l,{label:o.confType===e(N).CUSTOMER_QUANTITY_LIMIT?"\u62E5\u6709\u5BA2\u6237\u6570\u4E0A\u9650":"\u9501\u5B9A\u5BA2\u6237\u6570\u4E0A\u9650",align:"center",prop:"maxCount"},null,8,["label"]),o.confType===e(N).CUSTOMER_QUANTITY_LIMIT?(_(),p(l,{key:0,label:"\u6210\u4EA4\u5BA2\u6237\u662F\u5426\u5360\u7528\u62E5\u6709\u5BA2\u6237\u6570",align:"center",prop:"dealCountEnabled"},{default:n(t=>[a(x,{type:e(it).INFRA_BOOLEAN_STRING,value:t.row.dealCountEnabled},null,8,["type","value"])]),_:1})):D("",!0),a(l,{label:"\u521B\u5EFA\u65F6\u95F4",align:"center",prop:"createTime",formatter:e(tt),width:"180px"},null,8,["formatter"]),a(l,{label:"\u64CD\u4F5C",align:"center","min-width":"110",fixed:"right"},{default:n(t=>[y((_(),p(u,{link:"",type:"primary",onClick:i=>v("update",t.row.id)},{default:n(()=>[d(" \u7F16\u8F91 ")]),_:2},1032,["onClick"])),[[h,["crm:customer-limit-config:update"]]]),y((_(),p(u,{link:"",type:"danger",onClick:i=>(async m=>{try{await C.delConfirm(),await lt(m),C.success(E("common.delSuccess")),await c()}catch{}})(t.row.id)},{default:n(()=>[d(" \u5220\u9664 ")]),_:2},1032,["onClick"])),[[h,["crm:customer-limit-config:delete"]]])]),_:1})]),_:1},8,["data"])),[[R,e(g)]]),a(M,{total:e(w),page:e(s).pageNo,"onUpdate:page":r[1]||(r[1]=t=>e(s).pageNo=t),limit:e(s).pageSize,"onUpdate:limit":r[2]||(r[2]=t=>e(s).pageSize=t),onPagination:c},null,8,["total","page","limit"]),a(et,{ref_key:"formRef",ref:k,onSuccess:c},null,512)],64)}}}),[["__file","E:/newCode/GYZX-UI-ADMIN/src/views/crm/customer/limitConfig/CustomerLimitConfigList.vue"]])});export{dt as __tla,I as default};
