import{d as O,i as T,r as c,e as A,p as B,o,v as m,w as s,f as d,a as e,h as V,x as W,c as h,F as I,q as E,a4 as k,t as j,l as G,y as H,z as J,A as K,ah as Q,ai as X,D as Y,C as Z,I as $,__tla as ee}from"./index-d2088aec.js";import{_ as ae,__tla as le}from"./Dialog.vue_vue_type_style_index_0_lang-4d2024bd.js";import{g as te,__tla as se}from"./index-456c5cde.js";import{P as ue,c as re,u as oe,__tla as de}from"./index-05c907cf.js";import{a as _e,D as ie,__tla as ce}from"./dict-999fbee6.js";import{u as me,__tla as ne}from"./useMessage-c5990e2c.js";let F,ve=Promise.all([(()=>{try{return ee}catch{}})(),(()=>{try{return le}catch{}})(),(()=>{try{return se}catch{}})(),(()=>{try{return de}catch{}})(),(()=>{try{return ce}catch{}})(),(()=>{try{return ne}catch{}})()]).then(async()=>{F=O({name:"CrmPermissionForm",__name:"PermissionForm",emits:["success"],setup(pe,{expose:P,emit:S}){const{t:p}=T(),g=me(),_=c(!1),b=c(""),f=c(!1),n=c(""),w=c([]),t=c({}),U=A({userId:[{required:!0,message:"\u4EBA\u5458\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],level:[{required:!0,message:"\u6743\u9650\u7EA7\u522B\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}]}),y=c();P({open:async(u,l,r,i)=>{_.value=!0,b.value=p("action."+u)+"\u56E2\u961F\u6210\u5458",n.value=u,z(l,r),i&&(t.value.ids=i)},open0:async(u,l,r,i,v)=>{_.value=!0,b.value=p("action."+u)+"\u56E2\u961F\u6210\u5458",n.value=u,z(l,r),t.value.level=v,t.value.ids=[i]}});const x=S,R=async()=>{if(y&&await y.value.validate()){f.value=!0;try{const u=t.value;n.value==="create"?(await re(e(u)),g.success(p("common.createSuccess"))):(await oe(e(u)),g.success(p("common.updateSuccess"))),_.value=!1,x("success")}finally{f.value=!1}}},z=(u,l)=>{var r;(r=y.value)==null||r.resetFields(),t.value={},t.value={...t.value,bizType:u,bizId:l}};return B(async()=>{w.value=await te()}),(u,l)=>{const r=H,i=J,v=K,q=Q,D=X,L=Y,C=Z,M=ae,N=$;return o(),m(M,{modelValue:e(_),"onUpdate:modelValue":l[4]||(l[4]=a=>G(_)?_.value=a:null),title:e(b),width:"30%"},{footer:s(()=>[d(C,{disabled:e(f),type:"primary",onClick:R},{default:s(()=>[V("\u786E \u5B9A")]),_:1},8,["disabled"]),d(C,{onClick:l[3]||(l[3]=a=>_.value=!1)},{default:s(()=>[V("\u53D6 \u6D88")]),_:1})]),default:s(()=>[W((o(),m(L,{ref_key:"formRef",ref:y,model:e(t),rules:e(U),"label-width":"100px"},{default:s(()=>[e(n)==="create"?(o(),m(v,{key:0,label:"\u9009\u62E9\u4EBA\u5458",prop:"userId"},{default:s(()=>[d(i,{modelValue:e(t).userId,"onUpdate:modelValue":l[0]||(l[0]=a=>e(t).userId=a)},{default:s(()=>[(o(!0),h(I,null,E(e(w),a=>(o(),m(r,{key:a.id,label:a.nickname,value:a.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})):k("",!0),d(v,{label:"\u6743\u9650\u7EA7\u522B",prop:"level"},{default:s(()=>[d(D,{modelValue:e(t).level,"onUpdate:modelValue":l[1]||(l[1]=a=>e(t).level=a)},{default:s(()=>[(o(!0),h(I,null,E(e(_e)(e(ie).CRM_PERMISSION_LEVEL),a=>(o(),h(I,{key:a.value},[a.value!=e(ue).OWNER?(o(),m(q,{key:0,label:a.value},{default:s(()=>[V(j(a.label),1)]),_:2},1032,["label"])):k("",!0)],64))),128))]),_:1},8,["modelValue"])]),_:1}),e(n)==="create"?(o(),m(v,{key:1,label:"\u540C\u65F6\u6DFB\u52A0\u81F3",prop:"toBizType"},{default:s(()=>[d(i,{modelValue:e(t).userId,"onUpdate:modelValue":l[2]||(l[2]=a=>e(t).userId=a)},{default:s(()=>[d(r,{value:1,label:"\u8054\u7CFB\u4EBA"}),d(r,{value:1,label:"\u5546\u673A"})]),_:1},8,["modelValue"])]),_:1})):k("",!0)]),_:1},8,["model","rules"])),[[N,e(f)]])]),_:1},8,["modelValue","title"])}}})});export{F as _,ve as __tla};
