import{e as T,d as j,i as A,r as c,o as I,v as O,w as _,f,a as o,h as g,x as V,l as E,D as H,J as U,_ as N,__tla as R}from"./index-f0743f71.js";import{_ as z,__tla as G}from"./Dialog-8f786edd.js";import{_ as J,__tla as X}from"./Form-3e953638.js";import{g as Z,c as q,u as B,__tla as K}from"./index-93f97697.js";import{d as L,__tla as Q}from"./formatTime-e6df2ea5.js";import{b as W,__tla as $}from"./index-313e2bdd.js";import{r as a,__tla as ee}from"./formRules-5c05c0bb.js";import{D as ae,__tla as te}from"./dict-4a9940b3.js";import{u as le,__tla as re}from"./useCrudSchemas-7a260292.js";import{u as se,__tla as oe}from"./useMessage-75a00a06.js";let p,h,D,ie=Promise.all([(()=>{try{return R}catch{}})(),(()=>{try{return G}catch{}})(),(()=>{try{return X}catch{}})(),(()=>{try{return K}catch{}})(),(()=>{try{return Q}catch{}})(),(()=>{try{return $}catch{}})(),(()=>{try{return ee}catch{}})(),(()=>{try{return te}catch{}})(),(()=>{try{return re}catch{}})(),(()=>{try{return oe}catch{}})()]).then(async()=>{let m,y,v;m=await W(),y=T({name:[a],code:[a],accountId:[a],label:[a],content:[a],params:[a],status:[a]}),v=T([{label:"\u6A21\u677F\u7F16\u7801",field:"code",isSearch:!0},{label:"\u6A21\u677F\u540D\u79F0",field:"name",isSearch:!0},{label:"\u6A21\u677F\u6807\u9898",field:"title"},{label:"\u6A21\u677F\u5185\u5BB9",field:"content",form:{component:"Editor",componentProps:{valueHtml:"",height:200}}},{label:"\u90AE\u7BB1\u8D26\u53F7",field:"accountId",width:"200px",formatter:(P,b,u)=>{var t;return(t=m.find(n=>n.id===u))==null?void 0:t.mail},search:{show:!0,component:"Select",api:()=>m,componentProps:{optionsAlias:{labelField:"mail",valueField:"id"}}},form:{component:"Select",api:()=>m,componentProps:{optionsAlias:{labelField:"mail",valueField:"id"}}}},{label:"\u53D1\u9001\u4EBA\u540D\u79F0",field:"nickname"},{label:"\u5F00\u542F\u72B6\u6001",field:"status",isSearch:!0,dictType:ae.COMMON_STATUS,dictClass:"number"},{label:"\u5907\u6CE8",field:"remark",isTable:!1},{label:"\u521B\u5EFA\u65F6\u95F4",field:"createTime",isForm:!1,formatter:L,search:{show:!0,component:"DatePicker",componentProps:{valueFormat:"YYYY-MM-DD HH:mm:ss",type:"daterange",defaultTime:[new Date("1 00:00:00"),new Date("1 23:59:59")]}}},{label:"\u64CD\u4F5C",field:"action",isForm:!1}]),{allSchemas:h}=le(v),p=N(j({name:"SystemMailTemplateForm",__name:"MailTemplateForm",emits:["success"],setup(P,{expose:b,emit:u}){const{t}=A(),n=se(),l=c(!1),w=c(""),r=c(!1),S=c(""),i=c();b({open:async(s,e)=>{if(l.value=!0,w.value=t("action."+s),S.value=s,e){r.value=!0;try{const d=await Z(e);i.value.setValues(d)}finally{r.value=!1}}}});const k=u,x=async()=>{if(i&&await i.value.getElFormRef().validate()){r.value=!0;try{const s=i.value.formModel;S.value==="create"?(await q(s),n.success(t("common.createSuccess"))):(await B(s),n.success(t("common.updateSuccess"))),l.value=!1,k("success")}finally{r.value=!1}}};return(s,e)=>{const d=J,F=H,C=z,Y=U;return I(),O(C,{modelValue:o(l),"onUpdate:modelValue":e[1]||(e[1]=M=>E(l)?l.value=M:null),"max-height":500,scroll:!0,title:o(w),width:800},{footer:_(()=>[f(F,{disabled:o(r),type:"primary",onClick:x},{default:_(()=>[g("\u786E \u5B9A")]),_:1},8,["disabled"]),f(F,{onClick:e[0]||(e[0]=M=>l.value=!1)},{default:_(()=>[g("\u53D6 \u6D88")]),_:1})]),default:_(()=>[V(f(d,{ref_key:"formRef",ref:i,rules:o(y),schema:o(h).formSchema},null,8,["rules","schema"]),[[Y,o(r)]])]),_:1},8,["modelValue","title"])}}}),[["__file","E:/newCode/GYZX-UI-ADMIN/src/views/system/mail/template/MailTemplateForm.vue"]]),D=Object.freeze(Object.defineProperty({__proto__:null,default:p},Symbol.toStringTag,{value:"Module"}))});export{p as M,ie as __tla,h as a,D as b};
