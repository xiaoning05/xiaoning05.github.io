import{d as P,k as T,r as m,n as Z,o as n,q as c,e as l,b as e,a,h as x,w as $,a0 as E,c as S,F as q,g as C,j as z,L as H,y as J,a9 as K,ab as O,s as Q,x as W,C as ee,B as ae,v as le,_ as te,__tla as se}from"./index-b079f499.js";import{_ as ue,__tla as re}from"./Dialog-07bcd661.js";import{E as de,__tla as oe}from"./el-tree-select-6f7a72c0.js";import{a as me,D as ne,__tla as pe}from"./dict-2c56908b.js";import{C as F}from"./constants-99751ef9.js";import{d as _e,h as ie}from"./tree-02f455f9.js";import{g as ce,__tla as fe}from"./index-25ba0b58.js";import{g as ve,__tla as be}from"./index-0fea2d31.js";import{b as ye,c as Ve,u as he,__tla as ge}from"./index-41e17afa.js";import{u as ke,__tla as we}from"./useMessage-66b9cf03.js";let A,Ue=Promise.all([(()=>{try{return se}catch{}})(),(()=>{try{return re}catch{}})(),(()=>{try{return oe}catch{}})(),(()=>{try{return pe}catch{}})(),(()=>{try{return fe}catch{}})(),(()=>{try{return be}catch{}})(),(()=>{try{return ge}catch{}})(),(()=>{try{return we}catch{}})()]).then(async()=>{A=te(P({name:"SystemUserForm",__name:"UserForm",emits:["success"],setup(Ie,{expose:B,emit:L}){const{t:b}=T(),y=ke(),p=m(!1),V=m(""),_=m(!1),h=m(""),u=m({nickname:"",deptId:"",mobile:"",email:"",id:void 0,username:"",password:"",sex:void 0,postIds:[],remark:"",status:F.ENABLE,roleIds:[]}),N=Z({username:[{required:!0,message:"\u7528\u6237\u540D\u79F0\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],nickname:[{required:!0,message:"\u7528\u6237\u6635\u79F0\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],password:[{required:!0,message:"\u7528\u6237\u5BC6\u7801\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],email:[{type:"email",message:"\u8BF7\u8F93\u5165\u6B63\u786E\u7684\u90AE\u7BB1\u5730\u5740",trigger:["blur","change"]}],mobile:[{pattern:/^(?:(?:\+|00)86)?1(?:3[\d]|4[5-79]|5[0-35-9]|6[5-7]|7[0-8]|8[\d]|9[189])\d{8}$/,message:"\u8BF7\u8F93\u5165\u6B63\u786E\u7684\u624B\u673A\u53F7\u7801",trigger:"blur"}]}),v=m(),g=m([]),k=m([]);B({open:async(r,s)=>{if(p.value=!0,V.value=b("action."+r),h.value=r,R(),s){_.value=!0;try{u.value=await ye(s)}finally{_.value=!1}}g.value=ie(await ve()),k.value=await ce()}});const D=L,M=async()=>{if(v&&await v.value.validate()){_.value=!0;try{const r=u.value;h.value==="create"?(await Ve(r),y.success(b("common.createSuccess"))):(await he(r),y.success(b("common.updateSuccess"))),p.value=!1,D("success")}finally{_.value=!1}}},R=()=>{var r;u.value={nickname:"",deptId:"",mobile:"",email:"",id:void 0,username:"",password:"",sex:void 0,postIds:[],remark:"",status:F.ENABLE,roleIds:[]},(r=v.value)==null||r.resetFields()};return(r,s)=>{const i=H,d=J,o=K,X=de,f=O,w=Q,U=W,Y=ee,I=ae,j=ue,G=le;return n(),c(j,{modelValue:a(p),"onUpdate:modelValue":s[10]||(s[10]=t=>z(p)?p.value=t:null),title:a(V)},{footer:l(()=>[e(I,{disabled:a(_),type:"primary",onClick:M},{default:l(()=>[x("\u786E \u5B9A")]),_:1},8,["disabled"]),e(I,{onClick:s[9]||(s[9]=t=>p.value=!1)},{default:l(()=>[x("\u53D6 \u6D88")]),_:1})]),default:l(()=>[$((n(),c(Y,{ref_key:"formRef",ref:v,model:a(u),rules:a(N),"label-width":"80px"},{default:l(()=>[e(f,null,{default:l(()=>[e(o,{span:12},{default:l(()=>[e(d,{label:"\u7528\u6237\u6635\u79F0",prop:"nickname"},{default:l(()=>[e(i,{modelValue:a(u).nickname,"onUpdate:modelValue":s[0]||(s[0]=t=>a(u).nickname=t),placeholder:"\u8BF7\u8F93\u5165\u7528\u6237\u6635\u79F0"},null,8,["modelValue"])]),_:1})]),_:1}),e(o,{span:12},{default:l(()=>[e(d,{label:"\u5F52\u5C5E\u90E8\u95E8",prop:"deptId"},{default:l(()=>[e(X,{modelValue:a(u).deptId,"onUpdate:modelValue":s[1]||(s[1]=t=>a(u).deptId=t),data:a(g),props:a(_e),"check-strictly":"","node-key":"id",placeholder:"\u8BF7\u9009\u62E9\u5F52\u5C5E\u90E8\u95E8"},null,8,["modelValue","data","props"])]),_:1})]),_:1})]),_:1}),e(f,null,{default:l(()=>[e(o,{span:12},{default:l(()=>[e(d,{label:"\u624B\u673A\u53F7\u7801",prop:"mobile"},{default:l(()=>[e(i,{modelValue:a(u).mobile,"onUpdate:modelValue":s[2]||(s[2]=t=>a(u).mobile=t),maxlength:"11",placeholder:"\u8BF7\u8F93\u5165\u624B\u673A\u53F7\u7801"},null,8,["modelValue"])]),_:1})]),_:1}),e(o,{span:12},{default:l(()=>[e(d,{label:"\u90AE\u7BB1",prop:"email"},{default:l(()=>[e(i,{modelValue:a(u).email,"onUpdate:modelValue":s[3]||(s[3]=t=>a(u).email=t),maxlength:"50",placeholder:"\u8BF7\u8F93\u5165\u90AE\u7BB1"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(f,null,{default:l(()=>[e(o,{span:12},{default:l(()=>[a(u).id===void 0?(n(),c(d,{key:0,label:"\u7528\u6237\u540D\u79F0",prop:"username"},{default:l(()=>[e(i,{modelValue:a(u).username,"onUpdate:modelValue":s[4]||(s[4]=t=>a(u).username=t),placeholder:"\u8BF7\u8F93\u5165\u7528\u6237\u540D\u79F0"},null,8,["modelValue"])]),_:1})):E("",!0)]),_:1}),e(o,{span:12},{default:l(()=>[a(u).id===void 0?(n(),c(d,{key:0,label:"\u7528\u6237\u5BC6\u7801",prop:"password"},{default:l(()=>[e(i,{modelValue:a(u).password,"onUpdate:modelValue":s[5]||(s[5]=t=>a(u).password=t),placeholder:"\u8BF7\u8F93\u5165\u7528\u6237\u5BC6\u7801","show-password":"",type:"password"},null,8,["modelValue"])]),_:1})):E("",!0)]),_:1})]),_:1}),e(f,null,{default:l(()=>[e(o,{span:12},{default:l(()=>[e(d,{label:"\u7528\u6237\u6027\u522B"},{default:l(()=>[e(U,{modelValue:a(u).sex,"onUpdate:modelValue":s[6]||(s[6]=t=>a(u).sex=t),placeholder:"\u8BF7\u9009\u62E9"},{default:l(()=>[(n(!0),S(q,null,C(a(me)(a(ne).SYSTEM_USER_SEX),t=>(n(),c(w,{key:t.value,label:t.label,value:t.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1}),e(o,{span:12},{default:l(()=>[e(d,{label:"\u5C97\u4F4D"},{default:l(()=>[e(U,{modelValue:a(u).postIds,"onUpdate:modelValue":s[7]||(s[7]=t=>a(u).postIds=t),multiple:"",placeholder:"\u8BF7\u9009\u62E9"},{default:l(()=>[(n(!0),S(q,null,C(a(k),t=>(n(),c(w,{key:t.id,label:t.name,value:t.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(f,null,{default:l(()=>[e(o,{span:24},{default:l(()=>[e(d,{label:"\u5907\u6CE8"},{default:l(()=>[e(i,{modelValue:a(u).remark,"onUpdate:modelValue":s[8]||(s[8]=t=>a(u).remark=t),placeholder:"\u8BF7\u8F93\u5165\u5185\u5BB9",type:"textarea"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1},8,["model","rules"])),[[G,a(_)]])]),_:1},8,["modelValue","title"])}}}),[["__file","E:/newCode/GYZX-UI-ADMIN/src/views/system/user/UserForm.vue"]])});export{Ue as __tla,A as default};
