import{d as O,k as T,r as i,n as j,p as A,o,q as m,e as t,b as d,a as e,h as V,w as D,c as h,F as k,g as F,$ as I,t as W,j as $,s as G,x as H,y as Z,ae as J,af as K,B as Q,A as X,v as Y,__tla as ee}from"./index-34f06ebd.js";import{_ as ae,__tla as le}from"./Dialog.vue_vue_type_style_index_0_lang-08560286.js";import{g as se,__tla as te}from"./index-cd2bb9f6.js";import{P as ue,c as re,u as oe,__tla as de}from"./index-ad2ad2c3.js";import{a as _e,D as ce,__tla as ie}from"./dict-e142e39a.js";import{u as me,__tla as ne}from"./useMessage-7a5ab7ef.js";let U,ve=Promise.all([(()=>{try{return ee}catch{}})(),(()=>{try{return le}catch{}})(),(()=>{try{return te}catch{}})(),(()=>{try{return de}catch{}})(),(()=>{try{return ie}catch{}})(),(()=>{try{return ne}catch{}})()]).then(async()=>{U=O({name:"CrmPermissionForm",__name:"PermissionForm",emits:["success"],setup(pe,{expose:q,emit:x}){const{t:p}=T(),g=me(),_=i(!1),b=i(""),f=i(!1),n=i(""),w=i([]),s=i({}),E=j({userId:[{required:!0,message:"\u4EBA\u5458\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],level:[{required:!0,message:"\u6743\u9650\u7EA7\u522B\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}]}),y=i();q({open:async(u,l,r,c)=>{_.value=!0,b.value=p("action."+u)+"\u56E2\u961F\u6210\u5458",n.value=u,P(l,r),c&&(s.value.ids=c)},open0:async(u,l,r,c,v)=>{_.value=!0,b.value=p("action."+u)+"\u56E2\u961F\u6210\u5458",n.value=u,P(l,r),s.value.level=v,s.value.ids=[c]}});const R=x,S=async()=>{if(y&&await y.value.validate()){f.value=!0;try{const u=s.value;n.value==="create"?(await re(e(u)),g.success(p("common.createSuccess"))):(await oe(e(u)),g.success(p("common.updateSuccess"))),_.value=!1,R("success")}finally{f.value=!1}}},P=(u,l)=>{var r;(r=y.value)==null||r.resetFields(),s.value={},s.value={...s.value,bizType:u,bizId:l}};return A(async()=>{w.value=await se()}),(u,l)=>{const r=G,c=H,v=Z,z=J,B=K,L=Q,C=X,M=ae,N=Y;return o(),m(M,{modelValue:e(_),"onUpdate:modelValue":l[4]||(l[4]=a=>$(_)?_.value=a:null),title:e(b),width:"30%"},{footer:t(()=>[d(C,{disabled:e(f),type:"primary",onClick:S},{default:t(()=>[V("\u786E \u5B9A")]),_:1},8,["disabled"]),d(C,{onClick:l[3]||(l[3]=a=>_.value=!1)},{default:t(()=>[V("\u53D6 \u6D88")]),_:1})]),default:t(()=>[D((o(),m(L,{ref_key:"formRef",ref:y,model:e(s),rules:e(E),"label-width":"100px"},{default:t(()=>[e(n)==="create"?(o(),m(v,{key:0,label:"\u9009\u62E9\u4EBA\u5458",prop:"userId"},{default:t(()=>[d(c,{modelValue:e(s).userId,"onUpdate:modelValue":l[0]||(l[0]=a=>e(s).userId=a)},{default:t(()=>[(o(!0),h(k,null,F(e(w),a=>(o(),m(r,{key:a.id,label:a.nickname,value:a.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})):I("",!0),d(v,{label:"\u6743\u9650\u7EA7\u522B",prop:"level"},{default:t(()=>[d(B,{modelValue:e(s).level,"onUpdate:modelValue":l[1]||(l[1]=a=>e(s).level=a)},{default:t(()=>[(o(!0),h(k,null,F(e(_e)(e(ce).CRM_PERMISSION_LEVEL),a=>(o(),h(k,{key:a.value},[a.value!=e(ue).OWNER?(o(),m(z,{key:0,label:a.value},{default:t(()=>[V(W(a.label),1)]),_:2},1032,["label"])):I("",!0)],64))),128))]),_:1},8,["modelValue"])]),_:1}),e(n)==="create"?(o(),m(v,{key:1,label:"\u540C\u65F6\u6DFB\u52A0\u81F3",prop:"toBizType"},{default:t(()=>[d(c,{modelValue:e(s).userId,"onUpdate:modelValue":l[2]||(l[2]=a=>e(s).userId=a)},{default:t(()=>[d(r,{value:1,label:"\u8054\u7CFB\u4EBA"}),d(r,{value:1,label:"\u5546\u673A"})]),_:1},8,["modelValue"])]),_:1})):I("",!0)]),_:1},8,["model","rules"])),[[N,e(f)]])]),_:1},8,["modelValue","title"])}}})});export{U as _,ve as __tla};
