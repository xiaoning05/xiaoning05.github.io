import{d as j,i as E,r as m,e as J,a2 as M,o as V,v as g,w as u,f as l,a as t,h as p,x as q,l as b,Q as N,A as Q,c0 as R,ai as S,aj as X,G as Y,D as Z,J as z,_ as B,__tla as H}from"./index-f0743f71.js";import{_ as K,__tla as L}from"./Dialog-8f786edd.js";import{g as O,b as W,__tla as $}from"./index-c25cc379.js";import{u as ee,__tla as ae}from"./useMessage-75a00a06.js";let P,le=Promise.all([(()=>{try{return H}catch{}})(),(()=>{try{return L}catch{}})(),(()=>{try{return $}catch{}})(),(()=>{try{return ae}catch{}})()]).then(async()=>{P=B(j({name:"UpdatePointForm",__name:"UserPointUpdateForm",emits:["success"],setup(te,{expose:U,emit:w}){const{t:x}=E(),_=ee(),n=m(!1),s=m(!1),e=m({id:void 0,nickname:void 0,point:0,changePoint:0,changeType:1}),k=J({changePoint:[{required:!0,message:"\u53D8\u52A8\u79EF\u5206\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}]}),r=m();U({open:async d=>{if(n.value=!0,C(),d){s.value=!0;try{e.value=await O(d),e.value.changeType=1,e.value.changePoint=0}finally{s.value=!1}}}});const T=w,F=async()=>{if(r&&await r.value.validate())if(e.value.changePoint<1)_.error("\u53D8\u52A8\u79EF\u5206\u4E0D\u80FD\u5C0F\u4E8E 1");else if(c.value<0)_.error("\u53D8\u52A8\u540E\u7684\u79EF\u5206\u4E0D\u80FD\u5C0F\u4E8E 0");else{s.value=!0;try{await W({id:e.value.id,point:e.value.changePoint*e.value.changeType}),_.success(x("common.updateSuccess")),n.value=!1,T("success")}finally{s.value=!1}}},C=()=>{var d;e.value={id:void 0,nickname:void 0,levelId:void 0,reason:void 0},(d=r.value)==null||d.resetFields()},c=M(()=>e.value.point+e.value.changePoint*e.value.changeType);return(d,a)=>{const f=N,i=Q,v=R,h=S,I=X,A=Y,y=Z,D=K,G=z;return V(),g(D,{title:"\u4FEE\u6539\u7528\u6237\u79EF\u5206",modelValue:t(n),"onUpdate:modelValue":a[7]||(a[7]=o=>b(n)?n.value=o:null),width:"600"},{footer:u(()=>[l(y,{onClick:F,type:"primary",disabled:t(s)},{default:u(()=>[p("\u786E \u5B9A")]),_:1},8,["disabled"]),l(y,{onClick:a[6]||(a[6]=o=>n.value=!1)},{default:u(()=>[p("\u53D6 \u6D88")]),_:1})]),default:u(()=>[q((V(),g(A,{ref_key:"formRef",ref:r,model:t(e),rules:t(k),"label-width":"100px"},{default:u(()=>[l(i,{label:"\u7528\u6237\u7F16\u53F7",prop:"id"},{default:u(()=>[l(f,{modelValue:t(e).id,"onUpdate:modelValue":a[0]||(a[0]=o=>t(e).id=o),class:"!w-240px",disabled:""},null,8,["modelValue"])]),_:1}),l(i,{label:"\u7528\u6237\u6635\u79F0",prop:"nickname"},{default:u(()=>[l(f,{modelValue:t(e).nickname,"onUpdate:modelValue":a[1]||(a[1]=o=>t(e).nickname=o),class:"!w-240px",disabled:""},null,8,["modelValue"])]),_:1}),l(i,{label:"\u53D8\u52A8\u524D\u79EF\u5206",prop:"point"},{default:u(()=>[l(v,{modelValue:t(e).point,"onUpdate:modelValue":a[2]||(a[2]=o=>t(e).point=o),class:"!w-240px",disabled:""},null,8,["modelValue"])]),_:1}),l(i,{label:"\u53D8\u52A8\u7C7B\u578B",prop:"changeType"},{default:u(()=>[l(I,{modelValue:t(e).changeType,"onUpdate:modelValue":a[3]||(a[3]=o=>t(e).changeType=o)},{default:u(()=>[l(h,{label:1},{default:u(()=>[p("\u589E\u52A0")]),_:1}),l(h,{label:-1},{default:u(()=>[p("\u51CF\u5C11")]),_:1})]),_:1},8,["modelValue"])]),_:1}),l(i,{label:"\u53D8\u52A8\u79EF\u5206",prop:"changePoint"},{default:u(()=>[l(v,{modelValue:t(e).changePoint,"onUpdate:modelValue":a[4]||(a[4]=o=>t(e).changePoint=o),class:"!w-240px",min:0,precision:0},null,8,["modelValue"])]),_:1}),l(i,{label:"\u53D8\u52A8\u540E\u79EF\u5206"},{default:u(()=>[l(v,{modelValue:t(c),"onUpdate:modelValue":a[5]||(a[5]=o=>b(c)?c.value=o:null),class:"!w-240px",disabled:""},null,8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])),[[G,t(s)]])]),_:1},8,["modelValue"])}}}),[["__file","E:/newCode/GYZX-UI-ADMIN/src/views/member/user/UserPointUpdateForm.vue"]])});export{le as __tla,P as default};
