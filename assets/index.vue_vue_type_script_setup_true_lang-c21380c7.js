import{d as D,i as E,r as _,e as G,aS as H,K,o as u,c as M,f as a,w as o,h as f,x as y,v as b,a as e,F as W,_ as Y,C as q,k as A,G as B,H as J,I as Q,__tla as V}from"./index-d2088aec.js";import{_ as X,__tla as Z}from"./ContentWrap.vue_vue_type_script_setup_true_lang-3fd6aef1.js";import{_ as $,__tla as aa}from"./index.vue_vue_type_script_setup_true_lang-6baf9e60.js";import{_ as ea,__tla as ta}from"./DictTag.vue_vue_type_script_lang-754cee6f.js";import{d as I,__tla as la}from"./formatTime-c7e0c543.js";import{D as ra,__tla as oa}from"./dict-999fbee6.js";import{_ as ia,F as x,__tla as na}from"./FollowUpRecordForm.vue_vue_type_script_setup_true_lang-8c11d64b.js";import{u as sa,__tla as pa}from"./useMessage-c5990e2c.js";let C,ca=Promise.all([(()=>{try{return V}catch{}})(),(()=>{try{return Z}catch{}})(),(()=>{try{return aa}catch{}})(),(()=>{try{return ta}catch{}})(),(()=>{try{return la}catch{}})(),(()=>{try{return oa}catch{}})(),(()=>{try{return na}catch{}})(),(()=>{try{return pa}catch{}})()]).then(async()=>{C=D({name:"FollowUpRecord",__name:"index",props:{bizType:{},bizId:{}},setup(T){const n=T,g=sa(),{t:F}=E(),d=_(!0),w=_([]),h=_(0),i=G({pageNo:1,pageSize:10,bizType:0,bizId:0}),p=async()=>{d.value=!0;try{const s=await x.getFollowUpRecordPage(i);w.value=s.list,h.value=s.total}finally{d.value=!1}},z=_(),k=(s,r)=>{var c;(c=z.value)==null||c.open(n.bizType,n.bizId,s,r)};return H(()=>n.bizId,()=>{i.bizType=n.bizType,i.bizId=n.bizId,p()}),(s,r)=>{const c=Y,m=q,R=A,t=B,P=ea,S=J,U=$,N=X,v=K("hasPermi"),L=Q;return u(),M(W,null,[a(R,{class:"mb-10px",justify:"end"},{default:o(()=>[a(m,{onClick:r[0]||(r[0]=l=>k("create"))},{default:o(()=>[a(c,{class:"mr-5px",icon:"ep:edit"}),f(" \u5199\u8DDF\u8FDB ")]),_:1})]),_:1}),a(N,null,{default:o(()=>[y((u(),b(S,{data:e(w),"show-overflow-tooltip":!0,stripe:!0},{default:o(()=>[a(t,{align:"center",label:"\u7F16\u53F7",prop:"id"}),a(t,{align:"center",label:"\u8DDF\u8FDB\u4EBA",prop:"creatorName"}),a(t,{align:"center",label:"\u8DDF\u8FDB\u7C7B\u578B",prop:"type"},{default:o(l=>[a(P,{type:e(ra).CRM_FOLLOW_UP_TYPE,value:l.row.type},null,8,["type","value"])]),_:1}),a(t,{align:"center",label:"\u8DDF\u8FDB\u5185\u5BB9",prop:"content"}),a(t,{formatter:e(I),align:"center",label:"\u4E0B\u6B21\u8054\u7CFB\u65F6\u95F4",prop:"nextTime",width:"180px"},null,8,["formatter"]),a(t,{align:"center",label:"\u5173\u8054\u8054\u7CFB\u4EBA",prop:"contactIds"}),a(t,{align:"center",label:"\u5173\u8054\u5546\u673A",prop:"businessIds"}),a(t,{formatter:e(I),align:"center",label:"\u521B\u5EFA\u65F6\u95F4",prop:"createTime",width:"180px"},null,8,["formatter"]),a(t,{align:"center",label:"\u64CD\u4F5C"},{default:o(l=>[y((u(),b(m,{link:"",type:"primary",onClick:O=>k("update",l.row.id)},{default:o(()=>[f(" \u7F16\u8F91 ")]),_:2},1032,["onClick"])),[[v,["crm:follow-up-record:update"]]]),y((u(),b(m,{link:"",type:"danger",onClick:O=>(async j=>{try{await g.delConfirm(),await x.deleteFollowUpRecord(j),g.success(F("common.delSuccess")),await p()}catch{}})(l.row.id)},{default:o(()=>[f(" \u5220\u9664 ")]),_:2},1032,["onClick"])),[[v,["crm:follow-up-record:delete"]]])]),_:1})]),_:1},8,["data"])),[[L,e(d)]]),a(U,{limit:e(i).pageSize,"onUpdate:limit":r[1]||(r[1]=l=>e(i).pageSize=l),page:e(i).pageNo,"onUpdate:page":r[2]||(r[2]=l=>e(i).pageNo=l),total:e(h),onPagination:p},null,8,["limit","page","total"])]),_:1}),a(ia,{ref_key:"formRef",ref:z,onSuccess:p},null,512)],64)}}})});export{C as _,ca as __tla};
