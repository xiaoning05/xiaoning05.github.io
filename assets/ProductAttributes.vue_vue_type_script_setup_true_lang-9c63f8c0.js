import{d as J,ag as N,r as v,a1 as O,aS as Q,o as y,c as D,q as L,a as m,F as P,v as g,w as c,g as V,f as n,h as _,t as j,x as z,a3 as B,l as R,L as T,P as W,i as X,ak as Y,C as Z,c4 as k,j as aa,__tla as la}from"./index-d5b00dc9.js";import{E as sa,__tla as ea}from"./el-text-3f839333.js";import{c as ta,__tla as ua}from"./property-86ad6a7a.js";import{u as oa,__tla as ra}from"./useMessage-2288a5f2.js";let K,ca=Promise.all([(()=>{try{return la}catch{}})(),(()=>{try{return ea}catch{}})(),(()=>{try{return ua}catch{}})(),(()=>{try{return ra}catch{}})()]).then(async()=>{K=J({name:"ProductAttributes",__name:"ProductAttributes",props:{propertyList:{type:Array,default:()=>{}},isDetail:N.bool.def(!1)},emits:["success"],setup(f,{emit:S}){const{t:q}=X(),x=oa(),e=v(""),d=v(null),C=O(()=>a=>d.value!==null&&(d.value===a||void 0)),b=v([]),E=a=>{a!=null&&(b.value.some(o=>{var t,i;return((t=o.input)==null?void 0:t.attributes.id)===((i=a.input)==null?void 0:i.attributes.id)})||b.value.push(a))},u=v([]),F=f;Q(()=>F.propertyList,a=>{a&&(u.value=a)},{deep:!0,immediate:!0});const I=S,w=async(a,o)=>{if(e.value)try{const t=await ta({propertyId:o,name:e.value});u.value[a].values.push({id:t,name:e.value}),x.success(q("common.createSuccess")),I("success",u.value)}catch{x.error("\u6DFB\u52A0\u5931\u8D25\uFF0C\u8BF7\u91CD\u8BD5")}d.value=null,e.value=""};return(a,o)=>{const t=sa,i=Y,M=Z,U=k,$=aa;return y(!0),D(P,null,L(m(u),(p,l)=>(y(),g($,{key:l},{default:c(()=>[V("div",null,[n(t,{class:"mx-1"},{default:c(()=>[_("\u5C5E\u6027\u540D\uFF1A")]),_:1}),n(i,{class:"mx-1",closable:!f.isDetail,type:"success",onClose:s=>(r=>{var h;(h=u.value)==null||h.splice(r,1)})(l)},{default:c(()=>[_(j(p.name),1)]),_:2},1032,["closable","onClose"])]),V("div",null,[n(t,{class:"mx-1"},{default:c(()=>[_("\u5C5E\u6027\u503C\uFF1A")]),_:1}),(y(!0),D(P,null,L(p.values,(s,r)=>(y(),g(i,{key:s.id,class:"mx-1",closable:!f.isDetail,onClose:h=>((G,H)=>{var A;(A=u.value[G].values)==null||A.splice(H,1)})(l,r)},{default:c(()=>[_(j(s.name),1)]),_:2},1032,["closable","onClose"]))),128)),z(n(m(W),{id:`input${l}`,ref_for:!0,ref:E,modelValue:m(e),"onUpdate:modelValue":o[0]||(o[0]=s=>R(e)?e.value=s:null),class:"!w-20",size:"small",onBlur:s=>w(l,p.id),onKeyup:T(s=>w(l,p.id),["enter"])},null,8,["id","modelValue","onBlur","onKeyup"]),[[B,m(C)(l)]]),z(n(M,{class:"button-new-tag ml-1",size:"small",onClick:s=>(async r=>{d.value=r,b.value[r].focus()})(l)},{default:c(()=>[_(" + \u6DFB\u52A0 ")]),_:2},1032,["onClick"]),[[B,!m(C)(l)]])]),n(U,{class:"my-10px"})]),_:2},1024))),128)}}})});export{K as _,ca as __tla};
