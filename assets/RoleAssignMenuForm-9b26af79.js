import{d as B,k as D,r as d,n as G,o as x,q as C,e as l,b as t,a as u,h as m,w as W,t as b,j as h,ai as X,y as L,W as P,dU as Y,C as Z,B as z,v as J,_ as O,__tla as Q}from"./index-aaa5adb3.js";import{_ as T,__tla as $}from"./Dialog-9a73a39c.js";import{d as ee,h as ae}from"./tree-02f455f9.js";import{g as le,__tla as te}from"./index-ed1aa8d7.js";import{g as se,a as ue,__tla as oe}from"./index-0279e74c.js";import{u as de,__tla as ne}from"./useMessage-873da1e2.js";import{E as re,__tla as ce}from"./index-5b7dcbf1.js";let w,ie=Promise.all([(()=>{try{return Q}catch{}})(),(()=>{try{return $}catch{}})(),(()=>{try{return te}catch{}})(),(()=>{try{return oe}catch{}})(),(()=>{try{return ne}catch{}})(),(()=>{try{return ce}catch{}})()]).then(async()=>{w=O(B({name:"SystemRoleAssignMenuForm",__name:"RoleAssignMenuForm",emits:["success"],setup(me,{expose:I,emit:V}){const{t:R}=D(),M=de(),n=d(!1),r=d(!1),s=G({id:0,name:"",code:"",menuIds:[]}),f=d(),p=d([]),c=d(!1),o=d(),_=d(!1);I({open:async a=>{n.value=!0,F(),p.value=ae(await le()),s.id=a.id,s.name=a.name,s.code=a.code,r.value=!0;try{s.value.menuIds=await se(a.id),s.value.menuIds.forEach(e=>{o.value.setChecked(e,!0,!1)})}finally{r.value=!1}}});const U=V,A=async()=>{if(f&&await f.value.validate()){r.value=!0;try{const a={roleId:s.id,menuIds:[...o.value.getCheckedKeys(!1),...o.value.getHalfCheckedKeys()]};await ue(a),M.success(R("common.updateSuccess")),n.value=!1,U("success")}finally{r.value=!1}}},F=()=>{var a,e;_.value=!1,c.value=!1,s.value={id:0,name:"",code:"",menuIds:[]},(a=o.value)==null||a.setCheckedNodes([]),(e=f.value)==null||e.resetFields()},E=()=>{o.value.setCheckedNodes(_.value?p.value:[])},N=()=>{var e;const a=(e=o.value)==null?void 0:e.store.nodesMap;for(let v in a)a[v].expanded!==c.value&&(a[v].expanded=c.value)};return(a,e)=>{const v=X,y=L,k=P,j=Y,H=re,K=Z,g=z,S=T,q=J;return x(),C(S,{modelValue:u(n),"onUpdate:modelValue":e[3]||(e[3]=i=>h(n)?n.value=i:null),title:"\u83DC\u5355\u6743\u9650"},{footer:l(()=>[t(g,{disabled:u(r),type:"primary",onClick:A},{default:l(()=>[m("\u786E \u5B9A")]),_:1},8,["disabled"]),t(g,{onClick:e[2]||(e[2]=i=>n.value=!1)},{default:l(()=>[m("\u53D6 \u6D88")]),_:1})]),default:l(()=>[W((x(),C(K,{ref_key:"formRef",ref:f,model:u(s),"label-width":"80px"},{default:l(()=>[t(y,{label:"\u89D2\u8272\u540D\u79F0"},{default:l(()=>[t(v,null,{default:l(()=>[m(b(u(s).name),1)]),_:1})]),_:1}),t(y,{label:"\u89D2\u8272\u6807\u8BC6"},{default:l(()=>[t(v,null,{default:l(()=>[m(b(u(s).code),1)]),_:1})]),_:1}),t(y,{label:"\u83DC\u5355\u6743\u9650"},{default:l(()=>[t(H,{class:"cardHeight"},{header:l(()=>[m(" \u5168\u9009/\u5168\u4E0D\u9009: "),t(k,{modelValue:u(_),"onUpdate:modelValue":e[0]||(e[0]=i=>h(_)?_.value=i:null),"active-text":"\u662F","inactive-text":"\u5426","inline-prompt":"",onChange:E},null,8,["modelValue"]),m(" \u5168\u90E8\u5C55\u5F00/\u6298\u53E0: "),t(k,{modelValue:u(c),"onUpdate:modelValue":e[1]||(e[1]=i=>h(c)?c.value=i:null),"active-text":"\u5C55\u5F00","inactive-text":"\u6298\u53E0","inline-prompt":"",onChange:N},null,8,["modelValue"])]),default:l(()=>[t(j,{ref_key:"treeRef",ref:o,data:u(p),props:u(ee),"empty-text":"\u52A0\u8F7D\u4E2D\uFF0C\u8BF7\u7A0D\u5019","node-key":"id","show-checkbox":""},null,8,["data","props"])]),_:1})]),_:1})]),_:1},8,["model"])),[[q,u(r)]])]),_:1},8,["modelValue"])}}}),[["__scopeId","data-v-4316139b"],["__file","E:/newCode/GYZX-UI-ADMIN/src/views/system/role/RoleAssignMenuForm.vue"]])});export{ie as __tla,w as default};
