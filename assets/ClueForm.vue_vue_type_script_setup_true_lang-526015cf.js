import{d as S,k as z,r as m,n as A,o as c,q as v,e as d,b as t,a as e,h as U,w as B,c as E,F as K,g as $,$ as D,j as G,dT as H,dU as M,K as P,y as Z,z as J,s as O,x as Q,B as W,A as X,v as Y,__tla as ee}from"./index-34f06ebd.js";import{_ as ae,__tla as le}from"./Dialog.vue_vue_type_style_index_0_lang-08560286.js";import{a as oe,c as te,u as de,__tla as re}from"./index-a3eae748.js";import{g as se,__tla as ue}from"./index-cd2bb9f6.js";import{u as me,__tla as ne}from"./useMessage-7a5ab7ef.js";let w,ie=Promise.all([(()=>{try{return ee}catch{}})(),(()=>{try{return le}catch{}})(),(()=>{try{return re}catch{}})(),(()=>{try{return ue}catch{}})(),(()=>{try{return ne}catch{}})()]).then(async()=>{w=S({__name:"ClueForm",emits:["success"],setup(ce,{expose:k,emit:x}){const{t:f}=z(),V=me(),n=m(!1),b=m(""),i=m(!1),p=m(""),h=m([]),o=m({id:void 0,name:void 0,contactNextTime:void 0,telephone:void 0,mobile:void 0,address:void 0,ownerUserId:void 0,contactLastTime:void 0,remark:void 0}),g=A({name:[{required:!0,message:"\u7EBF\u7D22\u540D\u79F0\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],ownerUserId:[{required:!0,message:"\u8D1F\u8D23\u4EBA\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}]}),_=m();k({open:async(r,a)=>{if(n.value=!0,b.value=f("action."+r),p.value=r,N(),a){i.value=!0;try{o.value=await oe(a)}finally{i.value=!1}}if(h.value=await se(),p.value==="create"){const{wsCache:u}=H(),s=u.get(M.USER).user;o.value.ownerUserId=s.id}}});const I=x,T=async()=>{if(_&&await _.value.validate()){i.value=!0;try{const r=o.value;p.value==="create"?(await te(r),V.success(f("common.createSuccess"))):(await de(r),V.success(f("common.updateSuccess"))),n.value=!1,I("success")}finally{i.value=!1}}},N=()=>{var r;o.value={id:void 0,name:void 0,contactNextTime:void 0,telephone:void 0,mobile:void 0,address:void 0,ownerUserId:void 0,contactLastTime:void 0,remark:void 0},(r=_.value)==null||r.resetFields()};return(r,a)=>{const u=P,s=Z,C=J,q=O,F=Q,j=W,y=X,L=ae,R=Y;return c(),v(L,{title:e(b),modelValue:e(n),"onUpdate:modelValue":a[8]||(a[8]=l=>G(n)?n.value=l:null)},{footer:d(()=>[t(y,{onClick:T,type:"primary",disabled:e(i)},{default:d(()=>[U("\u786E \u5B9A")]),_:1},8,["disabled"]),t(y,{onClick:a[7]||(a[7]=l=>n.value=!1)},{default:d(()=>[U("\u53D6 \u6D88")]),_:1})]),default:d(()=>[B((c(),v(j,{ref_key:"formRef",ref:_,model:e(o),rules:e(g),"label-width":"100px"},{default:d(()=>[t(s,{label:"\u7EBF\u7D22\u540D\u79F0",prop:"name"},{default:d(()=>[t(u,{modelValue:e(o).name,"onUpdate:modelValue":a[0]||(a[0]=l=>e(o).name=l),placeholder:"\u8BF7\u8F93\u5165\u7EBF\u7D22\u540D\u79F0"},null,8,["modelValue"])]),_:1}),t(s,{label:"\u4E0B\u6B21\u8054\u7CFB\u65F6\u95F4",prop:"contactNextTime"},{default:d(()=>[t(C,{modelValue:e(o).contactNextTime,"onUpdate:modelValue":a[1]||(a[1]=l=>e(o).contactNextTime=l),type:"date","value-format":"x",placeholder:"\u9009\u62E9\u4E0B\u6B21\u8054\u7CFB\u65F6\u95F4"},null,8,["modelValue"])]),_:1}),t(s,{label:"\u7535\u8BDD",prop:"telephone"},{default:d(()=>[t(u,{modelValue:e(o).telephone,"onUpdate:modelValue":a[2]||(a[2]=l=>e(o).telephone=l),placeholder:"\u8BF7\u8F93\u5165\u7535\u8BDD"},null,8,["modelValue"])]),_:1}),t(s,{label:"\u624B\u673A\u53F7",prop:"mobile"},{default:d(()=>[t(u,{modelValue:e(o).mobile,"onUpdate:modelValue":a[3]||(a[3]=l=>e(o).mobile=l),placeholder:"\u8BF7\u8F93\u5165\u624B\u673A\u53F7"},null,8,["modelValue"])]),_:1}),t(s,{label:"\u5730\u5740",prop:"address"},{default:d(()=>[t(u,{modelValue:e(o).address,"onUpdate:modelValue":a[4]||(a[4]=l=>e(o).address=l),placeholder:"\u8BF7\u8F93\u5165\u5730\u5740"},null,8,["modelValue"])]),_:1}),e(p)==="create"?(c(),v(s,{key:0,label:"\u8D1F\u8D23\u4EBA",prop:"userIds",span:"24"},{default:d(()=>[t(F,{modelValue:e(o).ownerUserId,"onUpdate:modelValue":a[5]||(a[5]=l=>e(o).ownerUserId=l)},{default:d(()=>[(c(!0),E(K,null,$(e(h),l=>(c(),v(q,{key:l.id,label:l.nickname,value:l.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})):D("",!0),t(s,{label:"\u5907\u6CE8",prop:"remark"},{default:d(()=>[t(u,{modelValue:e(o).remark,"onUpdate:modelValue":a[6]||(a[6]=l=>e(o).remark=l),placeholder:"\u8BF7\u8F93\u5165\u5907\u6CE8"},null,8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])),[[R,e(i)]])]),_:1},8,["title","modelValue"])}}})});export{w as _,ie as __tla};
