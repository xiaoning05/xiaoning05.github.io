import{d as M,ae as t,cp as j,r as A,cq as F,o as s,c as l,b as r,e as N,a as i,N as W,f as p,aI as T,bh as G,F as L,t as _,a0 as n,aQ as P,k as Q,A as R,_ as X,__tla as Y}from"./index-b079f499.js";import{c as Z,__tla as H}from"./index-1bcef585.js";import{u as J,__tla as K}from"./useUpload-ca092158.js";import{u as O,__tla as ee}from"./useMessage-66b9cf03.js";let V,ae=Promise.all([(()=>{try{return Y}catch{}})(),(()=>{try{return H}catch{}})(),(()=>{try{return K}catch{}})(),(()=>{try{return ee}catch{}})()]).then(async()=>{let h,f,g,y,b,v,k;h={class:"upload-box"},f=["src"],g={key:0},y={key:0},b={key:0},v={key:1,class:"upload-empty"},k={class:"el-upload__tip"},V=X(M({name:"UploadImg",__name:"UploadImg",props:{modelValue:t.string.def(""),drag:t.bool.def(!0),disabled:t.bool.def(!1),fileSize:t.number.def(5),fileType:t.array.def(["image/jpeg","image/png","image/gif"]),height:t.string.def("150px"),width:t.string.def("150px"),borderradius:t.string.def("8px"),showDelete:t.bool.def(!0),showBtnText:t.bool.def(!0)},emits:["update:modelValue"],setup(e,{emit:z}){j(a=>({"57417a1d-width":e.width,"57417a1d-height":e.height,"57417a1d-borderradius":e.borderradius}));const u=e,{t:m}=Q(),c=O(),w=A("id-"+F()),x=z,C=()=>{x("update:modelValue","")},{uploadUrl:U,httpRequest:q}=J(),B=()=>{const a=document.querySelector(`#${w.value} .el-upload__input`);a&&a.dispatchEvent(new MouseEvent("click"))},E=a=>{const o=a.size/1024/1024<u.fileSize,d=u.fileType;return d.includes(a.type)||c.notifyWarning("\u4E0A\u4F20\u56FE\u7247\u4E0D\u7B26\u5408\u6240\u9700\u7684\u683C\u5F0F\uFF01"),o||c.notifyWarning(`\u4E0A\u4F20\u56FE\u7247\u5927\u5C0F\u4E0D\u80FD\u8D85\u8FC7 ${u.fileSize}M\uFF01`),d.includes(a.type)&&o},S=a=>{c.success("\u4E0A\u4F20\u6210\u529F"),x("update:modelValue",a.data)},$=()=>{c.notifyError("\u56FE\u7247\u4E0A\u4F20\u5931\u8D25\uFF0C\u8BF7\u60A8\u91CD\u65B0\u4E0A\u4F20\uFF01")};return(a,o)=>{const d=R,D=G;return s(),l("div",h,[r(D,{id:i(w),accept:e.fileType.join(","),action:i(U),"before-upload":E,class:W(["upload",e.drag?"no-border":""]),drag:e.drag,multiple:!1,"on-error":$,"on-success":S,"show-file-list":!1,"http-request":i(q)},{default:N(()=>[e.modelValue?(s(),l(L,{key:0},[p("img",{src:e.modelValue,class:"upload-image"},null,8,f),p("div",{class:"upload-handle",onClick:o[1]||(o[1]=P(()=>{},["stop"]))},[e.disabled?n("",!0):(s(),l("div",{key:0,class:"handle-icon",onClick:B},[r(d,{icon:"ep:edit"}),e.showBtnText?(s(),l("span",g,_(i(m)("action.edit")),1)):n("",!0)])),p("div",{class:"handle-icon",onClick:o[0]||(o[0]=te=>{return I=e.modelValue,void Z({zIndex:9999999,urlList:[I]});var I})},[r(d,{icon:"ep:zoom-in"}),e.showBtnText?(s(),l("span",y,_(i(m)("action.detail")),1)):n("",!0)]),e.showDelete&&!e.disabled?(s(),l("div",{key:1,class:"handle-icon",onClick:C},[r(d,{icon:"ep:delete"}),e.showBtnText?(s(),l("span",b,_(i(m)("action.del")),1)):n("",!0)])):n("",!0)])],64)):(s(),l("div",v,[T(a.$slots,"empty",{},()=>[r(d,{icon:"ep:plus"})],!0)]))]),_:3},8,["id","accept","action","class","drag","http-request"]),p("div",k,[T(a.$slots,"tip",{},void 0,!0)])])}}}),[["__scopeId","data-v-57417a1d"],["__file","E:/newCode/GYZX-UI-ADMIN/src/components/UploadFile/src/UploadImg.vue"]])});export{V as _,ae as __tla};
