import{d as A,r as n,n as D,u as E,aQ as M,o as y,c as L,b as a,e as o,h as g,w as P,q as j,a as t,t as q,F as B,_ as F,A as O,aa as H,E as Q,i as G,v as J,__tla as K}from"./index-34f06ebd.js";import{_ as V,__tla as W}from"./ContentWrap.vue_vue_type_script_setup_true_lang-80915c85.js";import{_ as X,__tla as Y}from"./index.vue_vue_type_script_setup_true_lang-68fe248c.js";import{_ as Z,__tla as $}from"./DictTag.vue_vue_type_script_lang-942df0b2.js";import{E as aa,__tla as ta}from"./el-link-6a9ddb0c.js";import{b as ra,__tla as ea}from"./index-e159fffb.js";import{_ as la,__tla as oa}from"./ContractForm.vue_vue_type_script_setup_true_lang-e3adda46.js";import{B as _a,__tla as sa}from"./index-ad2ad2c3.js";import{f as ia,__tla as na}from"./formatter-20c10600.js";import{d as h,__tla as pa}from"./formatTime-ed0a77fd.js";import{D as ca,__tla as ma}from"./dict-e142e39a.js";let b,ua=Promise.all([(()=>{try{return K}catch{}})(),(()=>{try{return W}catch{}})(),(()=>{try{return Y}catch{}})(),(()=>{try{return $}catch{}})(),(()=>{try{return ta}catch{}})(),(()=>{try{return ea}catch{}})(),(()=>{try{return oa}catch{}})(),(()=>{try{return sa}catch{}})(),(()=>{try{return na}catch{}})(),(()=>{try{return pa}catch{}})(),(()=>{try{return ma}catch{}})()]).then(async()=>{b=A({name:"CrmContractList",__name:"ContractList",props:{bizType:{},bizId:{}},setup(v){const _=v,p=n(!0),m=n(0),u=n([]),r=D({pageNo:1,pageSize:10,customerId:void 0}),c=async()=>{p.value=!0;try{r.customerId=void 0;let s={list:[],total:0};if(_.bizType!==_a.CRM_CUSTOMER)return;r.customerId=_.bizId,s=await ra(r),u.value=s.list,m.value=s.total}finally{p.value=!1}},f=n(),C=()=>{f.value.open("create")},{push:z}=E();return M(()=>[_.bizId,_.bizType],()=>{r.pageNo=1,c()},{immediate:!0,deep:!0}),(s,i)=>{const w=F,S=O,T=H,I=aa,l=Q,U=Z,x=G,N=X,k=V,R=J;return y(),L(B,null,[a(T,{justify:"end"},{default:o(()=>[a(S,{onClick:C},{default:o(()=>[a(w,{class:"mr-5px",icon:"clarity:contract-line"}),g(" \u521B\u5EFA\u5408\u540C ")]),_:1})]),_:1}),a(k,{class:"mt-10px"},{default:o(()=>[P((y(),j(x,{data:t(u),stripe:!0,"show-overflow-tooltip":!0},{default:o(()=>[a(l,{label:"\u5408\u540C\u540D\u79F0",fixed:"left",align:"center",prop:"name"},{default:o(e=>[a(I,{type:"primary",underline:!1,onClick:fa=>{return d=e.row.id,void z({name:"CrmContractDetail",params:{id:d}});var d}},{default:o(()=>[g(q(e.row.name),1)]),_:2},1032,["onClick"])]),_:1}),a(l,{label:"\u5408\u540C\u7F16\u53F7",align:"center",prop:"no"}),a(l,{label:"\u5BA2\u6237\u540D\u79F0",align:"center",prop:"customerName"}),a(l,{label:"\u5408\u540C\u91D1\u989D\uFF08\u5143\uFF09",align:"center",prop:"price",formatter:t(ia)},null,8,["formatter"]),a(l,{label:"\u5F00\u59CB\u65F6\u95F4",align:"center",prop:"startTime",formatter:t(h),width:"180px"},null,8,["formatter"]),a(l,{label:"\u7ED3\u675F\u65F6\u95F4",align:"center",prop:"endTime",formatter:t(h),width:"180px"},null,8,["formatter"]),a(l,{align:"center",label:"\u72B6\u6001",prop:"auditStatus"},{default:o(e=>[a(U,{type:t(ca).CRM_AUDIT_STATUS,value:e.row.auditStatus},null,8,["type","value"])]),_:1})]),_:1},8,["data"])),[[R,t(p)]]),a(N,{total:t(m),page:t(r).pageNo,"onUpdate:page":i[0]||(i[0]=e=>t(r).pageNo=e),limit:t(r).pageSize,"onUpdate:limit":i[1]||(i[1]=e=>t(r).pageSize=e),onPagination:c},null,8,["total","page","limit"])]),_:1}),a(la,{ref_key:"formRef",ref:f,onSuccess:c},null,512)],64)}}})});export{b as _,ua as __tla};
