import{d as z,i as B,r as i,e as W,o as n,v as f,w as t,f as e,a,h as V,x as X,c as k,F as C,q as x,t as Y,l as Z,Q as H,A as K,j as $,y as ee,z as ae,ai as le,aj as te,c0 as re,k as de,G as oe,D as ue,J as se,_ as ie,__tla as ce}from"./index-f0743f71.js";import{_ as pe,__tla as me}from"./Dialog-8f786edd.js";import{E as ne,__tla as _e}from"./el-tree-select-d7a8a522.js";import{P as h,__tla as fe}from"./index-45617213.js";import{P as ve,__tla as ye}from"./index-40f55eac.js";import{P as Ve,__tla as he}from"./index-47521906.js";import{C as ge}from"./constants-99751ef9.js";import{d as be,h as Pe}from"./tree-02f455f9.js";import{a as we,D as Ue,__tla as Ie}from"./dict-4a9940b3.js";import{u as ke,__tla as Ce}from"./useMessage-75a00a06.js";let D,xe=Promise.all([(()=>{try{return ce}catch{}})(),(()=>{try{return me}catch{}})(),(()=>{try{return _e}catch{}})(),(()=>{try{return fe}catch{}})(),(()=>{try{return ye}catch{}})(),(()=>{try{return he}catch{}})(),(()=>{try{return Ie}catch{}})(),(()=>{try{return Ce}catch{}})()]).then(async()=>{D=ie(z({name:"ProductForm",__name:"ProductForm",emits:["success"],setup(De,{expose:q,emit:S}){const{t:v}=B(),g=ke(),c=i(!1),b=i(""),p=i(!1),P=i(""),d=i({id:void 0,name:void 0,barCode:void 0,categoryId:void 0,unitId:void 0,status:void 0,standard:void 0,remark:void 0,expiryDay:void 0,weight:void 0,purchasePrice:void 0,salePrice:void 0,minPrice:void 0}),F=W({name:[{required:!0,message:"\u4EA7\u54C1\u540D\u79F0\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],barCode:[{required:!0,message:"\u4EA7\u54C1\u6761\u7801\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],categoryId:[{required:!0,message:"\u4EA7\u54C1\u5206\u7C7B\u7F16\u53F7\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],unitId:[{required:!0,message:"\u5355\u4F4D\u7F16\u53F7\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],status:[{required:!0,message:"\u4EA7\u54C1\u72B6\u6001\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}]}),y=i(),w=i([]),U=i([]);q({open:async(s,r)=>{if(c.value=!0,b.value=v("action."+s),P.value=s,j(),r){p.value=!0;try{d.value=await h.getProduct(r)}finally{p.value=!1}}const m=await ve.getProductCategorySimpleList();w.value=Pe(m,"id","parentId"),U.value=await Ve.getProductUnitSimpleList()}});const A=S,E=async()=>{await y.value.validate(),p.value=!0;try{const s=d.value;P.value==="create"?(await h.createProduct(s),g.success(v("common.createSuccess"))):(await h.updateProduct(s),g.success(v("common.updateSuccess"))),c.value=!1,A("success")}finally{p.value=!1}},j=()=>{var s;d.value={id:void 0,name:void 0,barCode:void 0,categoryId:void 0,unitId:void 0,status:ge.ENABLE,standard:void 0,remark:void 0,expiryDay:void 0,weight:void 0,purchasePrice:void 0,salePrice:void 0,minPrice:void 0},(s=y.value)==null||s.resetFields()};return(s,r)=>{const m=H,o=K,u=$,G=ne,L=ee,M=ae,N=le,O=te,_=re,J=de,Q=oe,I=ue,R=pe,T=se;return n(),f(R,{title:a(b),modelValue:a(c),"onUpdate:modelValue":r[13]||(r[13]=l=>Z(c)?c.value=l:null)},{footer:t(()=>[e(I,{onClick:E,type:"primary",disabled:a(p)},{default:t(()=>[V("\u786E \u5B9A")]),_:1},8,["disabled"]),e(I,{onClick:r[12]||(r[12]=l=>c.value=!1)},{default:t(()=>[V("\u53D6 \u6D88")]),_:1})]),default:t(()=>[X((n(),f(Q,{ref_key:"formRef",ref:y,model:a(d),rules:a(F),"label-width":"100px"},{default:t(()=>[e(J,{gutter:20},{default:t(()=>[e(u,{span:12},{default:t(()=>[e(o,{label:"\u540D\u79F0",prop:"name"},{default:t(()=>[e(m,{modelValue:a(d).name,"onUpdate:modelValue":r[0]||(r[0]=l=>a(d).name=l),placeholder:"\u8BF7\u8F93\u5165\u540D\u79F0"},null,8,["modelValue"])]),_:1})]),_:1}),e(u,{span:12},{default:t(()=>[e(o,{label:"\u6761\u7801",prop:"barCode"},{default:t(()=>[e(m,{modelValue:a(d).barCode,"onUpdate:modelValue":r[1]||(r[1]=l=>a(d).barCode=l),placeholder:"\u8BF7\u8F93\u5165\u6761\u7801"},null,8,["modelValue"])]),_:1})]),_:1}),e(u,{span:12},{default:t(()=>[e(o,{label:"\u5206\u7C7B",prop:"categoryId"},{default:t(()=>[e(G,{modelValue:a(d).categoryId,"onUpdate:modelValue":r[2]||(r[2]=l=>a(d).categoryId=l),data:a(w),props:a(be),"check-strictly":"","default-expand-all":"",placeholder:"\u8BF7\u9009\u62E9\u5206\u7C7B",class:"w-1/1"},null,8,["modelValue","data","props"])]),_:1})]),_:1}),e(u,{span:12},{default:t(()=>[e(o,{label:"\u5355\u4F4D",prop:"unitId"},{default:t(()=>[e(M,{modelValue:a(d).unitId,"onUpdate:modelValue":r[3]||(r[3]=l=>a(d).unitId=l),clearable:"",placeholder:"\u8BF7\u9009\u62E9\u5355\u4F4D",class:"w-1/1"},{default:t(()=>[(n(!0),k(C,null,x(a(U),l=>(n(),f(L,{key:l.id,label:l.name,value:l.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1}),e(u,{span:12},{default:t(()=>[e(o,{label:"\u72B6\u6001",prop:"status"},{default:t(()=>[e(O,{modelValue:a(d).status,"onUpdate:modelValue":r[4]||(r[4]=l=>a(d).status=l)},{default:t(()=>[(n(!0),k(C,null,x(a(we)(a(Ue).COMMON_STATUS),l=>(n(),f(N,{key:l.value,label:l.value},{default:t(()=>[V(Y(l.label),1)]),_:2},1032,["label"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1}),e(u,{span:12},{default:t(()=>[e(o,{label:"\u89C4\u683C",prop:"standard"},{default:t(()=>[e(m,{modelValue:a(d).standard,"onUpdate:modelValue":r[5]||(r[5]=l=>a(d).standard=l),placeholder:"\u8BF7\u8F93\u5165\u89C4\u683C"},null,8,["modelValue"])]),_:1})]),_:1}),e(u,{span:12},{default:t(()=>[e(o,{label:"\u4FDD\u8D28\u671F\u5929\u6570",prop:"expiryDay"},{default:t(()=>[e(_,{modelValue:a(d).expiryDay,"onUpdate:modelValue":r[6]||(r[6]=l=>a(d).expiryDay=l),placeholder:"\u8BF7\u8F93\u5165\u4FDD\u8D28\u671F\u5929\u6570",min:0,precision:0,class:"!w-1/1"},null,8,["modelValue"])]),_:1})]),_:1}),e(u,{span:12},{default:t(()=>[e(o,{label:"\u91CD\u91CF\uFF08kg\uFF09",prop:"weight"},{default:t(()=>[e(_,{modelValue:a(d).weight,"onUpdate:modelValue":r[7]||(r[7]=l=>a(d).weight=l),placeholder:"\u8BF7\u8F93\u5165\u91CD\u91CF\uFF08kg\uFF09",min:0,class:"!w-1/1"},null,8,["modelValue"])]),_:1})]),_:1}),e(u,{span:12},{default:t(()=>[e(o,{label:"\u91C7\u8D2D\u4EF7\u683C",prop:"purchasePrice"},{default:t(()=>[e(_,{modelValue:a(d).purchasePrice,"onUpdate:modelValue":r[8]||(r[8]=l=>a(d).purchasePrice=l),placeholder:"\u8BF7\u8F93\u5165\u91C7\u8D2D\u4EF7\u683C\uFF0C\u5355\u4F4D\uFF1A\u5143",min:0,precision:2,class:"!w-1/1"},null,8,["modelValue"])]),_:1})]),_:1}),e(u,{span:12},{default:t(()=>[e(o,{label:"\u9500\u552E\u4EF7\u683C",prop:"salePrice"},{default:t(()=>[e(_,{modelValue:a(d).salePrice,"onUpdate:modelValue":r[9]||(r[9]=l=>a(d).salePrice=l),placeholder:"\u8BF7\u8F93\u5165\u9500\u552E\u4EF7\u683C\uFF0C\u5355\u4F4D\uFF1A\u5143",min:0,precision:2,class:"!w-1/1"},null,8,["modelValue"])]),_:1})]),_:1}),e(u,{span:12},{default:t(()=>[e(o,{label:"\u6700\u4F4E\u4EF7\u683C",prop:"minPrice"},{default:t(()=>[e(_,{modelValue:a(d).minPrice,"onUpdate:modelValue":r[10]||(r[10]=l=>a(d).minPrice=l),placeholder:"\u8BF7\u8F93\u5165\u6700\u4F4E\u4EF7\u683C\uFF0C\u5355\u4F4D\uFF1A\u5143",min:0,precision:2,class:"!w-1/1"},null,8,["modelValue"])]),_:1})]),_:1}),e(u,{span:24},{default:t(()=>[e(o,{label:"\u5907\u6CE8",prop:"remark"},{default:t(()=>[e(m,{type:"textarea",modelValue:a(d).remark,"onUpdate:modelValue":r[11]||(r[11]=l=>a(d).remark=l),placeholder:"\u8BF7\u8F93\u5165\u5907\u6CE8"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1},8,["model","rules"])),[[T,a(p)]])]),_:1},8,["title","modelValue"])}}}),[["__file","E:/newCode/GYZX-UI-ADMIN/src/views/erp/product/product/ProductForm.vue"]])});export{xe as __tla,D as default};
