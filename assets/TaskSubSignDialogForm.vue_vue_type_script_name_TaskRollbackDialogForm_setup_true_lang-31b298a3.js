import{d as z,r as u,o as _,v as c,w as l,f as o,h as f,a,x as A,c as E,q as I,t as p,F as N,l as P,ao as M,az as R,ai as T,A as B,P as G,D as H,C as J,I as K,__tla as L}from"./index-d2088aec.js";import{_ as O,__tla as Q}from"./Dialog.vue_vue_type_style_index_0_lang-4d2024bd.js";import{e as W,f as X,__tla as Y}from"./index-7d4490cc.js";import{u as Z,__tla as $}from"./useMessage-c5990e2c.js";let h,ee=Promise.all([(()=>{try{return L}catch{}})(),(()=>{try{return Q}catch{}})(),(()=>{try{return Y}catch{}})(),(()=>{try{return $}catch{}})()]).then(async()=>{h=z({__name:"TaskSubSignDialogForm",emits:["success"],setup(ae,{expose:b,emit:V}){const v=Z(),r=u(!1),i=u(!1),t=u({id:"",reason:""}),k=u({id:[{required:!0,message:"\u5FC5\u987B\u9009\u62E9\u51CF\u7B7E\u4EFB\u52A1",trigger:"change"}],reason:[{required:!0,message:"\u51CF\u7B7E\u7406\u7531\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}]}),n=u(),m=u([]);b({open:async d=>{if(m.value=await W(d),M(m.value))return v.warning("\u5F53\u524D\u6CA1\u6709\u53EF\u51CF\u7B7E\u7684\u4EFB\u52A1"),!1;r.value=!0,q()}});const w=V,U=async()=>{if(n&&await n.value.validate()){i.value=!0;try{await X(t.value),v.success("\u51CF\u7B7E\u6210\u529F"),r.value=!1,w("success")}finally{i.value=!1}}},q=()=>{var d;t.value={id:"",reason:""},(d=n.value)==null||d.resetFields()};return(d,s)=>{const x=R,C=T,y=B,F=G,D=H,g=J,S=O,j=K;return _(),c(S,{modelValue:a(r),"onUpdate:modelValue":s[3]||(s[3]=e=>P(r)?r.value=e:null),title:"\u51CF\u7B7E",width:"500"},{footer:l(()=>[o(g,{disabled:a(i),type:"primary",onClick:U},{default:l(()=>[f("\u786E \u5B9A")]),_:1},8,["disabled"]),o(g,{onClick:s[2]||(s[2]=e=>r.value=!1)},{default:l(()=>[f("\u53D6 \u6D88")]),_:1})]),default:l(()=>[A((_(),c(D,{ref_key:"formRef",ref:n,model:a(t),rules:a(k),"label-width":"110px"},{default:l(()=>[o(y,{label:"\u51CF\u7B7E\u4EFB\u52A1",prop:"id"},{default:l(()=>[o(C,{modelValue:a(t).id,"onUpdate:modelValue":s[0]||(s[0]=e=>a(t).id=e)},{default:l(()=>[(_(!0),E(N,null,I(a(m),e=>(_(),c(x,{key:e.id,label:e.id},{default:l(()=>[f(p(e.name)+"("+p(e.assigneeUser.deptName)+p(e.assigneeUser.nickname)+"--\u5BA1\u6279) ",1)]),_:2},1032,["label"]))),128))]),_:1},8,["modelValue"])]),_:1}),o(y,{label:"\u51CF\u7B7E\u7406\u7531",prop:"reason"},{default:l(()=>[o(F,{modelValue:a(t).reason,"onUpdate:modelValue":s[1]||(s[1]=e=>a(t).reason=e),clearable:"",placeholder:"\u8BF7\u8F93\u5165\u51CF\u7B7E\u7406\u7531"},null,8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])),[[j,a(i)]])]),_:1},8,["modelValue"])}}})});export{h as _,ee as __tla};
