import{a_ as ci,d as mt,b0 as di,Y as rt,b3 as na,aI as pi,r as I,b4 as ui,b5 as kt,b6 as zt,a$ as St,b7 as mi,b8 as ra,b9 as oa,b as B,ba as J,h as te,bb as gi,bc as sa,b2 as ha,ae as X,bd as la,be as ca,p as da,bf as pa,a as v,o as q,c as gt,w as ua,$ as ma,f as ot,au as fi,N as Z,P as ee,_ as Wt,bg as vi,e as A,j as ga,t as bi,q as Nt,a0 as ft,az as fa,bh as va,B as wi,aR as ba,ak as wa,__tla as ya}from"./index-aaa5adb3.js";import{b as xa,__tla as Ca}from"./profile-56165e29.js";import{E as yi,__tla as Ma}from"./el-avatar-600b9194.js";import{_ as Da,__tla as ka}from"./Dialog-9a73a39c.js";import{_ as Ba,__tla as _a}from"./XButton-74cf0ce2.js";import{a as Ea}from"./avatar-c1159cdf.js";import{u as Oa,__tla as Ta}from"./useMessage-873da1e2.js";let xi,za=Promise.all([(()=>{try{return ya}catch{}})(),(()=>{try{return Ca}catch{}})(),(()=>{try{return Ma}catch{}})(),(()=>{try{return ka}catch{}})(),(()=>{try{return _a}catch{}})(),(()=>{try{return Ta}catch{}})()]).then(async()=>{const ie=mt({name:"ElSpaceItem",props:ci({prefixCls:{type:String}}),setup(t,{slots:i}){const e=di("space"),n=rt(()=>`${t.prefixCls||e.b()}__item`);return()=>na("div",{class:n.value},pi(i,"default"))}}),ae={small:8,default:12,large:16},Ci=mt({name:"ElSpace",props:ci({direction:{type:String,values:["horizontal","vertical"],default:"horizontal"},class:{type:St([String,Object,Array]),default:""},style:{type:St([String,Array,Object]),default:""},alignment:{type:St(String),default:"center"},prefixCls:{type:String},spacer:{type:St([Object,String,Number,Array]),default:null,validator:t=>mi(t)||zt(t)||ra(t)},wrap:Boolean,fill:Boolean,fillRatio:{type:Number,default:100},size:{type:[String,Array,Number],values:oa,validator:t=>zt(t)||kt(t)&&t.length===2&&t.every(zt)}}),setup(t,{slots:i}){const{classes:e,containerStyle:n,itemStyle:a}=function(h){const s=di("space"),l=rt(()=>[s.b(),s.m(h.direction),h.class]),o=I(0),d=I(0),p=rt(()=>[h.wrap||h.fill?{flexWrap:"wrap",marginBottom:`-${d.value}px`}:{},{alignItems:h.alignment},h.style]),c=rt(()=>[{paddingBottom:`${d.value}px`,marginRight:`${o.value}px`},h.fill?{flexGrow:1,minWidth:`${h.fillRatio}%`}:{}]);return ui(()=>{const{size:m="small",wrap:f,direction:g,fill:b}=h;if(kt(m)){const[w=0,y=0]=m;o.value=w,d.value=y}else{let w;w=zt(m)?m:ae[m||"small"]||ae.small,(f||b)&&g==="horizontal"?o.value=d.value=w:g==="horizontal"?(o.value=w,d.value=0):(d.value=w,o.value=0)}}),{classes:l,containerStyle:p,itemStyle:c}}(t);function r(h,s="",l=[]){const{prefixCls:o}=t;return h.forEach((d,p)=>{gi(d)?kt(d.children)&&d.children.forEach((c,m)=>{gi(c)&&kt(c.children)?r(c.children,`${s+m}-`,l):l.push(B(ie,{style:a.value,prefixCls:o,key:`nested-${s+m}`},{default:()=>[c]},J.PROPS|J.STYLE,["style","prefixCls"]))}):sa(d)&&l.push(B(ie,{style:a.value,prefixCls:o,key:`LoopKey${s+p}`},{default:()=>[d]},J.PROPS|J.STYLE,["style","prefixCls"]))}),l}return()=>{var h;const{spacer:s,direction:l}=t,o=pi(i,"default",{key:0},()=>[]);if(((h=o.children)!=null?h:[]).length===0)return null;if(kt(o.children)){let d=r(o.children);if(s){const p=d.length-1;d=d.reduce((c,m,f)=>{const g=[...c,m];return f!==p&&g.push(B("span",{style:[a.value,l==="vertical"?"width: 100%":null],key:f},[mi(s)?s:te(s,J.TEXT)],J.STYLE)),g},[])}return B("div",{class:e.value,style:n.value},d,J.STYLE|J.CLASS)}return o.children}}}),Mi=ha(Ci);function ne(t,i){var e=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);i&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),e.push.apply(e,n)}return e}function re(t){for(var i=1;i<arguments.length;i++){var e=arguments[i]!=null?arguments[i]:{};i%2?ne(Object(e),!0).forEach(function(n){Di(t,n,e[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):ne(Object(e)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(e,n))})}return t}function Rt(t){return Rt=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},Rt(t)}function oe(t,i){for(var e=0;e<i.length;e++){var n=i[e];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,he(n.key),n)}}function Di(t,i,e){return(i=he(i))in t?Object.defineProperty(t,i,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[i]=e,t}function se(t){return function(i){if(Array.isArray(i))return Lt(i)}(t)||function(i){if(typeof Symbol<"u"&&i[Symbol.iterator]!=null||i["@@iterator"]!=null)return Array.from(i)}(t)||function(i,e){if(i){if(typeof i=="string")return Lt(i,e);var n=Object.prototype.toString.call(i).slice(8,-1);if(n==="Object"&&i.constructor&&(n=i.constructor.name),n==="Map"||n==="Set")return Array.from(i);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Lt(i,e)}}(t)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function Lt(t,i){(i==null||i>t.length)&&(i=t.length);for(var e=0,n=new Array(i);e<i;e++)n[e]=t[e];return n}function he(t){var i=function(e,n){if(typeof e!="object"||e===null)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var r=a.call(e,n||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(n==="string"?String:Number)(e)}(t,"string");return typeof i=="symbol"?i:String(i)}var Bt=typeof window<"u"&&window.document!==void 0,U=Bt?window:{},At=!(!Bt||!U.document.documentElement)&&"ontouchstart"in U.document.documentElement,Yt=!!Bt&&"PointerEvent"in U,_="cropper",Ht="all",le="crop",ce="move",de="zoom",tt="e",et="w",st="s",G="n",vt="ne",bt="nw",wt="se",yt="sw",It="".concat(_,"-crop"),pe="".concat(_,"-disabled"),R="".concat(_,"-hidden"),ue="".concat(_,"-hide"),ki="".concat(_,"-invisible"),_t="".concat(_,"-modal"),Xt="".concat(_,"-move"),xt="".concat(_,"Action"),Et="".concat(_,"Preview"),Pt="crop",me="move",ge="none",jt="crop",Ut="cropend",$t="cropmove",qt="cropstart",fe="dblclick",ve=Yt?"pointerdown":At?"touchstart":"mousedown",be=Yt?"pointermove":At?"touchmove":"mousemove",we=Yt?"pointerup pointercancel":At?"touchend touchcancel":"mouseup",ye="ready",xe="resize",Ce="wheel",Vt="zoom",Me="image/jpeg",Bi=/^e|w|s|n|se|sw|ne|nw|all|crop|move|zoom$/,_i=/^data:/,Ei=/^data:image\/jpeg;base64,/,Oi=/^img|canvas$/i,De={viewMode:0,dragMode:Pt,initialAspectRatio:NaN,aspectRatio:NaN,data:null,preview:"",responsive:!0,restore:!0,checkCrossOrigin:!0,checkOrientation:!0,modal:!0,guides:!0,center:!0,highlight:!0,background:!0,autoCrop:!0,autoCropArea:.8,movable:!0,rotatable:!0,scalable:!0,zoomable:!0,zoomOnTouch:!0,zoomOnWheel:!0,wheelZoomRatio:.1,cropBoxMovable:!0,cropBoxResizable:!0,toggleDragModeOnDblclick:!0,minCanvasWidth:0,minCanvasHeight:0,minCropBoxWidth:0,minCropBoxHeight:0,minContainerWidth:200,minContainerHeight:100,ready:null,cropstart:null,cropmove:null,cropend:null,crop:null,zoom:null},Ti=Number.isNaN||U.isNaN;function C(t){return typeof t=="number"&&!Ti(t)}var ke=function(t){return t>0&&t<1/0};function Zt(t){return t===void 0}function it(t){return Rt(t)==="object"&&t!==null}var zi=Object.prototype.hasOwnProperty;function ht(t){if(!it(t))return!1;try{var i=t.constructor,e=i.prototype;return i&&e&&zi.call(e,"isPrototypeOf")}catch{return!1}}function L(t){return typeof t=="function"}var Si=Array.prototype.slice;function Be(t){return Array.from?Array.from(t):Si.call(t)}function T(t,i){return t&&L(i)&&(Array.isArray(t)||C(t.length)?Be(t).forEach(function(e,n){i.call(t,e,n,t)}):it(t)&&Object.keys(t).forEach(function(e){i.call(t,t[e],e,t)})),t}var E=Object.assign||function(t){for(var i=arguments.length,e=new Array(i>1?i-1:0),n=1;n<i;n++)e[n-1]=arguments[n];return it(t)&&e.length>0&&e.forEach(function(a){it(a)&&Object.keys(a).forEach(function(r){t[r]=a[r]})}),t},Wi=/\.\d*(?:0|9){12}\d*$/;function lt(t){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1e11;return Wi.test(t)?Math.round(t*i)/i:t}var Ni=/^width|height|left|top|marginLeft|marginTop$/;function F(t,i){var e=t.style;T(i,function(n,a){Ni.test(a)&&C(n)&&(n="".concat(n,"px")),e[a]=n})}function z(t,i){if(i)if(C(t.length))T(t,function(n){z(n,i)});else if(t.classList)t.classList.add(i);else{var e=t.className.trim();e?e.indexOf(i)<0&&(t.className="".concat(e," ").concat(i)):t.className=i}}function $(t,i){i&&(C(t.length)?T(t,function(e){$(e,i)}):t.classList?t.classList.remove(i):t.className.indexOf(i)>=0&&(t.className=t.className.replace(i,"")))}function ct(t,i,e){i&&(C(t.length)?T(t,function(n){ct(n,i,e)}):e?z(t,i):$(t,i))}var Ri=/([a-z\d])([A-Z])/g;function Gt(t){return t.replace(Ri,"$1-$2").toLowerCase()}function Ft(t,i){return it(t[i])?t[i]:t.dataset?t.dataset[i]:t.getAttribute("data-".concat(Gt(i)))}function Ct(t,i,e){it(e)?t[i]=e:t.dataset?t.dataset[i]=e:t.setAttribute("data-".concat(Gt(i)),e)}var _e=/\s\s*/,Ee=function(){var t=!1;if(Bt){var i=!1,e=function(){},n=Object.defineProperty({},"once",{get:function(){return t=!0,i},set:function(a){i=a}});U.addEventListener("test",e,n),U.removeEventListener("test",e,n)}return t}();function P(t,i,e){var n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},a=e;i.trim().split(_e).forEach(function(r){if(!Ee){var h=t.listeners;h&&h[r]&&h[r][e]&&(a=h[r][e],delete h[r][e],Object.keys(h[r]).length===0&&delete h[r],Object.keys(h).length===0&&delete t.listeners)}t.removeEventListener(r,a,n)})}function H(t,i,e){var n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},a=e;i.trim().split(_e).forEach(function(r){if(n.once&&!Ee){var h=t.listeners,s=h===void 0?{}:h;a=function(){delete s[r][e],t.removeEventListener(r,a,n);for(var l=arguments.length,o=new Array(l),d=0;d<l;d++)o[d]=arguments[d];e.apply(t,o)},s[r]||(s[r]={}),s[r][e]&&t.removeEventListener(r,s[r][e],n),s[r][e]=a,t.listeners=s}t.addEventListener(r,a,n)})}function dt(t,i,e){var n;return L(Event)&&L(CustomEvent)?n=new CustomEvent(i,{detail:e,bubbles:!0,cancelable:!0}):(n=document.createEvent("CustomEvent")).initCustomEvent(i,!0,!0,e),t.dispatchEvent(n)}function Oe(t){var i=t.getBoundingClientRect();return{left:i.left+(window.pageXOffset-document.documentElement.clientLeft),top:i.top+(window.pageYOffset-document.documentElement.clientTop)}}var Kt=U.location,Li=/^(\w+:)\/\/([^:/?#]*):?(\d*)/i;function Te(t){var i=t.match(Li);return i!==null&&(i[1]!==Kt.protocol||i[2]!==Kt.hostname||i[3]!==Kt.port)}function ze(t){var i="timestamp=".concat(new Date().getTime());return t+(t.indexOf("?")===-1?"?":"&")+i}function Mt(t){var i=t.rotate,e=t.scaleX,n=t.scaleY,a=t.translateX,r=t.translateY,h=[];C(a)&&a!==0&&h.push("translateX(".concat(a,"px)")),C(r)&&r!==0&&h.push("translateY(".concat(r,"px)")),C(i)&&i!==0&&h.push("rotate(".concat(i,"deg)")),C(e)&&e!==1&&h.push("scaleX(".concat(e,")")),C(n)&&n!==1&&h.push("scaleY(".concat(n,")"));var s=h.length?h.join(" "):"none";return{WebkitTransform:s,msTransform:s,transform:s}}function Ot(t,i){var e=t.pageX,n=t.pageY,a={endX:e,endY:n};return i?a:re({startX:e,startY:n},a)}function K(t){var i=t.aspectRatio,e=t.height,n=t.width,a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"contain",r=ke(n),h=ke(e);if(r&&h){var s=e*i;a==="contain"&&s>n||a==="cover"&&s<n?e=n/i:n=e*i}else r?e=n/i:h&&(n=e*i);return{width:n,height:e}}var Se=String.fromCharCode,Ai=/^data:.*,/;function Yi(t){var i,e=new DataView(t);try{var n,a,r;if(e.getUint8(0)===255&&e.getUint8(1)===216)for(var h=e.byteLength,s=2;s+1<h;){if(e.getUint8(s)===255&&e.getUint8(s+1)===225){a=s;break}s+=1}if(a){var l=a+10;if(function(f,g,b){var w="";b+=g;for(var y=g;y<b;y+=1)w+=Se(f.getUint8(y));return w}(e,a+4,4)==="Exif"){var o=e.getUint16(l);if(((n=o===18761)||o===19789)&&e.getUint16(l+2,n)===42){var d=e.getUint32(l+4,n);d>=8&&(r=l+d)}}}if(r){var p,c,m=e.getUint16(r,n);for(c=0;c<m;c+=1)if(p=r+12*c+2,e.getUint16(p,n)===274){p+=8,i=e.getUint16(p,n),e.setUint16(p,1,n);break}}}catch{i=1}return i}var Hi={render:function(){this.initContainer(),this.initCanvas(),this.initCropBox(),this.renderCanvas(),this.cropped&&this.renderCropBox()},initContainer:function(){var t=this.element,i=this.options,e=this.container,n=this.cropper,a=Number(i.minContainerWidth),r=Number(i.minContainerHeight);z(n,R),$(t,R);var h={width:Math.max(e.offsetWidth,a>=0?a:200),height:Math.max(e.offsetHeight,r>=0?r:100)};this.containerData=h,F(n,{width:h.width,height:h.height}),z(t,R),$(n,R)},initCanvas:function(){var t=this.containerData,i=this.imageData,e=this.options.viewMode,n=Math.abs(i.rotate)%180==90,a=n?i.naturalHeight:i.naturalWidth,r=n?i.naturalWidth:i.naturalHeight,h=a/r,s=t.width,l=t.height;t.height*h>t.width?e===3?s=t.height*h:l=t.width/h:e===3?l=t.width/h:s=t.height*h;var o={aspectRatio:h,naturalWidth:a,naturalHeight:r,width:s,height:l};this.canvasData=o,this.limited=e===1||e===2,this.limitCanvas(!0,!0),o.width=Math.min(Math.max(o.width,o.minWidth),o.maxWidth),o.height=Math.min(Math.max(o.height,o.minHeight),o.maxHeight),o.left=(t.width-o.width)/2,o.top=(t.height-o.height)/2,o.oldLeft=o.left,o.oldTop=o.top,this.initialCanvasData=E({},o)},limitCanvas:function(t,i){var e=this.options,n=this.containerData,a=this.canvasData,r=this.cropBoxData,h=e.viewMode,s=a.aspectRatio,l=this.cropped&&r;if(t){var o=Number(e.minCanvasWidth)||0,d=Number(e.minCanvasHeight)||0;h>1?(o=Math.max(o,n.width),d=Math.max(d,n.height),h===3&&(d*s>o?o=d*s:d=o/s)):h>0&&(o?o=Math.max(o,l?r.width:0):d?d=Math.max(d,l?r.height:0):l&&(o=r.width,(d=r.height)*s>o?o=d*s:d=o/s));var p=K({aspectRatio:s,width:o,height:d});o=p.width,d=p.height,a.minWidth=o,a.minHeight=d,a.maxWidth=1/0,a.maxHeight=1/0}if(i)if(h>(l?0:1)){var c=n.width-a.width,m=n.height-a.height;a.minLeft=Math.min(0,c),a.minTop=Math.min(0,m),a.maxLeft=Math.max(0,c),a.maxTop=Math.max(0,m),l&&this.limited&&(a.minLeft=Math.min(r.left,r.left+(r.width-a.width)),a.minTop=Math.min(r.top,r.top+(r.height-a.height)),a.maxLeft=r.left,a.maxTop=r.top,h===2&&(a.width>=n.width&&(a.minLeft=Math.min(0,c),a.maxLeft=Math.max(0,c)),a.height>=n.height&&(a.minTop=Math.min(0,m),a.maxTop=Math.max(0,m))))}else a.minLeft=-a.width,a.minTop=-a.height,a.maxLeft=n.width,a.maxTop=n.height},renderCanvas:function(t,i){var e=this.canvasData,n=this.imageData;if(i){var a=function(o){var d=o.width,p=o.height,c=o.degree;if((c=Math.abs(c)%180)==90)return{width:p,height:d};var m=c%90*Math.PI/180,f=Math.sin(m),g=Math.cos(m),b=d*g+p*f,w=d*f+p*g;return c>90?{width:w,height:b}:{width:b,height:w}}({width:n.naturalWidth*Math.abs(n.scaleX||1),height:n.naturalHeight*Math.abs(n.scaleY||1),degree:n.rotate||0}),r=a.width,h=a.height,s=e.width*(r/e.naturalWidth),l=e.height*(h/e.naturalHeight);e.left-=(s-e.width)/2,e.top-=(l-e.height)/2,e.width=s,e.height=l,e.aspectRatio=r/h,e.naturalWidth=r,e.naturalHeight=h,this.limitCanvas(!0,!1)}(e.width>e.maxWidth||e.width<e.minWidth)&&(e.left=e.oldLeft),(e.height>e.maxHeight||e.height<e.minHeight)&&(e.top=e.oldTop),e.width=Math.min(Math.max(e.width,e.minWidth),e.maxWidth),e.height=Math.min(Math.max(e.height,e.minHeight),e.maxHeight),this.limitCanvas(!1,!0),e.left=Math.min(Math.max(e.left,e.minLeft),e.maxLeft),e.top=Math.min(Math.max(e.top,e.minTop),e.maxTop),e.oldLeft=e.left,e.oldTop=e.top,F(this.canvas,E({width:e.width,height:e.height},Mt({translateX:e.left,translateY:e.top}))),this.renderImage(t),this.cropped&&this.limited&&this.limitCropBox(!0,!0)},renderImage:function(t){var i=this.canvasData,e=this.imageData,n=e.naturalWidth*(i.width/i.naturalWidth),a=e.naturalHeight*(i.height/i.naturalHeight);E(e,{width:n,height:a,left:(i.width-n)/2,top:(i.height-a)/2}),F(this.image,E({width:e.width,height:e.height},Mt(E({translateX:e.left,translateY:e.top},e)))),t&&this.output()},initCropBox:function(){var t=this.options,i=this.canvasData,e=t.aspectRatio||t.initialAspectRatio,n=Number(t.autoCropArea)||.8,a={width:i.width,height:i.height};e&&(i.height*e>i.width?a.height=a.width/e:a.width=a.height*e),this.cropBoxData=a,this.limitCropBox(!0,!0),a.width=Math.min(Math.max(a.width,a.minWidth),a.maxWidth),a.height=Math.min(Math.max(a.height,a.minHeight),a.maxHeight),a.width=Math.max(a.minWidth,a.width*n),a.height=Math.max(a.minHeight,a.height*n),a.left=i.left+(i.width-a.width)/2,a.top=i.top+(i.height-a.height)/2,a.oldLeft=a.left,a.oldTop=a.top,this.initialCropBoxData=E({},a)},limitCropBox:function(t,i){var e=this.options,n=this.containerData,a=this.canvasData,r=this.cropBoxData,h=this.limited,s=e.aspectRatio;if(t){var l=Number(e.minCropBoxWidth)||0,o=Number(e.minCropBoxHeight)||0,d=h?Math.min(n.width,a.width,a.width+a.left,n.width-a.left):n.width,p=h?Math.min(n.height,a.height,a.height+a.top,n.height-a.top):n.height;l=Math.min(l,n.width),o=Math.min(o,n.height),s&&(l&&o?o*s>l?o=l/s:l=o*s:l?o=l/s:o&&(l=o*s),p*s>d?p=d/s:d=p*s),r.minWidth=Math.min(l,d),r.minHeight=Math.min(o,p),r.maxWidth=d,r.maxHeight=p}i&&(h?(r.minLeft=Math.max(0,a.left),r.minTop=Math.max(0,a.top),r.maxLeft=Math.min(n.width,a.left+a.width)-r.width,r.maxTop=Math.min(n.height,a.top+a.height)-r.height):(r.minLeft=0,r.minTop=0,r.maxLeft=n.width-r.width,r.maxTop=n.height-r.height))},renderCropBox:function(){var t=this.options,i=this.containerData,e=this.cropBoxData;(e.width>e.maxWidth||e.width<e.minWidth)&&(e.left=e.oldLeft),(e.height>e.maxHeight||e.height<e.minHeight)&&(e.top=e.oldTop),e.width=Math.min(Math.max(e.width,e.minWidth),e.maxWidth),e.height=Math.min(Math.max(e.height,e.minHeight),e.maxHeight),this.limitCropBox(!1,!0),e.left=Math.min(Math.max(e.left,e.minLeft),e.maxLeft),e.top=Math.min(Math.max(e.top,e.minTop),e.maxTop),e.oldLeft=e.left,e.oldTop=e.top,t.movable&&t.cropBoxMovable&&Ct(this.face,xt,e.width>=i.width&&e.height>=i.height?ce:Ht),F(this.cropBox,E({width:e.width,height:e.height},Mt({translateX:e.left,translateY:e.top}))),this.cropped&&this.limited&&this.limitCanvas(!0,!0),this.disabled||this.output()},output:function(){this.preview(),dt(this.element,jt,this.getData())}},Ii={initPreview:function(){var t=this.element,i=this.crossOrigin,e=this.options.preview,n=i?this.crossOriginUrl:this.url,a=t.alt||"The image to preview",r=document.createElement("img");if(i&&(r.crossOrigin=i),r.src=n,r.alt=a,this.viewBox.appendChild(r),this.viewBoxImage=r,e){var h=e;typeof e=="string"?h=t.ownerDocument.querySelectorAll(e):e.querySelector&&(h=[e]),this.previews=h,T(h,function(s){var l=document.createElement("img");Ct(s,Et,{width:s.offsetWidth,height:s.offsetHeight,html:s.innerHTML}),i&&(l.crossOrigin=i),l.src=n,l.alt=a,l.style.cssText='display:block;width:100%;height:auto;min-width:0!important;min-height:0!important;max-width:none!important;max-height:none!important;image-orientation:0deg!important;"',s.innerHTML="",s.appendChild(l)})}},resetPreview:function(){T(this.previews,function(t){var i=Ft(t,Et);F(t,{width:i.width,height:i.height}),t.innerHTML=i.html,function(e,n){if(it(e[n]))try{delete e[n]}catch{e[n]=void 0}else if(e.dataset)try{delete e.dataset[n]}catch{e.dataset[n]=void 0}else e.removeAttribute("data-".concat(Gt(n)))}(t,Et)})},preview:function(){var t=this.imageData,i=this.canvasData,e=this.cropBoxData,n=e.width,a=e.height,r=t.width,h=t.height,s=e.left-i.left-t.left,l=e.top-i.top-t.top;this.cropped&&!this.disabled&&(F(this.viewBoxImage,E({width:r,height:h},Mt(E({translateX:-s,translateY:-l},t)))),T(this.previews,function(o){var d=Ft(o,Et),p=d.width,c=d.height,m=p,f=c,g=1;n&&(f=a*(g=p/n)),a&&f>c&&(m=n*(g=c/a),f=c),F(o,{width:m,height:f}),F(o.getElementsByTagName("img")[0],E({width:r*g,height:h*g},Mt(E({translateX:-s*g,translateY:-l*g},t))))}))}},Xi={bind:function(){var t=this.element,i=this.options,e=this.cropper;L(i.cropstart)&&H(t,qt,i.cropstart),L(i.cropmove)&&H(t,$t,i.cropmove),L(i.cropend)&&H(t,Ut,i.cropend),L(i.crop)&&H(t,jt,i.crop),L(i.zoom)&&H(t,Vt,i.zoom),H(e,ve,this.onCropStart=this.cropStart.bind(this)),i.zoomable&&i.zoomOnWheel&&H(e,Ce,this.onWheel=this.wheel.bind(this),{passive:!1,capture:!0}),i.toggleDragModeOnDblclick&&H(e,fe,this.onDblclick=this.dblclick.bind(this)),H(t.ownerDocument,be,this.onCropMove=this.cropMove.bind(this)),H(t.ownerDocument,we,this.onCropEnd=this.cropEnd.bind(this)),i.responsive&&H(window,xe,this.onResize=this.resize.bind(this))},unbind:function(){var t=this.element,i=this.options,e=this.cropper;L(i.cropstart)&&P(t,qt,i.cropstart),L(i.cropmove)&&P(t,$t,i.cropmove),L(i.cropend)&&P(t,Ut,i.cropend),L(i.crop)&&P(t,jt,i.crop),L(i.zoom)&&P(t,Vt,i.zoom),P(e,ve,this.onCropStart),i.zoomable&&i.zoomOnWheel&&P(e,Ce,this.onWheel,{passive:!1,capture:!0}),i.toggleDragModeOnDblclick&&P(e,fe,this.onDblclick),P(t.ownerDocument,be,this.onCropMove),P(t.ownerDocument,we,this.onCropEnd),i.responsive&&P(window,xe,this.onResize)}},Pi={resize:function(){if(!this.disabled){var t,i,e=this.options,n=this.container,a=this.containerData,r=n.offsetWidth/a.width,h=n.offsetHeight/a.height,s=Math.abs(r-1)>Math.abs(h-1)?r:h;s!==1&&(e.restore&&(t=this.getCanvasData(),i=this.getCropBoxData()),this.render(),e.restore&&(this.setCanvasData(T(t,function(l,o){t[o]=l*s})),this.setCropBoxData(T(i,function(l,o){i[o]=l*s}))))}},dblclick:function(){var t,i;this.disabled||this.options.dragMode===ge||this.setDragMode((t=this.dragBox,i=It,(t.classList?t.classList.contains(i):t.className.indexOf(i)>-1)?me:Pt))},wheel:function(t){var i=this,e=Number(this.options.wheelZoomRatio)||.1,n=1;this.disabled||(t.preventDefault(),this.wheeling||(this.wheeling=!0,setTimeout(function(){i.wheeling=!1},50),t.deltaY?n=t.deltaY>0?1:-1:t.wheelDelta?n=-t.wheelDelta/120:t.detail&&(n=t.detail>0?1:-1),this.zoom(-n*e,t)))},cropStart:function(t){var i=t.buttons,e=t.button;if(!(this.disabled||(t.type==="mousedown"||t.type==="pointerdown"&&t.pointerType==="mouse")&&(C(i)&&i!==1||C(e)&&e!==0||t.ctrlKey))){var n,a=this.options,r=this.pointers;t.changedTouches?T(t.changedTouches,function(h){r[h.identifier]=Ot(h)}):r[t.pointerId||0]=Ot(t),n=Object.keys(r).length>1&&a.zoomable&&a.zoomOnTouch?de:Ft(t.target,xt),Bi.test(n)&&dt(this.element,qt,{originalEvent:t,action:n})!==!1&&(t.preventDefault(),this.action=n,this.cropping=!1,n===le&&(this.cropping=!0,z(this.dragBox,_t)))}},cropMove:function(t){var i=this.action;if(!this.disabled&&i){var e=this.pointers;t.preventDefault(),dt(this.element,$t,{originalEvent:t,action:i})!==!1&&(t.changedTouches?T(t.changedTouches,function(n){E(e[n.identifier]||{},Ot(n,!0))}):E(e[t.pointerId||0]||{},Ot(t,!0)),this.change(t))}},cropEnd:function(t){if(!this.disabled){var i=this.action,e=this.pointers;t.changedTouches?T(t.changedTouches,function(n){delete e[n.identifier]}):delete e[t.pointerId||0],i&&(t.preventDefault(),Object.keys(e).length||(this.action=""),this.cropping&&(this.cropping=!1,ct(this.dragBox,_t,this.cropped&&this.options.modal)),dt(this.element,Ut,{originalEvent:t,action:i}))}}},ji={change:function(t){var i,e=this.options,n=this.canvasData,a=this.containerData,r=this.cropBoxData,h=this.pointers,s=this.action,l=e.aspectRatio,o=r.left,d=r.top,p=r.width,c=r.height,m=o+p,f=d+c,g=0,b=0,w=a.width,y=a.height,D=!0;!l&&t.shiftKey&&(l=p&&c?p/c:1),this.limited&&(g=r.minLeft,b=r.minTop,w=g+Math.min(a.width,n.width,n.left+n.width),y=b+Math.min(a.height,n.height,n.top+n.height));var M=h[Object.keys(h)[0]],u={x:M.endX-M.startX,y:M.endY-M.startY},x=function(k){switch(k){case tt:m+u.x>w&&(u.x=w-m);break;case et:o+u.x<g&&(u.x=g-o);break;case G:d+u.y<b&&(u.y=b-d);break;case st:f+u.y>y&&(u.y=y-f)}};switch(s){case Ht:o+=u.x,d+=u.y;break;case tt:if(u.x>=0&&(m>=w||l&&(d<=b||f>=y))){D=!1;break}x(tt),(p+=u.x)<0&&(s=et,o-=p=-p),l&&(c=p/l,d+=(r.height-c)/2);break;case G:if(u.y<=0&&(d<=b||l&&(o<=g||m>=w))){D=!1;break}x(G),c-=u.y,d+=u.y,c<0&&(s=st,d-=c=-c),l&&(p=c*l,o+=(r.width-p)/2);break;case et:if(u.x<=0&&(o<=g||l&&(d<=b||f>=y))){D=!1;break}x(et),p-=u.x,o+=u.x,p<0&&(s=tt,o-=p=-p),l&&(c=p/l,d+=(r.height-c)/2);break;case st:if(u.y>=0&&(f>=y||l&&(o<=g||m>=w))){D=!1;break}x(st),(c+=u.y)<0&&(s=G,d-=c=-c),l&&(p=c*l,o+=(r.width-p)/2);break;case vt:if(l){if(u.y<=0&&(d<=b||m>=w)){D=!1;break}x(G),c-=u.y,d+=u.y,p=c*l}else x(G),x(tt),u.x>=0?m<w?p+=u.x:u.y<=0&&d<=b&&(D=!1):p+=u.x,u.y<=0?d>b&&(c-=u.y,d+=u.y):(c-=u.y,d+=u.y);p<0&&c<0?(s=yt,d-=c=-c,o-=p=-p):p<0?(s=bt,o-=p=-p):c<0&&(s=wt,d-=c=-c);break;case bt:if(l){if(u.y<=0&&(d<=b||o<=g)){D=!1;break}x(G),c-=u.y,d+=u.y,p=c*l,o+=r.width-p}else x(G),x(et),u.x<=0?o>g?(p-=u.x,o+=u.x):u.y<=0&&d<=b&&(D=!1):(p-=u.x,o+=u.x),u.y<=0?d>b&&(c-=u.y,d+=u.y):(c-=u.y,d+=u.y);p<0&&c<0?(s=wt,d-=c=-c,o-=p=-p):p<0?(s=vt,o-=p=-p):c<0&&(s=yt,d-=c=-c);break;case yt:if(l){if(u.x<=0&&(o<=g||f>=y)){D=!1;break}x(et),p-=u.x,o+=u.x,c=p/l}else x(st),x(et),u.x<=0?o>g?(p-=u.x,o+=u.x):u.y>=0&&f>=y&&(D=!1):(p-=u.x,o+=u.x),u.y>=0?f<y&&(c+=u.y):c+=u.y;p<0&&c<0?(s=vt,d-=c=-c,o-=p=-p):p<0?(s=wt,o-=p=-p):c<0&&(s=bt,d-=c=-c);break;case wt:if(l){if(u.x>=0&&(m>=w||f>=y)){D=!1;break}x(tt),c=(p+=u.x)/l}else x(st),x(tt),u.x>=0?m<w?p+=u.x:u.y>=0&&f>=y&&(D=!1):p+=u.x,u.y>=0?f<y&&(c+=u.y):c+=u.y;p<0&&c<0?(s=bt,d-=c=-c,o-=p=-p):p<0?(s=yt,o-=p=-p):c<0&&(s=vt,d-=c=-c);break;case ce:this.move(u.x,u.y),D=!1;break;case de:this.zoom(function(k){var Y=re({},k),N=0;return T(k,function(S,Q){delete Y[Q],T(Y,function(W){var O=Math.abs(S.startX-W.startX),Dt=Math.abs(S.startY-W.startY),at=Math.abs(S.endX-W.endX),pt=Math.abs(S.endY-W.endY),V=Math.sqrt(O*O+Dt*Dt),ut=(Math.sqrt(at*at+pt*pt)-V)/V;Math.abs(ut)>Math.abs(N)&&(N=ut)})}),N}(h),t),D=!1;break;case le:if(!u.x||!u.y){D=!1;break}i=Oe(this.cropper),o=M.startX-i.left,d=M.startY-i.top,p=r.minWidth,c=r.minHeight,u.x>0?s=u.y>0?wt:vt:u.x<0&&(o-=p,s=u.y>0?yt:bt),u.y<0&&(d-=c),this.cropped||($(this.cropBox,R),this.cropped=!0,this.limited&&this.limitCropBox(!0,!0))}D&&(r.width=p,r.height=c,r.left=o,r.top=d,this.action=s,this.renderCropBox()),T(h,function(k){k.startX=k.endX,k.startY=k.endY})}},Ui={crop:function(){return!this.ready||this.cropped||this.disabled||(this.cropped=!0,this.limitCropBox(!0,!0),this.options.modal&&z(this.dragBox,_t),$(this.cropBox,R),this.setCropBoxData(this.initialCropBoxData)),this},reset:function(){return this.ready&&!this.disabled&&(this.imageData=E({},this.initialImageData),this.canvasData=E({},this.initialCanvasData),this.cropBoxData=E({},this.initialCropBoxData),this.renderCanvas(),this.cropped&&this.renderCropBox()),this},clear:function(){return this.cropped&&!this.disabled&&(E(this.cropBoxData,{left:0,top:0,width:0,height:0}),this.cropped=!1,this.renderCropBox(),this.limitCanvas(!0,!0),this.renderCanvas(),$(this.dragBox,_t),z(this.cropBox,R)),this},replace:function(t){var i=arguments.length>1&&arguments[1]!==void 0&&arguments[1];return!this.disabled&&t&&(this.isImg&&(this.element.src=t),i?(this.url=t,this.image.src=t,this.ready&&(this.viewBoxImage.src=t,T(this.previews,function(e){e.getElementsByTagName("img")[0].src=t}))):(this.isImg&&(this.replaced=!0),this.options.data=null,this.uncreate(),this.load(t))),this},enable:function(){return this.ready&&this.disabled&&(this.disabled=!1,$(this.cropper,pe)),this},disable:function(){return this.ready&&!this.disabled&&(this.disabled=!0,z(this.cropper,pe)),this},destroy:function(){var t=this.element;return t[_]?(t[_]=void 0,this.isImg&&this.replaced&&(t.src=this.originalUrl),this.uncreate(),this):this},move:function(t){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:t,e=this.canvasData,n=e.left,a=e.top;return this.moveTo(Zt(t)?t:n+Number(t),Zt(i)?i:a+Number(i))},moveTo:function(t){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:t,e=this.canvasData,n=!1;return t=Number(t),i=Number(i),this.ready&&!this.disabled&&this.options.movable&&(C(t)&&(e.left=t,n=!0),C(i)&&(e.top=i,n=!0),n&&this.renderCanvas(!0)),this},zoom:function(t,i){var e=this.canvasData;return t=(t=Number(t))<0?1/(1-t):1+t,this.zoomTo(e.width*t/e.naturalWidth,null,i)},zoomTo:function(t,i,e){var n=this.options,a=this.canvasData,r=a.width,h=a.height,s=a.naturalWidth,l=a.naturalHeight;if((t=Number(t))>=0&&this.ready&&!this.disabled&&n.zoomable){var o=s*t,d=l*t;if(dt(this.element,Vt,{ratio:t,oldRatio:r/s,originalEvent:e})===!1)return this;if(e){var p=this.pointers,c=Oe(this.cropper),m=p&&Object.keys(p).length?function(f){var g=0,b=0,w=0;return T(f,function(y){var D=y.startX,M=y.startY;g+=D,b+=M,w+=1}),{pageX:g/=w,pageY:b/=w}}(p):{pageX:e.pageX,pageY:e.pageY};a.left-=(o-r)*((m.pageX-c.left-a.left)/r),a.top-=(d-h)*((m.pageY-c.top-a.top)/h)}else ht(i)&&C(i.x)&&C(i.y)?(a.left-=(o-r)*((i.x-a.left)/r),a.top-=(d-h)*((i.y-a.top)/h)):(a.left-=(o-r)/2,a.top-=(d-h)/2);a.width=o,a.height=d,this.renderCanvas(!0)}return this},rotate:function(t){return this.rotateTo((this.imageData.rotate||0)+Number(t))},rotateTo:function(t){return C(t=Number(t))&&this.ready&&!this.disabled&&this.options.rotatable&&(this.imageData.rotate=t%360,this.renderCanvas(!0,!0)),this},scaleX:function(t){var i=this.imageData.scaleY;return this.scale(t,C(i)?i:1)},scaleY:function(t){var i=this.imageData.scaleX;return this.scale(C(i)?i:1,t)},scale:function(t){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:t,e=this.imageData,n=!1;return t=Number(t),i=Number(i),this.ready&&!this.disabled&&this.options.scalable&&(C(t)&&(e.scaleX=t,n=!0),C(i)&&(e.scaleY=i,n=!0),n&&this.renderCanvas(!0,!0)),this},getData:function(){var t,i=arguments.length>0&&arguments[0]!==void 0&&arguments[0],e=this.options,n=this.imageData,a=this.canvasData,r=this.cropBoxData;if(this.ready&&this.cropped){t={x:r.left-a.left,y:r.top-a.top,width:r.width,height:r.height};var h=n.width/n.naturalWidth;if(T(t,function(o,d){t[d]=o/h}),i){var s=Math.round(t.y+t.height),l=Math.round(t.x+t.width);t.x=Math.round(t.x),t.y=Math.round(t.y),t.width=l-t.x,t.height=s-t.y}}else t={x:0,y:0,width:0,height:0};return e.rotatable&&(t.rotate=n.rotate||0),e.scalable&&(t.scaleX=n.scaleX||1,t.scaleY=n.scaleY||1),t},setData:function(t){var i=this.options,e=this.imageData,n=this.canvasData,a={};if(this.ready&&!this.disabled&&ht(t)){var r=!1;i.rotatable&&C(t.rotate)&&t.rotate!==e.rotate&&(e.rotate=t.rotate,r=!0),i.scalable&&(C(t.scaleX)&&t.scaleX!==e.scaleX&&(e.scaleX=t.scaleX,r=!0),C(t.scaleY)&&t.scaleY!==e.scaleY&&(e.scaleY=t.scaleY,r=!0)),r&&this.renderCanvas(!0,!0);var h=e.width/e.naturalWidth;C(t.x)&&(a.left=t.x*h+n.left),C(t.y)&&(a.top=t.y*h+n.top),C(t.width)&&(a.width=t.width*h),C(t.height)&&(a.height=t.height*h),this.setCropBoxData(a)}return this},getContainerData:function(){return this.ready?E({},this.containerData):{}},getImageData:function(){return this.sized?E({},this.imageData):{}},getCanvasData:function(){var t=this.canvasData,i={};return this.ready&&T(["left","top","width","height","naturalWidth","naturalHeight"],function(e){i[e]=t[e]}),i},setCanvasData:function(t){var i=this.canvasData,e=i.aspectRatio;return this.ready&&!this.disabled&&ht(t)&&(C(t.left)&&(i.left=t.left),C(t.top)&&(i.top=t.top),C(t.width)?(i.width=t.width,i.height=t.width/e):C(t.height)&&(i.height=t.height,i.width=t.height*e),this.renderCanvas(!0)),this},getCropBoxData:function(){var t,i=this.cropBoxData;return this.ready&&this.cropped&&(t={left:i.left,top:i.top,width:i.width,height:i.height}),t||{}},setCropBoxData:function(t){var i,e,n=this.cropBoxData,a=this.options.aspectRatio;return this.ready&&this.cropped&&!this.disabled&&ht(t)&&(C(t.left)&&(n.left=t.left),C(t.top)&&(n.top=t.top),C(t.width)&&t.width!==n.width&&(i=!0,n.width=t.width),C(t.height)&&t.height!==n.height&&(e=!0,n.height=t.height),a&&(i?n.height=n.width/a:e&&(n.width=n.height*a)),this.renderCropBox()),this},getCroppedCanvas:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(!this.ready||!window.HTMLCanvasElement)return null;var i=this.canvasData,e=function(pt,V,ut,nt){var Pe=V.aspectRatio,qi=V.naturalWidth,Vi=V.naturalHeight,je=V.rotate,Zi=je===void 0?0:je,Ue=V.scaleX,Gi=Ue===void 0?1:Ue,$e=V.scaleY,Fi=$e===void 0?1:$e,qe=ut.aspectRatio,Ki=ut.naturalWidth,Qi=ut.naturalHeight,Ve=nt.fillColor,Ji=Ve===void 0?"transparent":Ve,Ze=nt.imageSmoothingEnabled,ta=Ze===void 0||Ze,Ge=nt.imageSmoothingQuality,ea=Ge===void 0?"low":Ge,Fe=nt.maxWidth,Ke=Fe===void 0?1/0:Fe,Qe=nt.maxHeight,Je=Qe===void 0?1/0:Qe,ti=nt.minWidth,ei=ti===void 0?0:ti,ii=nt.minHeight,ai=ii===void 0?0:ii,Tt=document.createElement("canvas"),j=Tt.getContext("2d"),ni=K({aspectRatio:qe,width:Ke,height:Je}),ri=K({aspectRatio:qe,width:ei,height:ai},"cover"),Qt=Math.min(ni.width,Math.max(ri.width,Ki)),Jt=Math.min(ni.height,Math.max(ri.height,Qi)),oi=K({aspectRatio:Pe,width:Ke,height:Je}),si=K({aspectRatio:Pe,width:ei,height:ai},"cover"),hi=Math.min(oi.width,Math.max(si.width,qi)),li=Math.min(oi.height,Math.max(si.height,Vi)),ia=[-hi/2,-li/2,hi,li];return Tt.width=lt(Qt),Tt.height=lt(Jt),j.fillStyle=Ji,j.fillRect(0,0,Qt,Jt),j.save(),j.translate(Qt/2,Jt/2),j.rotate(Zi*Math.PI/180),j.scale(Gi,Fi),j.imageSmoothingEnabled=ta,j.imageSmoothingQuality=ea,j.drawImage.apply(j,[pt].concat(se(ia.map(function(aa){return Math.floor(lt(aa))})))),j.restore(),Tt}(this.image,this.imageData,i,t);if(!this.cropped)return e;var n=this.getData(t.rounded),a=n.x,r=n.y,h=n.width,s=n.height,l=e.width/Math.floor(i.naturalWidth);l!==1&&(a*=l,r*=l,h*=l,s*=l);var o=h/s,d=K({aspectRatio:o,width:t.maxWidth||1/0,height:t.maxHeight||1/0}),p=K({aspectRatio:o,width:t.minWidth||0,height:t.minHeight||0},"cover"),c=K({aspectRatio:o,width:t.width||(l!==1?e.width:h),height:t.height||(l!==1?e.height:s)}),m=c.width,f=c.height;m=Math.min(d.width,Math.max(p.width,m)),f=Math.min(d.height,Math.max(p.height,f));var g=document.createElement("canvas"),b=g.getContext("2d");g.width=lt(m),g.height=lt(f),b.fillStyle=t.fillColor||"transparent",b.fillRect(0,0,m,f);var w=t.imageSmoothingEnabled,y=w===void 0||w,D=t.imageSmoothingQuality;b.imageSmoothingEnabled=y,D&&(b.imageSmoothingQuality=D);var M,u,x,k,Y,N,S=e.width,Q=e.height,W=a,O=r;W<=-h||W>S?(W=0,M=0,x=0,Y=0):W<=0?(x=-W,W=0,Y=M=Math.min(S,h+W)):W<=S&&(x=0,Y=M=Math.min(h,S-W)),M<=0||O<=-s||O>Q?(O=0,u=0,k=0,N=0):O<=0?(k=-O,O=0,N=u=Math.min(Q,s+O)):O<=Q&&(k=0,N=u=Math.min(s,Q-O));var Dt=[W,O,M,u];if(Y>0&&N>0){var at=m/h;Dt.push(x*at,k*at,Y*at,N*at)}return b.drawImage.apply(b,[e].concat(se(Dt.map(function(pt){return Math.floor(lt(pt))})))),g},setAspectRatio:function(t){var i=this.options;return this.disabled||Zt(t)||(i.aspectRatio=Math.max(0,t)||NaN,this.ready&&(this.initCropBox(),this.cropped&&this.renderCropBox())),this},setDragMode:function(t){var i=this.options,e=this.dragBox,n=this.face;if(this.ready&&!this.disabled){var a=t===Pt,r=i.movable&&t===me;t=a||r?t:ge,i.dragMode=t,Ct(e,xt,t),ct(e,It,a),ct(e,Xt,r),i.cropBoxMovable||(Ct(n,xt,t),ct(n,It,a),ct(n,Xt,r))}return this}},$i=U.Cropper,We=function(){function t(a){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(function(h,s){if(!(h instanceof s))throw new TypeError("Cannot call a class as a function")}(this,t),!a||!Oi.test(a.tagName))throw new Error("The first argument is required and must be an <img> or <canvas> element.");this.element=a,this.options=E({},De,ht(r)&&r),this.cropped=!1,this.disabled=!1,this.pointers={},this.ready=!1,this.reloading=!1,this.replaced=!1,this.sized=!1,this.sizing=!1,this.init()}var i,e,n;return i=t,e=[{key:"init",value:function(){var a,r=this.element,h=r.tagName.toLowerCase();if(!r[_]){if(r[_]=this,h==="img"){if(this.isImg=!0,a=r.getAttribute("src")||"",this.originalUrl=a,!a)return;a=r.src}else h==="canvas"&&window.HTMLCanvasElement&&(a=r.toDataURL());this.load(a)}}},{key:"load",value:function(a){var r=this;if(a){this.url=a,this.imageData={};var h=this.element,s=this.options;if(s.rotatable||s.scalable||(s.checkOrientation=!1),s.checkOrientation&&window.ArrayBuffer)if(_i.test(a))Ei.test(a)?this.read((l=a.replace(Ai,""),o=atob(l),d=new ArrayBuffer(o.length),T(p=new Uint8Array(d),function(f,g){p[g]=o.charCodeAt(g)}),d)):this.clone();else{var l,o,d,p,c=new XMLHttpRequest,m=this.clone.bind(this);this.reloading=!0,this.xhr=c,c.onabort=m,c.onerror=m,c.ontimeout=m,c.onprogress=function(){c.getResponseHeader("content-type")!==Me&&c.abort()},c.onload=function(){r.read(c.response)},c.onloadend=function(){r.reloading=!1,r.xhr=null},s.checkCrossOrigin&&Te(a)&&h.crossOrigin&&(a=ze(a)),c.open("GET",a,!0),c.responseType="arraybuffer",c.withCredentials=h.crossOrigin==="use-credentials",c.send()}else this.clone()}}},{key:"read",value:function(a){var r=this.options,h=this.imageData,s=Yi(a),l=0,o=1,d=1;if(s>1){this.url=function(c,m){for(var f=[],g=new Uint8Array(c);g.length>0;)f.push(Se.apply(null,Be(g.subarray(0,8192)))),g=g.subarray(8192);return"data:".concat(m,";base64,").concat(btoa(f.join("")))}(a,Me);var p=function(c){var m=0,f=1,g=1;switch(c){case 2:f=-1;break;case 3:m=-180;break;case 4:g=-1;break;case 5:m=90,g=-1;break;case 6:m=90;break;case 7:m=90,f=-1;break;case 8:m=-90}return{rotate:m,scaleX:f,scaleY:g}}(s);l=p.rotate,o=p.scaleX,d=p.scaleY}r.rotatable&&(h.rotate=l),r.scalable&&(h.scaleX=o,h.scaleY=d),this.clone()}},{key:"clone",value:function(){var a=this.element,r=this.url,h=a.crossOrigin,s=r;this.options.checkCrossOrigin&&Te(r)&&(h||(h="anonymous"),s=ze(r)),this.crossOrigin=h,this.crossOriginUrl=s;var l=document.createElement("img");h&&(l.crossOrigin=h),l.src=s||r,l.alt=a.alt||"The image to crop",this.image=l,l.onload=this.start.bind(this),l.onerror=this.stop.bind(this),z(l,ue),a.parentNode.insertBefore(l,a.nextSibling)}},{key:"start",value:function(){var a=this,r=this.image;r.onload=null,r.onerror=null,this.sizing=!0;var h=U.navigator&&/(?:iPad|iPhone|iPod).*?AppleWebKit/i.test(U.navigator.userAgent),s=function(d,p){E(a.imageData,{naturalWidth:d,naturalHeight:p,aspectRatio:d/p}),a.initialImageData=E({},a.imageData),a.sizing=!1,a.sized=!0,a.build()};if(!r.naturalWidth||h){var l=document.createElement("img"),o=document.body||document.documentElement;this.sizingImage=l,l.onload=function(){s(l.width,l.height),h||o.removeChild(l)},l.src=r.src,h||(l.style.cssText="left:0;max-height:none!important;max-width:none!important;min-height:0!important;min-width:0!important;opacity:0;position:absolute;top:0;z-index:-1;",o.appendChild(l))}else s(r.naturalWidth,r.naturalHeight)}},{key:"stop",value:function(){var a=this.image;a.onload=null,a.onerror=null,a.parentNode.removeChild(a),this.image=null}},{key:"build",value:function(){if(this.sized&&!this.ready){var a=this.element,r=this.options,h=this.image,s=a.parentNode,l=document.createElement("div");l.innerHTML='<div class="cropper-container" touch-action="none"><div class="cropper-wrap-box"><div class="cropper-canvas"></div></div><div class="cropper-drag-box"></div><div class="cropper-crop-box"><span class="cropper-view-box"></span><span class="cropper-dashed dashed-h"></span><span class="cropper-dashed dashed-v"></span><span class="cropper-center"></span><span class="cropper-face"></span><span class="cropper-line line-e" data-cropper-action="e"></span><span class="cropper-line line-n" data-cropper-action="n"></span><span class="cropper-line line-w" data-cropper-action="w"></span><span class="cropper-line line-s" data-cropper-action="s"></span><span class="cropper-point point-e" data-cropper-action="e"></span><span class="cropper-point point-n" data-cropper-action="n"></span><span class="cropper-point point-w" data-cropper-action="w"></span><span class="cropper-point point-s" data-cropper-action="s"></span><span class="cropper-point point-ne" data-cropper-action="ne"></span><span class="cropper-point point-nw" data-cropper-action="nw"></span><span class="cropper-point point-sw" data-cropper-action="sw"></span><span class="cropper-point point-se" data-cropper-action="se"></span></div></div>';var o=l.querySelector(".".concat(_,"-container")),d=o.querySelector(".".concat(_,"-canvas")),p=o.querySelector(".".concat(_,"-drag-box")),c=o.querySelector(".".concat(_,"-crop-box")),m=c.querySelector(".".concat(_,"-face"));this.container=s,this.cropper=o,this.canvas=d,this.dragBox=p,this.cropBox=c,this.viewBox=o.querySelector(".".concat(_,"-view-box")),this.face=m,d.appendChild(h),z(a,R),s.insertBefore(o,a.nextSibling),$(h,ue),this.initPreview(),this.bind(),r.initialAspectRatio=Math.max(0,r.initialAspectRatio)||NaN,r.aspectRatio=Math.max(0,r.aspectRatio)||NaN,r.viewMode=Math.max(0,Math.min(3,Math.round(r.viewMode)))||0,z(c,R),r.guides||z(c.getElementsByClassName("".concat(_,"-dashed")),R),r.center||z(c.getElementsByClassName("".concat(_,"-center")),R),r.background&&z(o,"".concat(_,"-bg")),r.highlight||z(m,ki),r.cropBoxMovable&&(z(m,Xt),Ct(m,xt,Ht)),r.cropBoxResizable||(z(c.getElementsByClassName("".concat(_,"-line")),R),z(c.getElementsByClassName("".concat(_,"-point")),R)),this.render(),this.ready=!0,this.setDragMode(r.dragMode),r.autoCrop&&this.crop(),this.setData(r.data),L(r.ready)&&H(a,ye,r.ready,{once:!0}),dt(a,ye)}}},{key:"unbuild",value:function(){if(this.ready){this.ready=!1,this.unbind(),this.resetPreview();var a=this.cropper.parentNode;a&&a.removeChild(this.cropper),$(this.element,R)}}},{key:"uncreate",value:function(){this.ready?(this.unbuild(),this.ready=!1,this.cropped=!1):this.sizing?(this.sizingImage.onload=null,this.sizing=!1,this.sized=!1):this.reloading?(this.xhr.onabort=null,this.xhr.abort()):this.image&&this.stop()}}],n=[{key:"noConflict",value:function(){return window.Cropper=$i,t}},{key:"setDefaults",value:function(a){E(De,ht(a)&&a)}}],e&&oe(i.prototype,e),n&&oe(i,n),Object.defineProperty(i,"prototype",{writable:!1}),t}();E(We.prototype,Hi,Ii,Xi,Pi,ji,Ui);let Ne,Re,Le,Ae,Ye,He,Ie,Xe;Ne=["alt","crossorigin","src"],Re=mt({name:"Cropper",__name:"Cropper",props:{src:X.string.def(""),alt:X.string.def(""),circled:X.bool.def(!1),realTimePreview:X.bool.def(!0),height:X.string.def("360px"),crossorigin:{type:String,default:void 0},imageStyle:{type:Object,default:()=>({})},options:{type:Object,default:()=>({})}},emits:["cropend","ready","cropendError"],setup(t,{emit:i}){const e={aspectRatio:1,zoomable:!0,zoomOnTouch:!0,zoomOnWheel:!0,cropBoxMovable:!0,cropBoxResizable:!0,toggleDragModeOnDblclick:!0,autoCrop:!0,background:!0,highlight:!0,center:!0,responsive:!0,restore:!0,checkCrossOrigin:!0,checkOrientation:!0,scalable:!0,modal:!0,guides:!0,movable:!0,rotatable:!0},n=t,a=i,r=la(),h=I(),s=I(),l=I(!1),{getPrefixCls:o}=ee(),d=o("cropper-image"),p=ca(g,80),c=rt(()=>({height:n.height,maxWidth:"100%",...n.imageStyle})),m=rt(()=>[d,r.class,{[`${d}--circled`]:n.circled}]),f=rt(()=>({height:`${n.height}`.replace(/px/,"")+"px"}));function g(){n.realTimePreview&&function(){if(!s.value)return;let b=s.value.getData();(n.circled?function(){const w=s.value.getCroppedCanvas(),y=document.createElement("canvas"),D=y.getContext("2d"),M=w.width,u=w.height;return y.width=M,y.height=u,D.imageSmoothingEnabled=!0,D.drawImage(w,0,0,M,u),D.globalCompositeOperation="destination-in",D.beginPath(),D.arc(M/2,u/2,Math.min(M,u)/2,0,2*Math.PI,!0),D.fill(),y}():s.value.getCroppedCanvas()).toBlob(w=>{if(!w)return;let y=new FileReader;y.readAsDataURL(w),y.onloadend=D=>{var M;a("cropend",{imgBase64:((M=D.target)==null?void 0:M.result)??"",imgInfo:b})},y.onerror=()=>{a("cropendError")}},"image/png")}()}return da(async function(){const b=v(h);b&&(s.value=new We(b,{...e,ready:()=>{l.value=!0,g(),a("ready",s.value)},crop(){p()},zoom(){p()},cropmove(){p()},...n.options}))}),pa(()=>{var b;(b=s.value)==null||b.destroy()}),(b,w)=>(q(),gt("div",{class:Z(v(m)),style:fi(v(f))},[ua(ot("img",{ref_key:"imgElRef",ref:h,alt:t.alt,crossorigin:t.crossorigin,src:t.src,style:fi(v(c))},null,12,Ne),[[ma,v(l)]])],6))}}),Le=Wt(Re,[["__file","E:/newCode/GYZX-UI-ADMIN/src/components/Cropper/src/Cropper.vue"]]),Ae=["alt","src"],Ye=mt({name:"CopperModal",__name:"CopperModal",props:{srcValue:X.string.def(""),circled:X.bool.def(!0)},emits:["uploadSuccess"],setup(t,{expose:i,emit:e}){const n=t,a=e,{t:r}=vi.useI18n(),{getPrefixCls:h}=ee(),s=h("cropper-am"),l=I(n.srcValue),o=I(""),d=I(),p=I(!1);let c="",m=1,f=1;function g(M){const u=new FileReader;return u.readAsDataURL(M),l.value="",o.value="",u.onload=function(x){var k;l.value=((k=x.target)==null?void 0:k.result)??"",c=M.name},!1}function b({imgBase64:M}){o.value=M}function w(M){d.value=M}function y(M,u){var x,k;M==="scaleX"&&(m=u=m===-1?1:-1),M==="scaleY"&&(f=u=f===-1?1:-1),(k=(x=d==null?void 0:d.value)==null?void 0:x[M])==null||k.call(x,u)}async function D(){const M=(u=>{const x=u.split(","),k=x[0].match(/:(.*?);/)[1],Y=window.atob(x[1]);let N=Y.length;const S=new Uint8Array(N);for(;N--;)S[N]=Y.charCodeAt(N);return new Blob([S],{type:k})})(o.value);a("uploadSuccess",{source:o.value,data:M,filename:c})}return i({openModal:function(){p.value=!0},closeModal:function(){p.value=!1}}),(M,u)=>{const x=Ba,k=fa,Y=va,N=Mi,S=yi,Q=wi,W=Da;return q(),gt("div",null,[B(W,{modelValue:v(p),"onUpdate:modelValue":u[7]||(u[7]=O=>ga(p)?p.value=O:null),canFullscreen:!1,title:v(r)("cropper.modalTitle"),maxHeight:"380px",width:"800px"},{footer:A(()=>[B(Q,{type:"primary",onClick:D},{default:A(()=>[te(bi(v(r)("cropper.okText")),1)]),_:1})]),default:A(()=>[ot("div",{class:Z(v(s))},[ot("div",{class:Z(`${v(s)}-left`)},[ot("div",{class:Z(`${v(s)}-cropper`)},[v(l)?(q(),Nt(v(Le),{key:0,circled:t.circled,src:v(l),height:"300px",onCropend:b,onReady:w},null,8,["circled","src"])):ft("",!0)],2),ot("div",{class:Z(`${v(s)}-toolbar`)},[B(Y,{beforeUpload:g,fileList:[],accept:"image/*"},{default:A(()=>[B(k,{content:v(r)("cropper.selectImage"),placement:"bottom"},{default:A(()=>[B(x,{preIcon:"ant-design:upload-outlined",type:"primary"})]),_:1},8,["content"])]),_:1}),B(N,null,{default:A(()=>[B(k,{content:v(r)("cropper.btn_reset"),placement:"bottom"},{default:A(()=>[B(x,{disabled:!v(l),preIcon:"ant-design:reload-outlined",size:"small",type:"primary",onClick:u[0]||(u[0]=O=>y("reset"))},null,8,["disabled"])]),_:1},8,["content"]),B(k,{content:v(r)("cropper.btn_rotate_left"),placement:"bottom"},{default:A(()=>[B(x,{disabled:!v(l),preIcon:"ant-design:rotate-left-outlined",size:"small",type:"primary",onClick:u[1]||(u[1]=O=>y("rotate",-45))},null,8,["disabled"])]),_:1},8,["content"]),B(k,{content:v(r)("cropper.btn_rotate_right"),placement:"bottom"},{default:A(()=>[B(x,{disabled:!v(l),preIcon:"ant-design:rotate-right-outlined",size:"small",type:"primary",onClick:u[2]||(u[2]=O=>y("rotate",45))},null,8,["disabled"])]),_:1},8,["content"]),B(k,{content:v(r)("cropper.btn_scale_x"),placement:"bottom"},{default:A(()=>[B(x,{disabled:!v(l),preIcon:"vaadin:arrows-long-h",size:"small",type:"primary",onClick:u[3]||(u[3]=O=>y("scaleX"))},null,8,["disabled"])]),_:1},8,["content"]),B(k,{content:v(r)("cropper.btn_scale_y"),placement:"bottom"},{default:A(()=>[B(x,{disabled:!v(l),preIcon:"vaadin:arrows-long-v",size:"small",type:"primary",onClick:u[4]||(u[4]=O=>y("scaleY"))},null,8,["disabled"])]),_:1},8,["content"]),B(k,{content:v(r)("cropper.btn_zoom_in"),placement:"bottom"},{default:A(()=>[B(x,{disabled:!v(l),preIcon:"ant-design:zoom-in-outlined",size:"small",type:"primary",onClick:u[5]||(u[5]=O=>y("zoom",.1))},null,8,["disabled"])]),_:1},8,["content"]),B(k,{content:v(r)("cropper.btn_zoom_out"),placement:"bottom"},{default:A(()=>[B(x,{disabled:!v(l),preIcon:"ant-design:zoom-out-outlined",size:"small",type:"primary",onClick:u[6]||(u[6]=O=>y("zoom",-.1))},null,8,["disabled"])]),_:1},8,["content"])]),_:1})],2)],2),ot("div",{class:Z(`${v(s)}-right`)},[ot("div",{class:Z(`${v(s)}-preview`)},[v(o)?(q(),gt("img",{key:0,alt:v(r)("cropper.preview"),src:v(o)},null,8,Ae)):ft("",!0)],2),v(o)?(q(),gt("div",{key:0,class:Z(`${v(s)}-group`)},[B(S,{src:v(o),size:"large"},null,8,["src"]),B(S,{size:48,src:v(o)},null,8,["src"]),B(S,{size:64,src:v(o)},null,8,["src"]),B(S,{size:80,src:v(o)},null,8,["src"])],2)):ft("",!0)],2)],2)]),_:1},8,["modelValue","title"])])}}}),He=Wt(Ye,[["__file","E:/newCode/GYZX-UI-ADMIN/src/components/Cropper/src/CopperModal.vue"]]),Ie=Wt(mt({name:"CropperAvatar",__name:"CropperAvatar",props:{width:X.string.def("200px"),value:X.string.def(""),showBtn:X.bool.def(!0),btnText:X.string.def("")},emits:["update:value","change"],setup(t,{expose:i,emit:e}){const n=t,a=e,r=I(n.value),{getPrefixCls:h}=ee(),s=h("cropper-avatar"),l=Oa(),{t:o}=vi.useI18n(),d=I();function p({source:m,data:f,filename:g}){r.value=m,a("change",{source:m,data:f,filename:g}),l.success(o("cropper.uploadSuccess"))}function c(){d.value.openModal()}return ui(()=>{r.value=n.value}),ba(()=>r.value,m=>{a("update:value",m)}),i({open:c,close:function(){d.value.closeModal()}}),(m,f)=>{const g=yi,b=wi;return q(),gt("div",{class:"user-info-head",onClick:f[1]||(f[1]=w=>c())},[v(r)?(q(),Nt(g,{key:0,src:v(r),alt:"avatar",class:"img-circle img-lg"},null,8,["src"])):ft("",!0),v(r)?ft("",!0):(q(),Nt(g,{key:1,src:v(Ea),alt:"avatar",class:"img-circle img-lg"},null,8,["src"])),t.showBtn?(q(),Nt(b,{key:2,class:Z(`${v(s)}-upload-btn`),onClick:f[0]||(f[0]=w=>c())},{default:A(()=>[te(bi(t.btnText?t.btnText:v(o)("cropper.selectImage")),1)]),_:1},8,["class"])):ft("",!0),B(He,{ref_key:"cropperModelRef",ref:d,srcValue:v(r),onUploadSuccess:p},null,8,["srcValue"])])}}}),[["__scopeId","data-v-34729f3a"],["__file","E:/newCode/GYZX-UI-ADMIN/src/components/Cropper/src/CropperAvatar.vue"]]),Xe={class:"change-avatar"},xi=Wt(mt({name:"UserAvatar",__name:"UserAvatar",props:{img:X.string.def("")},setup(t){const i=wa(),e=I(),n=async({data:a})=>{const r=await xa({avatarFile:a});e.value.close(),i.setUserAvatarAction(r.data)};return(a,r)=>(q(),gt("div",Xe,[B(v(Ie),{ref_key:"cropperRef",ref:e,btnProps:{preIcon:"ant-design:cloud-upload-outlined"},showBtn:!1,value:t.img,width:"120px",onChange:n},null,8,["value"])]))}}),[["__scopeId","data-v-d3692dbc"],["__file","E:/newCode/GYZX-UI-ADMIN/src/views/Profile/components/UserAvatar.vue"]])});export{za as __tla,xi as default};
