import{d as M,ah as t,ct as j,r as F,cu as W,o as s,c as l,f as r,w as A,a as i,S as G,g as p,aK as S,bm as K,F as L,t as _,a5 as n,aS as N,i as P,C as R,_ as X,__tla as Y}from"./index-f0743f71.js";import{c as Z,__tla as H}from"./index-4baae72c.js";import{u as J,__tla as O}from"./useUpload-27a6f734.js";import{u as Q,__tla as aa}from"./useMessage-75a00a06.js";let T,ea=Promise.all([(()=>{try{return Y}catch{}})(),(()=>{try{return H}catch{}})(),(()=>{try{return O}catch{}})(),(()=>{try{return aa}catch{}})()]).then(async()=>{let h,f,g,y,b,v,w;h={class:"upload-box"},f=["src"],g={key:0},y={key:0},b={key:0},v={key:1,class:"upload-empty"},w={class:"el-upload__tip"},T=X(M({name:"UploadImg",__name:"UploadImg",props:{modelValue:t.string.def(""),drag:t.bool.def(!0),disabled:t.bool.def(!1),fileSize:t.number.def(5),fileType:t.array.def(["image/jpeg","image/png","image/gif"]),height:t.string.def("150px"),width:t.string.def("150px"),borderradius:t.string.def("8px"),showDelete:t.bool.def(!0),showBtnText:t.bool.def(!0)},emits:["update:modelValue"],setup(a,{emit:V}){j(e=>({"57417a1d-width":a.width,"57417a1d-height":a.height,"57417a1d-borderradius":a.borderradius}));const u=a,{t:m}=P(),c=Q(),k=F("id-"+W()),x=V,z=()=>{x("update:modelValue","")},{uploadUrl:C,httpRequest:U}=J(),q=()=>{const e=document.querySelector(`#${k.value} .el-upload__input`);e&&e.dispatchEvent(new MouseEvent("click"))},B=e=>{const o=e.size/1024/1024<u.fileSize,d=u.fileType;return d.includes(e.type)||c.notifyWarning("\u4E0A\u4F20\u56FE\u7247\u4E0D\u7B26\u5408\u6240\u9700\u7684\u683C\u5F0F\uFF01"),o||c.notifyWarning(`\u4E0A\u4F20\u56FE\u7247\u5927\u5C0F\u4E0D\u80FD\u8D85\u8FC7 ${u.fileSize}M\uFF01`),d.includes(e.type)&&o},E=e=>{c.success("\u4E0A\u4F20\u6210\u529F"),x("update:modelValue",e.data)},$=()=>{c.notifyError("\u56FE\u7247\u4E0A\u4F20\u5931\u8D25\uFF0C\u8BF7\u60A8\u91CD\u65B0\u4E0A\u4F20\uFF01")};return(e,o)=>{const d=R,D=K;return s(),l("div",h,[r(D,{id:i(k),accept:a.fileType.join(","),action:i(C),"before-upload":B,class:G(["upload",a.drag?"no-border":""]),drag:a.drag,multiple:!1,"on-error":$,"on-success":E,"show-file-list":!1,"http-request":i(U)},{default:A(()=>[a.modelValue?(s(),l(L,{key:0},[p("img",{src:a.modelValue,class:"upload-image"},null,8,f),p("div",{class:"upload-handle",onClick:o[1]||(o[1]=N(()=>{},["stop"]))},[a.disabled?n("",!0):(s(),l("div",{key:0,class:"handle-icon",onClick:q},[r(d,{icon:"ep:edit"}),a.showBtnText?(s(),l("span",g,_(i(m)("action.edit")),1)):n("",!0)])),p("div",{class:"handle-icon",onClick:o[0]||(o[0]=ta=>{return I=a.modelValue,void Z({zIndex:9999999,urlList:[I]});var I})},[r(d,{icon:"ep:zoom-in"}),a.showBtnText?(s(),l("span",y,_(i(m)("action.detail")),1)):n("",!0)]),a.showDelete&&!a.disabled?(s(),l("div",{key:1,class:"handle-icon",onClick:z},[r(d,{icon:"ep:delete"}),a.showBtnText?(s(),l("span",b,_(i(m)("action.del")),1)):n("",!0)])):n("",!0)])],64)):(s(),l("div",v,[S(e.$slots,"empty",{},()=>[r(d,{icon:"ep:plus"})],!0)]))]),_:3},8,["id","accept","action","class","drag","http-request"]),p("div",w,[S(e.$slots,"tip",{},void 0,!0)])])}}}),[["__scopeId","data-v-57417a1d"],["__file","E:/newCode/GYZX-UI-ADMIN/src/components/UploadFile/src/UploadImg.vue"]])});export{T as _,ea as __tla};
