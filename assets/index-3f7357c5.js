import{d as $,u as z,C as G,r as s,p as H,w as J,a,o as S,q as I,e as i,b as l,j as d,h as T,$ as K,k as L,ao as h,ap as k,aq as M,ar as P,l as O,m as Q,A as W,y as X,B as Y,v as Z,__tla as aa}from"./index-34f06ebd.js";import{_ as ta,__tla as ra}from"./ContentWrap.vue_vue_type_script_setup_true_lang-80915c85.js";import{u as ea,__tla as _a}from"./tagsView-0be307a7.js";import{g as la,c as oa,u as ca,__tla as ia}from"./spu-7528f5a7.js";import{_ as sa,__tla as ma}from"./InfoForm.vue_vue_type_script_setup_true_lang-566d9699.js";import{_ as ua,__tla as na}from"./DescriptionForm.vue_vue_type_script_setup_true_lang-490474e3.js";import{_ as pa,__tla as fa}from"./OtherForm.vue_vue_type_script_setup_true_lang-47dd71cb.js";import{_ as da,__tla as ya}from"./SkuForm.vue_vue_type_script_setup_true_lang-fd3d8c6a.js";import{_ as va,__tla as ha}from"./DeliveryForm.vue_vue_type_script_setup_true_lang-29be64e7.js";import{u as ka,__tla as Pa}from"./useMessage-7a5ab7ef.js";import{__tla as ga}from"./index-460c50ff.js";import{__tla as Ba}from"./UploadImgs-1bb9a3a3.js";import{__tla as Na}from"./UploadImgs.vue_vue_type_style_index_0_scoped_78c552d7_lang-81992fa6.js";import{__tla as wa}from"./el-image-viewer-331eba6f.js";import{__tla as Da}from"./useUpload-76a6f89f.js";import{__tla as Fa}from"./index-176464f7.js";import"./_plugin-vue_export-helper-1b428a4d.js";import{__tla as Ua}from"./UploadImg-5952b4f4.js";import{__tla as ba}from"./index-9ab6e3b3.js";import"./tree-82bb3b99.js";import{__tla as Ca}from"./category-d1626b05.js";import{__tla as Ra}from"./brand-b783a2ff.js";import{__tla as Sa}from"./formRules-ecd4de8b.js";import{__tla as Ia}from"./style.css_vue_type_style_index_0_src_true_lang-6005f6aa.js";import{__tla as Ta}from"./index-04c10e0e.js";import{__tla as Va}from"./SkuList.vue_vue_type_script_setup_true_lang-8e18adf3.js";import{__tla as qa}from"./el-image-a5cf0b35.js";import{__tla as Ea}from"./UploadFile.vue_vue_type_style_index_0_scoped_3311e906_lang-748505e2.js";import{__tla as ja}from"./ProductAttributes.vue_vue_type_script_setup_true_lang-91ae793b.js";import{__tla as xa}from"./el-text-b3569e32.js";import{__tla as Aa}from"./property-3518a151.js";import{__tla as $a}from"./ProductPropertyAddForm.vue_vue_type_script_setup_true_lang-41185899.js";import{__tla as za}from"./Dialog.vue_vue_type_style_index_0_lang-08560286.js";import{__tla as Ga}from"./index-29a2d582.js";import{__tla as Ha}from"./dict-e142e39a.js";import"./constants-99751ef9.js";let V,Ja=Promise.all([(()=>{try{return aa}catch{}})(),(()=>{try{return ra}catch{}})(),(()=>{try{return _a}catch{}})(),(()=>{try{return ia}catch{}})(),(()=>{try{return ma}catch{}})(),(()=>{try{return na}catch{}})(),(()=>{try{return fa}catch{}})(),(()=>{try{return ya}catch{}})(),(()=>{try{return ha}catch{}})(),(()=>{try{return Pa}catch{}})(),(()=>{try{return ga}catch{}})(),(()=>{try{return Ba}catch{}})(),(()=>{try{return Na}catch{}})(),(()=>{try{return wa}catch{}})(),(()=>{try{return Da}catch{}})(),(()=>{try{return Fa}catch{}})(),(()=>{try{return Ua}catch{}})(),(()=>{try{return ba}catch{}})(),(()=>{try{return Ca}catch{}})(),(()=>{try{return Ra}catch{}})(),(()=>{try{return Sa}catch{}})(),(()=>{try{return Ia}catch{}})(),(()=>{try{return Ta}catch{}})(),(()=>{try{return Va}catch{}})(),(()=>{try{return qa}catch{}})(),(()=>{try{return Ea}catch{}})(),(()=>{try{return ja}catch{}})(),(()=>{try{return xa}catch{}})(),(()=>{try{return Aa}catch{}})(),(()=>{try{return $a}catch{}})(),(()=>{try{return za}catch{}})(),(()=>{try{return Ga}catch{}})(),(()=>{try{return Ha}catch{}})()]).then(async()=>{V=$({name:"ProductSpuForm",__name:"index",setup(Ka){const{t:B}=L(),N=ka(),{push:q,currentRoute:E}=z(),{params:w,name:j}=G(),{delView:x}=ea(),p=s(!1),r=s("info"),m=s(!1),D=s(),F=s(),U=s(),b=s(),C=s(),u=s({name:"",categoryId:void 0,keyword:"",picUrl:"",sliderPicUrls:[],introduction:"",deliveryTypes:[],deliveryTemplateId:void 0,brandId:void 0,specType:!1,subCommissionType:!1,skus:[{price:0,marketPrice:0,costPrice:0,barCode:"",picUrl:"",stock:0,weight:0,volume:0,firstBrokeragePrice:0,secondBrokeragePrice:0}],description:"",sort:0,giveIntegral:0,virtualSalesCount:0}),A=async()=>{var f,e,o,t,y;p.value=!0;try{await((f=a(D))==null?void 0:f.validate()),await((e=a(F))==null?void 0:e.validate()),await((o=a(U))==null?void 0:o.validate()),await((t=a(b))==null?void 0:t.validate()),await((y=a(C))==null?void 0:y.validate());const n=M(a(u.value));n.skus.forEach(_=>{_.name=n.name,_.price=P(_.price),_.marketPrice=P(_.marketPrice),_.costPrice=P(_.costPrice),_.firstBrokeragePrice=P(_.firstBrokeragePrice),_.secondBrokeragePrice=P(_.secondBrokeragePrice)});const v=[];n.sliderPicUrls.forEach(_=>{typeof _=="object"?v.push(_.url):v.push(_)}),n.sliderPicUrls=v;const g=n;w.id?(await ca(g),N.success(B("common.updateSuccess"))):(await oa(g),N.success(B("common.createSuccess"))),R()}finally{p.value=!1}},R=()=>{x(a(E)),q({name:"ProductSpu"})};return H(async()=>{await(async()=>{var e;j==="ProductSpuDetail"&&(m.value=!0);const f=w.id;if(f){p.value=!0;try{const o=await la(f);(e=o.skus)==null||e.forEach(t=>{m.value?(t.price=h(t.price),t.marketPrice=h(t.marketPrice),t.costPrice=h(t.costPrice),t.firstBrokeragePrice=h(t.firstBrokeragePrice),t.secondBrokeragePrice=h(t.secondBrokeragePrice)):(t.price=k(t.price),t.marketPrice=k(t.marketPrice),t.costPrice=k(t.costPrice),t.firstBrokeragePrice=k(t.firstBrokeragePrice),t.secondBrokeragePrice=k(t.secondBrokeragePrice))}),u.value=o}finally{p.value=!1}}})()}),(f,e)=>{const o=O,t=Q,y=W,n=X,v=Y,g=ta,_=Z;return J((S(),I(g,null,{default:i(()=>[l(t,{modelValue:a(r),"onUpdate:modelValue":e[5]||(e[5]=c=>d(r)?r.value=c:null)},{default:i(()=>[l(o,{label:"\u57FA\u7840\u8BBE\u7F6E",name:"info"},{default:i(()=>[l(sa,{ref_key:"infoRef",ref:D,activeName:a(r),"onUpdate:activeName":e[0]||(e[0]=c=>d(r)?r.value=c:null),"is-detail":a(m),propFormData:a(u)},null,8,["activeName","is-detail","propFormData"])]),_:1}),l(o,{label:"\u4EF7\u683C\u5E93\u5B58",name:"sku"},{default:i(()=>[l(da,{ref_key:"skuRef",ref:F,activeName:a(r),"onUpdate:activeName":e[1]||(e[1]=c=>d(r)?r.value=c:null),"is-detail":a(m),propFormData:a(u)},null,8,["activeName","is-detail","propFormData"])]),_:1}),l(o,{label:"\u7269\u6D41\u8BBE\u7F6E",name:"delivery"},{default:i(()=>[l(va,{ref_key:"deliveryRef",ref:U,activeName:a(r),"onUpdate:activeName":e[2]||(e[2]=c=>d(r)?r.value=c:null),"is-detail":a(m),propFormData:a(u)},null,8,["activeName","is-detail","propFormData"])]),_:1}),l(o,{label:"\u5546\u54C1\u8BE6\u60C5",name:"description"},{default:i(()=>[l(ua,{ref_key:"descriptionRef",ref:b,activeName:a(r),"onUpdate:activeName":e[3]||(e[3]=c=>d(r)?r.value=c:null),"is-detail":a(m),propFormData:a(u)},null,8,["activeName","is-detail","propFormData"])]),_:1}),l(o,{label:"\u5176\u5B83\u8BBE\u7F6E",name:"other"},{default:i(()=>[l(pa,{ref_key:"otherRef",ref:C,activeName:a(r),"onUpdate:activeName":e[4]||(e[4]=c=>d(r)?r.value=c:null),"is-detail":a(m),propFormData:a(u)},null,8,["activeName","is-detail","propFormData"])]),_:1})]),_:1},8,["modelValue"]),l(v,null,{default:i(()=>[l(n,{style:{float:"right"}},{default:i(()=>[a(m)?K("",!0):(S(),I(y,{key:0,loading:a(p),type:"primary",onClick:A},{default:i(()=>[T(" \u4FDD\u5B58 ")]),_:1},8,["loading"])),l(y,{onClick:R},{default:i(()=>[T("\u8FD4\u56DE")]),_:1})]),_:1})]),_:1})]),_:1})),[[_,a(p)]])}}})});export{Ja as __tla,V as default};
