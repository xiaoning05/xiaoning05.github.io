import{d as x,aQ as v,ar as _,f as t,r as c,aT as j,p as U,o as u,v as z,w as F,g as l,aw as i,a as n,c as d,F as G,q as N,t as E,aU as O,_ as Q,__tla as V}from"./index-f0743f71.js";import{e as W,__tla as X}from"./couponTemplate-9708f038.js";import{e as M,f as Z}from"./constants-99751ef9.js";import{f as R,__tla as B}from"./formatTime-e6df2ea5.js";let q,H=Promise.all([(()=>{try{return V}catch{}})(),(()=>{try{return X}catch{}})(),(()=>{try{return B}catch{}})()]).then(async()=>{let y,b,g,w,C,h,T,D,$,k,I;y=x({name:"CouponDiscount",props:{coupon:v()},setup(s){const e=s.coupon;let p=e.discountPercent+"",r=" \u6298";return e.discountType===M.PRICE.type&&(p=_(e.discountPrice),r=" \u5143"),()=>t("div",null,[t("span",{class:"text-20px font-bold"},[p]),t("span",null,[r])])}}),b=x({name:"CouponDiscountDesc",props:{coupon:v()},setup(s){const e=s.coupon,p=e.usePrice>0?`\u6EE1${_(e.usePrice)}\u5143\uFF0C`:"",r=e.discountType===M.PRICE.type?`\u51CF${_(e.discountPrice)}\u5143`:`\u6253${e.discountPercent}\u6298`;return()=>t("div",null,[t("span",null,[p]),t("span",null,[r])])}}),g=x({name:"CouponValidTerm",props:{coupon:v()},setup(s){const e=s.coupon,p=e.validityType===Z.DATE.type?`\u6709\u6548\u671F\uFF1A${R(e.validStartTime,"YYYY-MM-DD")} \u81F3 ${R(e.validEndTime,"YYYY-MM-DD")}`:`\u9886\u53D6\u540E\u7B2C ${e.fixedStartTerm} - ${e.fixedEndTerm} \u5929\u5185\u53EF\u7528`;return()=>t("div",null,[p])}}),w={key:0,class:"m-l-16px flex flex-row justify-between p-8px"},C={class:"flex flex-col justify-evenly gap-4px"},h={class:"flex flex-col justify-evenly"},T={key:1,class:"m-l-16px flex flex-row justify-between p-8px"},D={class:"flex flex-col justify-evenly gap-4px"},$={class:"flex flex-col"},k={key:2,class:"flex flex-col items-center justify-around gap-4px p-4px"},I=x({name:"CouponCard",__name:"index",props:{property:{type:Object,required:!0}},setup(s){const e=s,p=c([]);j(()=>e.property.couponIds,async()=>{var o;((o=e.property.couponIds)==null?void 0:o.length)>0&&(p.value=await W(e.property.couponIds))},{immediate:!0,deep:!0});const r=c(375),P=c(),Y=c("100%"),f=c(375);return j(()=>[e.property,r,p.value.length],()=>{f.value=(.95*r.value-e.property.space*(e.property.columns-1))/e.property.columns,Y.value=f.value*p.value.length+e.property.space*(p.value.length-1)+"px"},{immediate:!0,deep:!0}),U(()=>{var o,m;r.value=((m=(o=P.value)==null?void 0:o.wrapRef)==null?void 0:m.offsetWidth)||375}),(o,m)=>{const A=O;return u(),z(A,{class:"z-1 min-h-30px","wrap-class":"w-full",ref_key:"containerRef",ref:P},{default:F(()=>[l("div",{class:"flex flex-row text-12px",style:i({gap:`${o.property.space}px`,width:n(Y)})},[(u(!0),d(G,null,N(n(p),(a,S)=>(u(),d("div",{class:"box-content",style:i({background:o.property.bgImg?`url(${o.property.bgImg}) 100% center / 100% 100% no-repeat`:"#fff",width:`${n(f)}px`,color:o.property.textColor}),key:S},[o.property.columns===1?(u(),d("div",w,[l("div",C,[t(n(y),{coupon:a},null,8,["coupon"]),t(n(b),{coupon:a},null,8,["coupon"]),t(n(g),{coupon:a},null,8,["coupon"])]),l("div",h,[l("div",{class:"rounded-20px p-x-8px p-y-2px",style:i({color:o.property.button.color,background:o.property.button.bgColor})}," \u7ACB\u5373\u9886\u53D6 ",4)])])):o.property.columns===2?(u(),d("div",T,[l("div",D,[t(n(y),{coupon:a},null,8,["coupon"]),l("div",null,E(a.name),1)]),l("div",$,[l("div",{class:"h-full w-20px rounded-20px p-x-2px p-y-8px text-center",style:i({color:o.property.button.color,background:o.property.button.bgColor})}," \u7ACB\u5373\u9886\u53D6 ",4)])])):(u(),d("div",k,[t(n(y),{coupon:a},null,8,["coupon"]),l("div",null,E(a.name),1),l("div",{class:"rounded-20px p-x-8px p-y-2px",style:i({color:o.property.button.color,background:o.property.button.bgColor})}," \u7ACB\u5373\u9886\u53D6 ",4)]))],4))),128))],4)]),_:1},512)}}}),q=Q(I,[["__file","E:/newCode/GYZX-UI-ADMIN/src/components/DiyEditor/components/mobile/CouponCard/index.vue"]])});export{H as __tla,q as default};
