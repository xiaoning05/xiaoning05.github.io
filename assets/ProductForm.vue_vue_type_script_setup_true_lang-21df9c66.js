import{d as Y,i as Z,r as i,e as H,o as p,v as f,w as t,f as e,a,h as V,x as J,c as I,F as C,q as x,t as K,l as Q,P as W,A as X,j as $,y as ee,z as ae,ah as le,ai as te,bZ as re,k as de,D as oe,C as ue,I as se,__tla as ie}from"./index-d2088aec.js";import{_ as ce,__tla as me}from"./Dialog.vue_vue_type_style_index_0_lang-4d2024bd.js";import{E as ne,__tla as pe}from"./el-tree-select-284f702e.js";import{P as h,__tla as _e}from"./index-19a1d262.js";import{P as fe,__tla as ve}from"./index-9e7879a8.js";import{P as ye,__tla as Ve}from"./index-3908e8f3.js";import{C as he}from"./constants-99751ef9.js";import{d as be,h as ge}from"./tree-82bb3b99.js";import{a as Pe,D as we,__tla as Ue}from"./dict-999fbee6.js";import{u as ke,__tla as Ie}from"./useMessage-c5990e2c.js";let D,Ce=Promise.all([(()=>{try{return ie}catch{}})(),(()=>{try{return me}catch{}})(),(()=>{try{return pe}catch{}})(),(()=>{try{return _e}catch{}})(),(()=>{try{return ve}catch{}})(),(()=>{try{return Ve}catch{}})(),(()=>{try{return Ue}catch{}})(),(()=>{try{return Ie}catch{}})()]).then(async()=>{D=Y({name:"ProductForm",__name:"ProductForm",emits:["success"],setup(xe,{expose:q,emit:S}){const{t:v}=Z(),b=ke(),c=i(!1),g=i(""),m=i(!1),P=i(""),d=i({id:void 0,name:void 0,barCode:void 0,categoryId:void 0,unitId:void 0,status:void 0,standard:void 0,remark:void 0,expiryDay:void 0,weight:void 0,purchasePrice:void 0,salePrice:void 0,minPrice:void 0}),A=H({name:[{required:!0,message:"\u4EA7\u54C1\u540D\u79F0\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],barCode:[{required:!0,message:"\u4EA7\u54C1\u6761\u7801\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],categoryId:[{required:!0,message:"\u4EA7\u54C1\u5206\u7C7B\u7F16\u53F7\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],unitId:[{required:!0,message:"\u5355\u4F4D\u7F16\u53F7\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],status:[{required:!0,message:"\u4EA7\u54C1\u72B6\u6001\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}]}),y=i(),w=i([]),U=i([]);q({open:async(s,r)=>{if(c.value=!0,g.value=v("action."+s),P.value=s,L(),r){m.value=!0;try{d.value=await h.getProduct(r)}finally{m.value=!1}}const n=await fe.getProductCategorySimpleList();w.value=ge(n,"id","parentId"),U.value=await ye.getProductUnitSimpleList()}});const E=S,F=async()=>{await y.value.validate(),m.value=!0;try{const s=d.value;P.value==="create"?(await h.createProduct(s),b.success(v("common.createSuccess"))):(await h.updateProduct(s),b.success(v("common.updateSuccess"))),c.value=!1,E("success")}finally{m.value=!1}},L=()=>{var s;d.value={id:void 0,name:void 0,barCode:void 0,categoryId:void 0,unitId:void 0,status:he.ENABLE,standard:void 0,remark:void 0,expiryDay:void 0,weight:void 0,purchasePrice:void 0,salePrice:void 0,minPrice:void 0},(s=y.value)==null||s.resetFields()};return(s,r)=>{const n=W,o=X,u=$,N=ne,O=ee,z=ae,B=le,M=te,_=re,T=de,j=oe,k=ue,G=ce,R=se;return p(),f(G,{title:a(g),modelValue:a(c),"onUpdate:modelValue":r[13]||(r[13]=l=>Q(c)?c.value=l:null)},{footer:t(()=>[e(k,{onClick:F,type:"primary",disabled:a(m)},{default:t(()=>[V("\u786E \u5B9A")]),_:1},8,["disabled"]),e(k,{onClick:r[12]||(r[12]=l=>c.value=!1)},{default:t(()=>[V("\u53D6 \u6D88")]),_:1})]),default:t(()=>[J((p(),f(j,{ref_key:"formRef",ref:y,model:a(d),rules:a(A),"label-width":"100px"},{default:t(()=>[e(T,{gutter:20},{default:t(()=>[e(u,{span:12},{default:t(()=>[e(o,{label:"\u540D\u79F0",prop:"name"},{default:t(()=>[e(n,{modelValue:a(d).name,"onUpdate:modelValue":r[0]||(r[0]=l=>a(d).name=l),placeholder:"\u8BF7\u8F93\u5165\u540D\u79F0"},null,8,["modelValue"])]),_:1})]),_:1}),e(u,{span:12},{default:t(()=>[e(o,{label:"\u6761\u7801",prop:"barCode"},{default:t(()=>[e(n,{modelValue:a(d).barCode,"onUpdate:modelValue":r[1]||(r[1]=l=>a(d).barCode=l),placeholder:"\u8BF7\u8F93\u5165\u6761\u7801"},null,8,["modelValue"])]),_:1})]),_:1}),e(u,{span:12},{default:t(()=>[e(o,{label:"\u5206\u7C7B",prop:"categoryId"},{default:t(()=>[e(N,{modelValue:a(d).categoryId,"onUpdate:modelValue":r[2]||(r[2]=l=>a(d).categoryId=l),data:a(w),props:a(be),"check-strictly":"","default-expand-all":"",placeholder:"\u8BF7\u9009\u62E9\u5206\u7C7B",class:"w-1/1"},null,8,["modelValue","data","props"])]),_:1})]),_:1}),e(u,{span:12},{default:t(()=>[e(o,{label:"\u5355\u4F4D",prop:"unitId"},{default:t(()=>[e(z,{modelValue:a(d).unitId,"onUpdate:modelValue":r[3]||(r[3]=l=>a(d).unitId=l),clearable:"",placeholder:"\u8BF7\u9009\u62E9\u5355\u4F4D",class:"w-1/1"},{default:t(()=>[(p(!0),I(C,null,x(a(U),l=>(p(),f(O,{key:l.id,label:l.name,value:l.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1}),e(u,{span:12},{default:t(()=>[e(o,{label:"\u72B6\u6001",prop:"status"},{default:t(()=>[e(M,{modelValue:a(d).status,"onUpdate:modelValue":r[4]||(r[4]=l=>a(d).status=l)},{default:t(()=>[(p(!0),I(C,null,x(a(Pe)(a(we).COMMON_STATUS),l=>(p(),f(B,{key:l.value,label:l.value},{default:t(()=>[V(K(l.label),1)]),_:2},1032,["label"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1}),e(u,{span:12},{default:t(()=>[e(o,{label:"\u89C4\u683C",prop:"standard"},{default:t(()=>[e(n,{modelValue:a(d).standard,"onUpdate:modelValue":r[5]||(r[5]=l=>a(d).standard=l),placeholder:"\u8BF7\u8F93\u5165\u89C4\u683C"},null,8,["modelValue"])]),_:1})]),_:1}),e(u,{span:12},{default:t(()=>[e(o,{label:"\u4FDD\u8D28\u671F\u5929\u6570",prop:"expiryDay"},{default:t(()=>[e(_,{modelValue:a(d).expiryDay,"onUpdate:modelValue":r[6]||(r[6]=l=>a(d).expiryDay=l),placeholder:"\u8BF7\u8F93\u5165\u4FDD\u8D28\u671F\u5929\u6570",min:0,precision:0,class:"!w-1/1"},null,8,["modelValue"])]),_:1})]),_:1}),e(u,{span:12},{default:t(()=>[e(o,{label:"\u91CD\u91CF\uFF08kg\uFF09",prop:"weight"},{default:t(()=>[e(_,{modelValue:a(d).weight,"onUpdate:modelValue":r[7]||(r[7]=l=>a(d).weight=l),placeholder:"\u8BF7\u8F93\u5165\u91CD\u91CF\uFF08kg\uFF09",min:0,class:"!w-1/1"},null,8,["modelValue"])]),_:1})]),_:1}),e(u,{span:12},{default:t(()=>[e(o,{label:"\u91C7\u8D2D\u4EF7\u683C",prop:"purchasePrice"},{default:t(()=>[e(_,{modelValue:a(d).purchasePrice,"onUpdate:modelValue":r[8]||(r[8]=l=>a(d).purchasePrice=l),placeholder:"\u8BF7\u8F93\u5165\u91C7\u8D2D\u4EF7\u683C\uFF0C\u5355\u4F4D\uFF1A\u5143",min:0,precision:2,class:"!w-1/1"},null,8,["modelValue"])]),_:1})]),_:1}),e(u,{span:12},{default:t(()=>[e(o,{label:"\u9500\u552E\u4EF7\u683C",prop:"salePrice"},{default:t(()=>[e(_,{modelValue:a(d).salePrice,"onUpdate:modelValue":r[9]||(r[9]=l=>a(d).salePrice=l),placeholder:"\u8BF7\u8F93\u5165\u9500\u552E\u4EF7\u683C\uFF0C\u5355\u4F4D\uFF1A\u5143",min:0,precision:2,class:"!w-1/1"},null,8,["modelValue"])]),_:1})]),_:1}),e(u,{span:12},{default:t(()=>[e(o,{label:"\u6700\u4F4E\u4EF7\u683C",prop:"minPrice"},{default:t(()=>[e(_,{modelValue:a(d).minPrice,"onUpdate:modelValue":r[10]||(r[10]=l=>a(d).minPrice=l),placeholder:"\u8BF7\u8F93\u5165\u6700\u4F4E\u4EF7\u683C\uFF0C\u5355\u4F4D\uFF1A\u5143",min:0,precision:2,class:"!w-1/1"},null,8,["modelValue"])]),_:1})]),_:1}),e(u,{span:24},{default:t(()=>[e(o,{label:"\u5907\u6CE8",prop:"remark"},{default:t(()=>[e(n,{type:"textarea",modelValue:a(d).remark,"onUpdate:modelValue":r[11]||(r[11]=l=>a(d).remark=l),placeholder:"\u8BF7\u8F93\u5165\u5907\u6CE8"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1},8,["model","rules"])),[[R,a(m)]])]),_:1},8,["title","modelValue"])}}})});export{D as _,Ce as __tla};
