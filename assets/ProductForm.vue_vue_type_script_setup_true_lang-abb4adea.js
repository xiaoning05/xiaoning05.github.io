import{d as H,i as J,r as i,b as K,e as L,p as Q,o as n,v as m,w as r,f as l,a,h as P,x as W,c as y,F as V,q as U,l as Y,au as $,dX as E,P as ee,A as ae,j as le,y as te,z as re,b_ as ue,bZ as se,k as oe,D as de,C as ie,I as ne,__tla as ce}from"./index-d2088aec.js";import{_ as pe,__tla as me}from"./Dialog.vue_vue_type_style_index_0_lang-4d2024bd.js";import{a as R,D as T,__tla as _e}from"./dict-999fbee6.js";import{a as ve,c as fe,u as be,__tla as ge}from"./index-bbc28546.js";import{g as ye,__tla as Ve}from"./index-0750a816.js";import{h as Ue,d as he}from"./tree-82bb3b99.js";import{g as we,__tla as Ie}from"./index-456c5cde.js";import{u as ke,__tla as qe}from"./useMessage-c5990e2c.js";let D,Ce=Promise.all([(()=>{try{return ce}catch{}})(),(()=>{try{return me}catch{}})(),(()=>{try{return _e}catch{}})(),(()=>{try{return ge}catch{}})(),(()=>{try{return Ve}catch{}})(),(()=>{try{return Ie}catch{}})(),(()=>{try{return qe}catch{}})()]).then(async()=>{D=H({name:"CrmProductForm",__name:"ProductForm",emits:["success"],setup(Pe,{expose:F,emit:S}){const{t:v}=J(),h=ke(),c=i(!1),w=i(""),p=i(!1),I=i(""),x=K().getUser.id,t=i({id:void 0,name:void 0,no:void 0,unit:void 0,price:NaN,status:void 0,categoryId:void 0,description:void 0,ownerUserId:-1}),N=L({name:[{required:!0,message:"\u4EA7\u54C1\u540D\u79F0\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],no:[{required:!0,message:"\u4EA7\u54C1\u7F16\u7801\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],status:[{required:!0,message:"\u72B6\u6001\u4E0D\u80FD\u4E3A\u7A7A",trigger:"change"}],categoryId:[{required:!0,message:"\u4EA7\u54C1\u5206\u7C7BID\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],ownerUserId:[{required:!0,message:"\u8D1F\u8D23\u4EBA\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],price:[{required:!0,message:"\u4EF7\u683C\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}]}),_=i();F({open:async(s,u)=>{if(c.value=!0,w.value=v("action."+s),I.value=s,A(),u){p.value=!0;try{t.value=await ve(u),t.value.price=Number($(t.value.price))}finally{p.value=!1}}else t.value.ownerUserId=x}});const M=S,O=async()=>{if(_&&await _.value.validate()){p.value=!0;try{const s={...t.value,price:E(t.value.price)};I.value==="create"?(await fe(s),h.success(v("common.createSuccess"))):(await be(s),h.success(v("common.updateSuccess"))),c.value=!1,M("success")}finally{p.value=!1}}},A=()=>{var s;t.value={id:void 0,name:void 0,no:void 0,unit:void 0,price:NaN,status:void 0,categoryId:void 0,description:void 0,ownerUserId:-1},(s=_.value)==null||s.resetFields()},k=i([]),q=i([]);return Q(async()=>{const s=await ye({});k.value=Ue(s,"id","parentId"),q.value=await we()}),(s,u)=>{const f=ee,o=ae,d=le,b=te,g=re,j=ue,z=se,X=oe,Z=de,C=ie,B=pe,G=ne;return n(),m(B,{title:a(w),modelValue:a(c),"onUpdate:modelValue":u[9]||(u[9]=e=>Y(c)?c.value=e:null)},{footer:r(()=>[l(C,{onClick:O,type:"primary",disabled:a(p)},{default:r(()=>[P("\u786E \u5B9A")]),_:1},8,["disabled"]),l(C,{onClick:u[8]||(u[8]=e=>c.value=!1)},{default:r(()=>[P("\u53D6 \u6D88")]),_:1})]),default:r(()=>[W((n(),m(Z,{ref_key:"formRef",ref:_,model:a(t),rules:a(N),"label-width":"100px"},{default:r(()=>[l(X,null,{default:r(()=>[l(d,{span:12},{default:r(()=>[l(o,{label:"\u4EA7\u54C1\u540D\u79F0",prop:"name"},{default:r(()=>[l(f,{modelValue:a(t).name,"onUpdate:modelValue":u[0]||(u[0]=e=>a(t).name=e),placeholder:"\u8BF7\u8F93\u5165\u4EA7\u54C1\u540D\u79F0"},null,8,["modelValue"])]),_:1})]),_:1}),l(d,{span:12},{default:r(()=>[l(o,{label:"\u8D1F\u8D23\u4EBA",prop:"ownerUserId"},{default:r(()=>[l(g,{modelValue:a(t).ownerUserId,"onUpdate:modelValue":u[1]||(u[1]=e=>a(t).ownerUserId=e),placeholder:"\u8BF7\u9009\u62E9\u8D1F\u8D23\u4EBA",disabled:a(t).id,class:"w-1/1"},{default:r(()=>[(n(!0),y(V,null,U(a(q),e=>(n(),m(b,{key:e.id,label:e.nickname,value:e.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue","disabled"])]),_:1})]),_:1}),l(d,{span:12},{default:r(()=>[l(o,{label:"\u4EA7\u54C1\u7C7B\u578B",prop:"categoryId"},{default:r(()=>[l(j,{modelValue:a(t).categoryId,"onUpdate:modelValue":u[2]||(u[2]=e=>a(t).categoryId=e),options:a(k),props:a(he),class:"w-1/1",clearable:"",placeholder:"\u8BF7\u9009\u62E9\u4EA7\u54C1\u7C7B\u578B",filterable:""},null,8,["modelValue","options","props"])]),_:1})]),_:1}),l(d,{span:12},{default:r(()=>[l(o,{label:"\u4EA7\u54C1\u5355\u4F4D",prop:"unit"},{default:r(()=>[l(g,{modelValue:a(t).unit,"onUpdate:modelValue":u[3]||(u[3]=e=>a(t).unit=e),class:"w-1/1",placeholder:"\u8BF7\u9009\u62E9\u5355\u4F4D"},{default:r(()=>[(n(!0),y(V,null,U(a(R)(a(T).CRM_PRODUCT_UNIT),e=>(n(),m(b,{key:e.value,label:e.label,value:e.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1}),l(d,{span:12},{default:r(()=>[l(o,{label:"\u4EA7\u54C1\u7F16\u7801",prop:"no"},{default:r(()=>[l(f,{modelValue:a(t).no,"onUpdate:modelValue":u[4]||(u[4]=e=>a(t).no=e),placeholder:"\u8BF7\u8F93\u5165\u4EA7\u54C1\u7F16\u7801"},null,8,["modelValue"])]),_:1})]),_:1}),l(d,{span:12},{default:r(()=>[l(o,{label:"\u4EF7\u683C",prop:"price"},{default:r(()=>[l(z,{modelValue:a(t).price,"onUpdate:modelValue":u[5]||(u[5]=e=>a(t).price=e),placeholder:"\u8BF7\u8F93\u5165\u4EF7\u683C",min:0,precision:2,step:.1,class:"w-full!"},null,8,["modelValue"])]),_:1})]),_:1}),l(d,{span:12},{default:r(()=>[l(o,{label:"\u4EA7\u54C1\u63CF\u8FF0",prop:"description"},{default:r(()=>[l(f,{modelValue:a(t).description,"onUpdate:modelValue":u[6]||(u[6]=e=>a(t).description=e),placeholder:"\u8BF7\u8F93\u5165\u4EA7\u54C1\u63CF\u8FF0"},null,8,["modelValue"])]),_:1})]),_:1}),l(d,{span:12},{default:r(()=>[l(o,{label:"\u4E0A\u67B6\u72B6\u6001",prop:"status"},{default:r(()=>[l(g,{modelValue:a(t).status,"onUpdate:modelValue":u[7]||(u[7]=e=>a(t).status=e),placeholder:"\u8BF7\u9009\u62E9\u72B6\u6001",class:"w-1/1"},{default:r(()=>[(n(!0),y(V,null,U(a(R)(a(T).CRM_PRODUCT_STATUS),e=>(n(),m(b,{key:e.value,label:e.label,value:e.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1},8,["model","rules"])),[[G,a(p)]])]),_:1},8,["title","modelValue"])}}})});export{D as _,Ce as __tla};
