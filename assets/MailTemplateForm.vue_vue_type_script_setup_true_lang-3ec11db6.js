import{e as T,d as V,i as Y,r as i,o as A,v as H,w as _,f,a as o,h as M,x as I,l as j,C as E,I as O,__tla as R}from"./index-d5b00dc9.js";import{_ as U,__tla as N}from"./Dialog.vue_vue_type_style_index_0_lang-03cf6454.js";import{_ as q,__tla as z}from"./Form-12d0097a.js";import{g as B,c as G,u as J,__tla as K}from"./index-0a02faba.js";import{d as L,__tla as Q}from"./formatTime-9063410f.js";import{b as W,__tla as X}from"./index-eacb499d.js";import{r as e,__tla as Z}from"./formRules-290333c3.js";import{D as $,__tla as aa}from"./dict-29b94c3f.js";import{u as ea,__tla as ta}from"./useCrudSchemas-7ece6d56.js";import{u as la,__tla as ra}from"./useMessage-2288a5f2.js";let k,p,sa=Promise.all([(()=>{try{return R}catch{}})(),(()=>{try{return N}catch{}})(),(()=>{try{return z}catch{}})(),(()=>{try{return K}catch{}})(),(()=>{try{return Q}catch{}})(),(()=>{try{return X}catch{}})(),(()=>{try{return Z}catch{}})(),(()=>{try{return aa}catch{}})(),(()=>{try{return ta}catch{}})(),(()=>{try{return ra}catch{}})()]).then(async()=>{let m,h,y;m=await W(),h=T({name:[e],code:[e],accountId:[e],label:[e],content:[e],params:[e],status:[e]}),y=T([{label:"\u6A21\u677F\u7F16\u7801",field:"code",isSearch:!0},{label:"\u6A21\u677F\u540D\u79F0",field:"name",isSearch:!0},{label:"\u6A21\u677F\u6807\u9898",field:"title"},{label:"\u6A21\u677F\u5185\u5BB9",field:"content",form:{component:"Editor",componentProps:{valueHtml:"",height:200}}},{label:"\u90AE\u7BB1\u8D26\u53F7",field:"accountId",width:"200px",formatter:(D,v,u)=>{var t;return(t=m.find(n=>n.id===u))==null?void 0:t.mail},search:{show:!0,component:"Select",api:()=>m,componentProps:{optionsAlias:{labelField:"mail",valueField:"id"}}},form:{component:"Select",api:()=>m,componentProps:{optionsAlias:{labelField:"mail",valueField:"id"}}}},{label:"\u53D1\u9001\u4EBA\u540D\u79F0",field:"nickname"},{label:"\u5F00\u542F\u72B6\u6001",field:"status",isSearch:!0,dictType:$.COMMON_STATUS,dictClass:"number"},{label:"\u5907\u6CE8",field:"remark",isTable:!1},{label:"\u521B\u5EFA\u65F6\u95F4",field:"createTime",isForm:!1,formatter:L,search:{show:!0,component:"DatePicker",componentProps:{valueFormat:"YYYY-MM-DD HH:mm:ss",type:"daterange",defaultTime:[new Date("1 00:00:00"),new Date("1 23:59:59")]}}},{label:"\u64CD\u4F5C",field:"action",isForm:!1}]),{allSchemas:p}=ea(y),k=V({name:"SystemMailTemplateForm",__name:"MailTemplateForm",emits:["success"],setup(D,{expose:v,emit:u}){const{t}=Y(),n=la(),l=i(!1),b=i(""),r=i(!1),w=i(""),c=i();v({open:async(s,a)=>{if(l.value=!0,b.value=t("action."+s),w.value=s,a){r.value=!0;try{const d=await B(a);c.value.setValues(d)}finally{r.value=!1}}}});const P=u,g=async()=>{if(c&&await c.value.getElFormRef().validate()){r.value=!0;try{const s=c.value.formModel;w.value==="create"?(await G(s),n.success(t("common.createSuccess"))):(await J(s),n.success(t("common.updateSuccess"))),l.value=!1,P("success")}finally{r.value=!1}}};return(s,a)=>{const d=q,S=E,x=U,C=O;return A(),H(x,{modelValue:o(l),"onUpdate:modelValue":a[1]||(a[1]=F=>j(l)?l.value=F:null),"max-height":500,scroll:!0,title:o(b),width:800},{footer:_(()=>[f(S,{disabled:o(r),type:"primary",onClick:g},{default:_(()=>[M("\u786E \u5B9A")]),_:1},8,["disabled"]),f(S,{onClick:a[0]||(a[0]=F=>l.value=!1)},{default:_(()=>[M("\u53D6 \u6D88")]),_:1})]),default:_(()=>[I(f(d,{ref_key:"formRef",ref:c,rules:o(h),schema:o(p).formSchema},null,8,["rules","schema"]),[[C,o(r)]])]),_:1},8,["modelValue","title"])}}})});export{k as _,sa as __tla,p as a};
