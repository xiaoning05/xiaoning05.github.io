import{d as O,i as z,r as f,e as D,p as Y,L as j,o as _,c as F,f as a,w as n,h as d,x as y,v as p,a as e,a5 as G,F as P,C as H,D as Q,H as q,I as B,J,_ as X,__tla as Z}from"./index-f0743f71.js";import{_ as K,__tla as V}from"./index-cf7b3541.js";import{_ as W,__tla as $}from"./DictTag-4f08045a.js";import{d as tt,__tla as at}from"./formatTime-e6df2ea5.js";import{L,C as et,g as rt,d as lt,__tla as ot}from"./CustomerLimitConfigForm-9ee9fd1a.js";import{D as it,__tla as nt}from"./dict-4a9940b3.js";import{u as st,__tla as _t}from"./useMessage-75a00a06.js";import{__tla as ct}from"./index-8beae3df.js";import"./color-f5b6e279.js";import{__tla as mt}from"./Dialog-8f786edd.js";import{__tla as pt}from"./el-tree-select-d7a8a522.js";import{__tla as ut}from"./index-cb25e840.js";import"./tree-02f455f9.js";import{__tla as ft}from"./index-5f468446.js";let N,dt=Promise.all([(()=>{try{return Z}catch{}})(),(()=>{try{return V}catch{}})(),(()=>{try{return $}catch{}})(),(()=>{try{return at}catch{}})(),(()=>{try{return ot}catch{}})(),(()=>{try{return nt}catch{}})(),(()=>{try{return _t}catch{}})(),(()=>{try{return ct}catch{}})(),(()=>{try{return mt}catch{}})(),(()=>{try{return pt}catch{}})(),(()=>{try{return ut}catch{}})(),(()=>{try{return ft}catch{}})()]).then(async()=>{N=X(O({name:"CustomerLimitConfigList",__name:"CustomerLimitConfigList",props:{confType:{type:Number,required:!0}},setup(S){const C=st(),{t:U}=z(),{confType:w}=S,g=f(!0),T=f(0),b=f([]),s=D({pageNo:1,pageSize:10,type:w}),c=async()=>{g.value=!0;try{const o=await rt(s);b.value=o.list,T.value=o.total}finally{g.value=!1}},v=f(),k=(o,r)=>{v.value.open(o,w,r)},x=()=>{s.pageNo=1,c()};return Y(()=>{c()}),(o,r)=>{const I=H,u=Q,l=q,A=W,E=B,M=K,h=j("hasPermi"),R=J;return _(),F(P,null,[a(u,{plain:"",onClick:x},{default:n(()=>[a(I,{icon:"ep:refresh",class:"mr-5px"}),d(" \u5237\u65B0 ")]),_:1}),y((_(),p(u,{type:"primary",plain:"",onClick:r[0]||(r[0]=t=>k("create"))},{default:n(()=>[a(I,{icon:"ep:plus",class:"mr-5px"}),d(" \u65B0\u589E ")]),_:1})),[[h,["crm:customer-limit-config:create"]]]),y((_(),p(E,{data:e(b),stripe:!0,"show-overflow-tooltip":!0,class:"mt-4"},{default:n(()=>[a(l,{label:"\u7F16\u53F7",align:"center",prop:"id"}),a(l,{label:"\u89C4\u5219\u7C7B\u578B",align:"center",prop:"type"}),a(l,{label:"\u89C4\u5219\u9002\u7528\u4EBA\u7FA4",align:"center",formatter:t=>{var i;return(i=t.users)==null?void 0:i.map(m=>m.nickname).join("\uFF0C")}},null,8,["formatter"]),a(l,{label:"\u89C4\u5219\u9002\u7528\u90E8\u95E8",align:"center",formatter:t=>{var i;return(i=t.depts)==null?void 0:i.map(m=>m.name).join("\uFF0C")}},null,8,["formatter"]),a(l,{label:o.confType===e(L).CUSTOMER_QUANTITY_LIMIT?"\u62E5\u6709\u5BA2\u6237\u6570\u4E0A\u9650":"\u9501\u5B9A\u5BA2\u6237\u6570\u4E0A\u9650",align:"center",prop:"maxCount"},null,8,["label"]),o.confType===e(L).CUSTOMER_QUANTITY_LIMIT?(_(),p(l,{key:0,label:"\u6210\u4EA4\u5BA2\u6237\u662F\u5426\u5360\u7528\u62E5\u6709\u5BA2\u6237\u6570",align:"center",prop:"dealCountEnabled"},{default:n(t=>[a(A,{type:e(it).INFRA_BOOLEAN_STRING,value:t.row.dealCountEnabled},null,8,["type","value"])]),_:1})):G("",!0),a(l,{label:"\u521B\u5EFA\u65F6\u95F4",align:"center",prop:"createTime",formatter:e(tt),width:"180px"},null,8,["formatter"]),a(l,{label:"\u64CD\u4F5C",align:"center","min-width":"110",fixed:"right"},{default:n(t=>[y((_(),p(u,{link:"",type:"primary",onClick:i=>k("update",t.row.id)},{default:n(()=>[d(" \u7F16\u8F91 ")]),_:2},1032,["onClick"])),[[h,["crm:customer-limit-config:update"]]]),y((_(),p(u,{link:"",type:"danger",onClick:i=>(async m=>{try{await C.delConfirm(),await lt(m),C.success(U("common.delSuccess")),await c()}catch{}})(t.row.id)},{default:n(()=>[d(" \u5220\u9664 ")]),_:2},1032,["onClick"])),[[h,["crm:customer-limit-config:delete"]]])]),_:1})]),_:1},8,["data"])),[[R,e(g)]]),a(M,{total:e(T),page:e(s).pageNo,"onUpdate:page":r[1]||(r[1]=t=>e(s).pageNo=t),limit:e(s).pageSize,"onUpdate:limit":r[2]||(r[2]=t=>e(s).pageSize=t),onPagination:c},null,8,["total","page","limit"]),a(et,{ref_key:"formRef",ref:v,onSuccess:c},null,512)],64)}}}),[["__file","E:/newCode/GYZX-UI-ADMIN/src/views/crm/customer/limitConfig/CustomerLimitConfigList.vue"]])});export{dt as __tla,N as default};
