import{ao as x,d as M,k as N,r as _,n as R,p as S,G as L,o as d,q as y,e as l,w as V,a as e,b as t,f as Y,h as n,c as w,a0 as D,B as Z,af as F,ag as H,y as J,bX as K,C as O,v as Q,_ as T,__tla as W}from"./index-aaa5adb3.js";import{_ as $,__tla as aa}from"./ContentWrap-04d7f6d1.js";import{C as ea,__tla as la}from"./CardTitle-04f31785.js";import{u as ta,__tla as sa}from"./useMessage-873da1e2.js";import{E as oa,__tla as na}from"./index-5b7dcbf1.js";let h,ra=Promise.all([(()=>{try{return W}catch{}})(),(()=>{try{return aa}catch{}})(),(()=>{try{return la}catch{}})(),(()=>{try{return sa}catch{}})(),(()=>{try{return na}catch{}})()]).then(async()=>{let p,v,b;p={class:"flex items-center justify-between"},v={key:0},b={key:0},h=T(M({name:"CrmCustomerPoolConfig",__name:"index",setup(ua){const C=ta(),{t:U}=N(),r=_(!1),a=_({enabled:!1,contactExpireDays:void 0,dealExpireDays:void 0,notifyEnabled:!1,notifyDays:void 0}),k=R({enabled:[{required:!0,message:"\u662F\u5426\u542F\u7528\u5BA2\u6237\u516C\u6D77\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}]}),m=_(),g=async()=>{try{r.value=!0;const u=await(async()=>await x.get({url:"/crm/customer-pool-config/get"}))();if(u===null)return;a.value=u}finally{r.value=!1}},q=async()=>{if(m&&await m.value.validate()){r.value=!0;try{const u=a.value;await(async s=>await x.put({url:"/crm/customer-pool-config/save",data:s}))(u),C.success(U("common.updateSuccess")),await g(),r.value=!1}finally{r.value=!1}}},z=()=>{a.value.enabled||(a.value.contactExpireDays=void 0,a.value.dealExpireDays=void 0,a.value.notifyEnabled=!1,a.value.notifyDays=void 0)},P=()=>{a.value.notifyEnabled||(a.value.notifyDays=void 0)};return S(()=>{g()}),(u,s)=>{const j=Z,i=F,E=H,c=J,f=K,A=oa,G=O,I=$,X=L("hasPermi"),B=Q;return d(),y(I,null,{default:l(()=>[V((d(),y(G,{ref_key:"formRef",ref:m,model:e(a),rules:e(k),"label-width":"160px"},{default:l(()=>[t(A,{shadow:"never"},{header:l(()=>[Y("div",p,[t(e(ea),{title:"\u5BA2\u6237\u516C\u6D77\u89C4\u5219\u8BBE\u7F6E"}),V((d(),y(j,{type:"primary",onClick:q},{default:l(()=>[n(" \u4FDD\u5B58 ")]),_:1})),[[X,["crm:customer-pool-config:update"]]])])]),default:l(()=>[t(c,{label:"\u5BA2\u6237\u516C\u6D77\u89C4\u5219\u8BBE\u7F6E",prop:"enabled"},{default:l(()=>[t(E,{modelValue:e(a).enabled,"onUpdate:modelValue":s[0]||(s[0]=o=>e(a).enabled=o),onChange:z,class:"ml-4"},{default:l(()=>[t(i,{label:!1,size:"large"},{default:l(()=>[n("\u4E0D\u542F\u7528")]),_:1}),t(i,{label:!0,size:"large"},{default:l(()=>[n("\u542F\u7528")]),_:1})]),_:1},8,["modelValue"])]),_:1}),e(a).enabled?(d(),w("div",v,[t(c,null,{default:l(()=>[t(f,{class:"mr-2",modelValue:e(a).contactExpireDays,"onUpdate:modelValue":s[1]||(s[1]=o=>e(a).contactExpireDays=o)},null,8,["modelValue"]),n(" \u5929\u4E0D\u8DDF\u8FDB\u6216 "),t(f,{class:"mx-2",modelValue:e(a).dealExpireDays,"onUpdate:modelValue":s[2]||(s[2]=o=>e(a).dealExpireDays=o)},null,8,["modelValue"]),n(" \u5929\u672A\u6210\u4EA4 ")]),_:1}),t(c,{label:"\u63D0\u524D\u63D0\u9192\u8BBE\u7F6E",prop:"notifyEnabled"},{default:l(()=>[t(E,{modelValue:e(a).notifyEnabled,"onUpdate:modelValue":s[3]||(s[3]=o=>e(a).notifyEnabled=o),onChange:P,class:"ml-4"},{default:l(()=>[t(i,{label:!1,size:"large"},{default:l(()=>[n("\u4E0D\u63D0\u9192")]),_:1}),t(i,{label:!0,size:"large"},{default:l(()=>[n("\u63D0\u9192")]),_:1})]),_:1},8,["modelValue"])]),_:1}),e(a).notifyEnabled?(d(),w("div",b,[t(c,null,{default:l(()=>[n(" \u63D0\u524D "),t(f,{class:"mx-2",modelValue:e(a).notifyDays,"onUpdate:modelValue":s[4]||(s[4]=o=>e(a).notifyDays=o)},null,8,["modelValue"]),n(" \u5929\u63D0\u9192 ")]),_:1})])):D("",!0)])):D("",!0)]),_:1})]),_:1},8,["model","rules"])),[[B,e(r)]])]),_:1})}}}),[["__file","E:/newCode/GYZX-UI-ADMIN/src/views/crm/customer/poolConfig/index.vue"]])});export{ra as __tla,h as default};
