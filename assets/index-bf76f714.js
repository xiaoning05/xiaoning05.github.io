import{d as J,u as z,J as G,r as s,p as H,x as K,a,o as S,v as I,w as i,f as l,l as d,h as V,a4 as L,i as M,aq as h,ar as k,as as O,at as P,m as Q,n as W,C as X,A as Y,D as Z,I as $,__tla as aa}from"./index-d5b00dc9.js";import{_ as ta,__tla as ra}from"./ContentWrap.vue_vue_type_script_setup_true_lang-29ba9b6b.js";import{u as ea,__tla as _a}from"./tagsView-5c5a0671.js";import{g as la,c as oa,u as ca,__tla as ia}from"./spu-b7f32e1c.js";import{_ as sa,__tla as ma}from"./InfoForm.vue_vue_type_script_setup_true_lang-4607080e.js";import{_ as ua,__tla as na}from"./DescriptionForm.vue_vue_type_script_setup_true_lang-ab303fc7.js";import{_ as pa,__tla as fa}from"./OtherForm.vue_vue_type_script_setup_true_lang-2b63cd29.js";import{_ as da,__tla as ya}from"./SkuForm.vue_vue_type_script_setup_true_lang-9073d909.js";import{_ as va,__tla as ha}from"./DeliveryForm.vue_vue_type_script_setup_true_lang-8a1bd728.js";import{u as ka,__tla as Pa}from"./useMessage-2288a5f2.js";import{__tla as ga}from"./index-bd0d9e6c.js";import{__tla as Na}from"./UploadImgs-75fdd3de.js";import{__tla as Ba}from"./UploadImgs.vue_vue_type_style_index_0_scoped_78c552d7_lang-e3e35d92.js";import{__tla as wa}from"./el-image-viewer-96313bcd.js";import{__tla as Da}from"./useUpload-1b812415.js";import{__tla as Fa}from"./index-91a13e3d.js";import"./_plugin-vue_export-helper-1b428a4d.js";import{__tla as Ua}from"./UploadImg-b64c8ba7.js";import{__tla as ba}from"./index-2383b77d.js";import"./tree-82bb3b99.js";import{__tla as Ca}from"./category-bb2b63fb.js";import{__tla as Ra}from"./brand-469d06ca.js";import{__tla as Sa}from"./formRules-290333c3.js";import{__tla as Ia}from"./style.css_vue_type_style_index_0_src_true_lang-bcdcdb45.js";import{__tla as Va}from"./index-3384a889.js";import{__tla as Ta}from"./SkuList.vue_vue_type_script_setup_true_lang-4a79e20d.js";import{__tla as xa}from"./el-image-5f4cbc55.js";import{__tla as Ea}from"./UploadFile.vue_vue_type_style_index_0_scoped_3311e906_lang-064855f0.js";import{__tla as ja}from"./ProductAttributes.vue_vue_type_script_setup_true_lang-9c63f8c0.js";import{__tla as qa}from"./el-text-3f839333.js";import{__tla as Aa}from"./property-86ad6a7a.js";import{__tla as Ja}from"./ProductPropertyAddForm.vue_vue_type_script_setup_true_lang-b1c530b3.js";import{__tla as za}from"./Dialog.vue_vue_type_style_index_0_lang-03cf6454.js";import{__tla as Ga}from"./index-a22c74d1.js";import{__tla as Ha}from"./dict-29b94c3f.js";import"./constants-99751ef9.js";let T,Ka=Promise.all([(()=>{try{return aa}catch{}})(),(()=>{try{return ra}catch{}})(),(()=>{try{return _a}catch{}})(),(()=>{try{return ia}catch{}})(),(()=>{try{return ma}catch{}})(),(()=>{try{return na}catch{}})(),(()=>{try{return fa}catch{}})(),(()=>{try{return ya}catch{}})(),(()=>{try{return ha}catch{}})(),(()=>{try{return Pa}catch{}})(),(()=>{try{return ga}catch{}})(),(()=>{try{return Na}catch{}})(),(()=>{try{return Ba}catch{}})(),(()=>{try{return wa}catch{}})(),(()=>{try{return Da}catch{}})(),(()=>{try{return Fa}catch{}})(),(()=>{try{return Ua}catch{}})(),(()=>{try{return ba}catch{}})(),(()=>{try{return Ca}catch{}})(),(()=>{try{return Ra}catch{}})(),(()=>{try{return Sa}catch{}})(),(()=>{try{return Ia}catch{}})(),(()=>{try{return Va}catch{}})(),(()=>{try{return Ta}catch{}})(),(()=>{try{return xa}catch{}})(),(()=>{try{return Ea}catch{}})(),(()=>{try{return ja}catch{}})(),(()=>{try{return qa}catch{}})(),(()=>{try{return Aa}catch{}})(),(()=>{try{return Ja}catch{}})(),(()=>{try{return za}catch{}})(),(()=>{try{return Ga}catch{}})(),(()=>{try{return Ha}catch{}})()]).then(async()=>{T=J({name:"ProductSpuForm",__name:"index",setup(La){const{t:N}=M(),B=ka(),{push:x,currentRoute:E}=z(),{params:w,name:j}=G(),{delView:q}=ea(),p=s(!1),r=s("info"),m=s(!1),D=s(),F=s(),U=s(),b=s(),C=s(),u=s({name:"",categoryId:void 0,keyword:"",picUrl:"",sliderPicUrls:[],introduction:"",deliveryTypes:[],deliveryTemplateId:void 0,brandId:void 0,specType:!1,subCommissionType:!1,skus:[{price:0,marketPrice:0,costPrice:0,barCode:"",picUrl:"",stock:0,weight:0,volume:0,firstBrokeragePrice:0,secondBrokeragePrice:0}],description:"",sort:0,giveIntegral:0,virtualSalesCount:0}),A=async()=>{var f,e,o,t,y;p.value=!0;try{await((f=a(D))==null?void 0:f.validate()),await((e=a(F))==null?void 0:e.validate()),await((o=a(U))==null?void 0:o.validate()),await((t=a(b))==null?void 0:t.validate()),await((y=a(C))==null?void 0:y.validate());const n=O(a(u.value));n.skus.forEach(_=>{_.name=n.name,_.price=P(_.price),_.marketPrice=P(_.marketPrice),_.costPrice=P(_.costPrice),_.firstBrokeragePrice=P(_.firstBrokeragePrice),_.secondBrokeragePrice=P(_.secondBrokeragePrice)});const v=[];n.sliderPicUrls.forEach(_=>{typeof _=="object"?v.push(_.url):v.push(_)}),n.sliderPicUrls=v;const g=n;w.id?(await ca(g),B.success(N("common.updateSuccess"))):(await oa(g),B.success(N("common.createSuccess"))),R()}finally{p.value=!1}},R=()=>{q(a(E)),x({name:"ProductSpu"})};return H(async()=>{await(async()=>{var e;j==="ProductSpuDetail"&&(m.value=!0);const f=w.id;if(f){p.value=!0;try{const o=await la(f);(e=o.skus)==null||e.forEach(t=>{m.value?(t.price=h(t.price),t.marketPrice=h(t.marketPrice),t.costPrice=h(t.costPrice),t.firstBrokeragePrice=h(t.firstBrokeragePrice),t.secondBrokeragePrice=h(t.secondBrokeragePrice)):(t.price=k(t.price),t.marketPrice=k(t.marketPrice),t.costPrice=k(t.costPrice),t.firstBrokeragePrice=k(t.firstBrokeragePrice),t.secondBrokeragePrice=k(t.secondBrokeragePrice))}),u.value=o}finally{p.value=!1}}})()}),(f,e)=>{const o=Q,t=W,y=X,n=Y,v=Z,g=ta,_=$;return K((S(),I(g,null,{default:i(()=>[l(t,{modelValue:a(r),"onUpdate:modelValue":e[5]||(e[5]=c=>d(r)?r.value=c:null)},{default:i(()=>[l(o,{label:"\u57FA\u7840\u8BBE\u7F6E",name:"info"},{default:i(()=>[l(sa,{ref_key:"infoRef",ref:D,activeName:a(r),"onUpdate:activeName":e[0]||(e[0]=c=>d(r)?r.value=c:null),"is-detail":a(m),propFormData:a(u)},null,8,["activeName","is-detail","propFormData"])]),_:1}),l(o,{label:"\u4EF7\u683C\u5E93\u5B58",name:"sku"},{default:i(()=>[l(da,{ref_key:"skuRef",ref:F,activeName:a(r),"onUpdate:activeName":e[1]||(e[1]=c=>d(r)?r.value=c:null),"is-detail":a(m),propFormData:a(u)},null,8,["activeName","is-detail","propFormData"])]),_:1}),l(o,{label:"\u7269\u6D41\u8BBE\u7F6E",name:"delivery"},{default:i(()=>[l(va,{ref_key:"deliveryRef",ref:U,activeName:a(r),"onUpdate:activeName":e[2]||(e[2]=c=>d(r)?r.value=c:null),"is-detail":a(m),propFormData:a(u)},null,8,["activeName","is-detail","propFormData"])]),_:1}),l(o,{label:"\u5546\u54C1\u8BE6\u60C5",name:"description"},{default:i(()=>[l(ua,{ref_key:"descriptionRef",ref:b,activeName:a(r),"onUpdate:activeName":e[3]||(e[3]=c=>d(r)?r.value=c:null),"is-detail":a(m),propFormData:a(u)},null,8,["activeName","is-detail","propFormData"])]),_:1}),l(o,{label:"\u5176\u5B83\u8BBE\u7F6E",name:"other"},{default:i(()=>[l(pa,{ref_key:"otherRef",ref:C,activeName:a(r),"onUpdate:activeName":e[4]||(e[4]=c=>d(r)?r.value=c:null),"is-detail":a(m),propFormData:a(u)},null,8,["activeName","is-detail","propFormData"])]),_:1})]),_:1},8,["modelValue"]),l(v,null,{default:i(()=>[l(n,{style:{float:"right"}},{default:i(()=>[a(m)?L("",!0):(S(),I(y,{key:0,loading:a(p),type:"primary",onClick:A},{default:i(()=>[V(" \u4FDD\u5B58 ")]),_:1},8,["loading"])),l(y,{onClick:R},{default:i(()=>[V("\u8FD4\u56DE")]),_:1})]),_:1})]),_:1})]),_:1})),[[_,a(p)]])}}})});export{Ka as __tla,T as default};
