import{ap as y,d as G,r as u,e as J,K as L,o as k,c as Q,f as t,w as l,a as r,l as g,x as W,v as Y,h as m,a4 as $,F as ee,A as ae,D as te,_ as re,C as le,j as se,k as oe,m as _e,n as ue,cv as ne,__tla as ce}from"./index-d5b00dc9.js";import{_ as pe,__tla as ie}from"./index-2b365e22.js";import{_ as me,__tla as de}from"./ReplyForm.vue_vue_type_script_setup_true_lang-49634042.js";import{R as F,__tla as ye}from"./TabNews-64063b83.js";import{__tla as fe}from"./main-38a5828c.js";import{__tla as ve}from"./useUpload-13ea0f15.js";import{u as he,__tla as Me}from"./useMessage-2288a5f2.js";import{__tla as ge}from"./TabImage-ad05bfa9.js";import{__tla as Ue}from"./main-3ca47a26.js";import{__tla as we}from"./TabVoice-134fa4cc.js";import{__tla as Ie}from"./main.vue_vue_type_script_setup_true_lang-acd7cfdd.js";import{__tla as be}from"./TabVideo-fa896eed.js";import{__tla as Te}from"./el-image-5f4cbc55.js";import{__tla as xe}from"./el-image-viewer-96313bcd.js";import{__tla as Ve}from"./main-59b5bc58.js";import{__tla as Ce}from"./main-ca702a4f.js";import{_ as qe,__tla as ke}from"./main.vue_vue_type_script_setup_true_lang-1db37612.js";import{_ as A,__tla as Fe}from"./ContentWrap.vue_vue_type_script_setup_true_lang-29ba9b6b.js";import{_ as Ae,__tla as De}from"./ReplyTable.vue_vue_type_script_setup_true_lang-9a914c94.js";import{M as d}from"./types-5e186e8c.js";import"./_plugin-vue_export-helper-1b428a4d.js";import{__tla as Ke}from"./dict-29b94c3f.js";import{__tla as Ne}from"./index.vue_vue_type_script_setup_true_lang-8478be74.js";import{__tla as Re}from"./index-9ed43bfb.js";import{__tla as He}from"./index-57fe8f49.js";import{__tla as Oe}from"./index-1262d693.js";import{__tla as Pe}from"./formatTime-9063410f.js";import{__tla as je}from"./TabText.vue_vue_type_script_setup_true_lang-38dd51c1.js";import{__tla as ze}from"./TabMusic.vue_vue_type_script_setup_true_lang-936e1d18.js";import{__tla as Se}from"./index-a3fe7c1e.js";import{__tla as Xe}from"./index-bd0d9e6c.js";import{__tla as Ze}from"./DictTag.vue_vue_type_script_lang-2a9ae33e.js";import"./color-f5b6e279.js";import{__tla as Be}from"./main-7b3807d7.js";import{__tla as Ee}from"./el-link-a1231a07.js";let D,Ge=Promise.all([(()=>{try{return ce}catch{}})(),(()=>{try{return ie}catch{}})(),(()=>{try{return de}catch{}})(),(()=>{try{return ye}catch{}})(),(()=>{try{return fe}catch{}})(),(()=>{try{return ve}catch{}})(),(()=>{try{return Me}catch{}})(),(()=>{try{return ge}catch{}})(),(()=>{try{return Ue}catch{}})(),(()=>{try{return we}catch{}})(),(()=>{try{return Ie}catch{}})(),(()=>{try{return be}catch{}})(),(()=>{try{return Te}catch{}})(),(()=>{try{return xe}catch{}})(),(()=>{try{return Ve}catch{}})(),(()=>{try{return Ce}catch{}})(),(()=>{try{return ke}catch{}})(),(()=>{try{return Fe}catch{}})(),(()=>{try{return De}catch{}})(),(()=>{try{return Ke}catch{}})(),(()=>{try{return Ne}catch{}})(),(()=>{try{return Re}catch{}})(),(()=>{try{return He}catch{}})(),(()=>{try{return Oe}catch{}})(),(()=>{try{return Pe}catch{}})(),(()=>{try{return je}catch{}})(),(()=>{try{return ze}catch{}})(),(()=>{try{return Se}catch{}})(),(()=>{try{return Xe}catch{}})(),(()=>{try{return Ze}catch{}})(),(()=>{try{return Be}catch{}})(),(()=>{try{return Ee}catch{}})()]).then(async()=>{D=G({name:"MpAutoReply",__name:"index",setup(Je){const f=he(),q=u(-1),_=u(d.Keyword),U=u(!0),K=u(0),w=u([]),I=u(null),n=J({pageNo:1,pageSize:10,accountId:q}),b=u(!1),c=u(!1),o=u({}),s=u({type:F.Text,accountId:-1}),N=e=>{q.value=e,s.value.accountId=e,n.pageNo=1,v()},v=async()=>{U.value=!0;try{const a=await(e={...n,type:_.value},y.get({url:"/mp/auto-reply/page",params:e}));w.value=a.list,K.value=a.total}finally{U.value=!1}var e},R=e=>{_.value=e,n.pageNo=1,v()},H=()=>{T(),s.value={type:F.Text,accountId:n.accountId},b.value=!0,c.value=!0},O=async e=>{T();const a=await(i=>y.get({url:"/mp/auto-reply/get?id="+i}))(e);o.value={...a},delete o.value.responseMessageType,delete o.value.responseContent,delete o.value.responseMediaId,delete o.value.responseMediaUrl,delete o.value.responseDescription,delete o.value.responseArticles,s.value={type:a.responseMessageType,accountId:n.accountId,content:a.responseContent,mediaId:a.responseMediaId,url:a.responseMediaUrl,title:a.responseTitle,description:a.responseDescription,thumbMediaId:a.responseThumbMediaId,thumbMediaUrl:a.responseThumbMediaUrl,articles:a.responseArticles,musicUrl:a.responseMusicUrl,hqMusicUrl:a.responseHqMusicUrl},b.value=!1,c.value=!0},P=async e=>{await f.confirm("\u662F\u5426\u786E\u8BA4\u5220\u9664\u6B64\u6570\u636E?"),await(a=>y.delete({url:"/mp/auto-reply/delete?id="+a}))(e),await v(),f.success("\u5220\u9664\u6210\u529F")},j=async()=>{var i;await((i=I.value)==null?void 0:i.validate());const e={...o.value};var a;e.responseMessageType=s.value.type,e.responseContent=s.value.content,e.responseMediaId=s.value.mediaId,e.responseMediaUrl=s.value.url,e.responseTitle=s.value.title,e.responseDescription=s.value.description,e.responseThumbMediaId=s.value.thumbMediaId,e.responseThumbMediaUrl=s.value.thumbMediaUrl,e.responseArticles=s.value.articles,e.responseMusicUrl=s.value.musicUrl,e.responseHqMusicUrl=s.value.hqMusicUrl,o.value.id!==void 0?(await(a=e,y.put({url:"/mp/auto-reply/update",data:a})),f.success("\u4FEE\u6539\u6210\u529F")):(await(x=>y.post({url:"/mp/auto-reply/create",data:x}))(e),f.success("\u65B0\u589E\u6210\u529F")),c.value=!1,await v()},T=()=>{var e;o.value={id:void 0,accountId:n.accountId,type:_.value,requestKeyword:void 0,requestMatch:_.value===d.Keyword?1:void 0,requestMessageType:void 0},(e=I.value)==null||e.resetFields()},z=()=>{c.value=!1,T()};return(e,a)=>{const i=pe,x=ae,S=te,h=re,V=le,X=se,M=oe,C=_e,Z=ue,B=ne,E=L("hasPermi");return k(),Q(ee,null,[t(i,{title:"\u81EA\u52A8\u56DE\u590D",url:"https://doc.iocoder.cn/mp/auto-reply/"}),t(r(A),null,{default:l(()=>[t(S,{class:"-mb-15px",model:r(n),inline:!0,"label-width":"68px"},{default:l(()=>[t(x,{label:"\u516C\u4F17\u53F7",prop:"accountId"},{default:l(()=>[t(r(qe),{onChange:N})]),_:1})]),_:1},8,["model"])]),_:1}),t(r(A),null,{default:l(()=>[t(Z,{modelValue:r(_),"onUpdate:modelValue":a[0]||(a[0]=p=>g(_)?_.value=p:null),onTabChange:R},{default:l(()=>[t(M,{gutter:10,class:"mb8"},{default:l(()=>[t(X,{span:1.5},{default:l(()=>[r(_)!==r(d).Follow||r(w).length<=0?W((k(),Y(V,{key:0,type:"primary",plain:"",onClick:H},{default:l(()=>[t(h,{icon:"ep:plus"}),m("\u65B0\u589E ")]),_:1})),[[E,["mp:auto-reply:create"]]]):$("",!0)]),_:1})]),_:1}),t(C,{name:r(d).Follow},{label:l(()=>[t(M,{align:"middle"},{default:l(()=>[t(h,{icon:"ep:star",class:"mr-2px"}),m(" \u5173\u6CE8\u65F6\u56DE\u590D")]),_:1})]),_:1},8,["name"]),t(C,{name:r(d).Message},{label:l(()=>[t(M,{align:"middle"},{default:l(()=>[t(h,{icon:"ep:chat-line-round",class:"mr-2px"}),m(" \u6D88\u606F\u56DE\u590D")]),_:1})]),_:1},8,["name"]),t(C,{name:r(d).Keyword},{label:l(()=>[t(M,{align:"middle"},{default:l(()=>[t(h,{icon:"fa:newspaper-o",class:"mr-2px"}),m(" \u5173\u952E\u8BCD\u56DE\u590D")]),_:1})]),_:1},8,["name"])]),_:1},8,["modelValue"]),t(Ae,{loading:r(U),list:r(w),"msg-type":r(_),onOnUpdate:O,onOnDelete:P},null,8,["loading","list","msg-type"]),t(B,{title:r(b)?"\u65B0\u589E\u81EA\u52A8\u56DE\u590D":"\u4FEE\u6539\u81EA\u52A8\u56DE\u590D",modelValue:r(c),"onUpdate:modelValue":a[3]||(a[3]=p=>g(c)?c.value=p:null),width:"800px","destroy-on-close":""},{footer:l(()=>[t(V,{onClick:z},{default:l(()=>[m("\u53D6 \u6D88")]),_:1}),t(V,{type:"primary",onClick:j},{default:l(()=>[m("\u786E \u5B9A")]),_:1})]),default:l(()=>[t(me,{modelValue:r(o),"onUpdate:modelValue":a[1]||(a[1]=p=>g(o)?o.value=p:null),reply:r(s),"onUpdate:reply":a[2]||(a[2]=p=>g(s)?s.value=p:null),"msg-type":r(_),ref_key:"formRef",ref:I},null,8,["modelValue","reply","msg-type"])]),_:1},8,["title","modelValue"])]),_:1})],64)}}})});export{Ge as __tla,D as default};
