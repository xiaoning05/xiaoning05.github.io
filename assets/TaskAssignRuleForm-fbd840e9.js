import{_ as Z,__tla as H}from"./Dialog-9a73a39c.js";import{ao as h,d as J,k as Q,r as p,n as W,o as r,q as d,e as u,b as o,a as l,h as R,c as y,F as I,g as f,a0 as v,j as $,L as ee,y as ae,s as le,x as te,C as se,B as ue,_ as re,__tla as oe}from"./index-aaa5adb3.js";import{E as de,__tla as pe}from"./el-tree-select-49584d8b.js";import{a as P,D as x,__tla as ie}from"./dict-f2796e71.js";import{d as ne,h as me}from"./tree-02f455f9.js";import{g as _e,__tla as ce}from"./index-8d0e0b84.js";import{g as ye,__tla as Ie}from"./index-d1d19999.js";import{g as fe,__tla as ve}from"./index-83fea873.js";import{g as ge,__tla as be}from"./index-c1a6a53a.js";import{g as he,__tla as ke}from"./index-beef4a64.js";import{u as Ve,__tla as we}from"./useMessage-873da1e2.js";let k,C,F,Ue=Promise.all([(()=>{try{return H}catch{}})(),(()=>{try{return oe}catch{}})(),(()=>{try{return pe}catch{}})(),(()=>{try{return ie}catch{}})(),(()=>{try{return ce}catch{}})(),(()=>{try{return Ie}catch{}})(),(()=>{try{return ve}catch{}})(),(()=>{try{return be}catch{}})(),(()=>{try{return ke}catch{}})(),(()=>{try{return we}catch{}})()]).then(async()=>{F=async V=>await h.get({url:"/bpm/task-assign-rule/list",params:V}),k=re(J({name:"BpmTaskAssignRuleForm",__name:"TaskAssignRuleForm",emits:["success"],setup(V,{expose:K,emit:M}){const{t:w}=Q(),U=Ve(),n=p(!1),b=p(!1),t=p({type:NaN,modelId:"",options:[],roleIds:[],deptIds:[],postIds:[],userIds:[],userGroupIds:[],scripts:[]}),B=W({type:[{required:!0,message:"\u89C4\u5219\u7C7B\u578B\u4E0D\u80FD\u4E3A\u7A7A",trigger:"change"}],roleIds:[{required:!0,message:"\u6307\u5B9A\u89D2\u8272\u4E0D\u80FD\u4E3A\u7A7A",trigger:"change"}],deptIds:[{required:!0,message:"\u6307\u5B9A\u90E8\u95E8\u4E0D\u80FD\u4E3A\u7A7A",trigger:"change"}],postIds:[{required:!0,message:"\u6307\u5B9A\u5C97\u4F4D\u4E0D\u80FD\u4E3A\u7A7A",trigger:"change"}],userIds:[{required:!0,message:"\u6307\u5B9A\u7528\u6237\u4E0D\u80FD\u4E3A\u7A7A",trigger:"change"}],userGroupIds:[{required:!0,message:"\u6307\u5B9A\u7528\u6237\u7EC4\u4E0D\u80FD\u4E3A\u7A7A",trigger:"change"}],scripts:[{required:!0,message:"\u6307\u5B9A\u811A\u672C\u4E0D\u80FD\u4E3A\u7A7A",trigger:"change"}]}),g=p(),G=p([]),S=p([]),A=p(),D=p([]),T=p([]),q=p([]),E=P(x.BPM_TASK_ASSIGN_SCRIPT);K({open:async(s,a)=>{O(),t.value={...a,modelId:s,options:[],roleIds:[],deptIds:[],postIds:[],userIds:[],userGroupIds:[],scripts:[]},a.type===10?t.value.roleIds.push(...a.options):a.type===20||a.type===21?t.value.deptIds.push(...a.options):a.type===22?t.value.postIds.push(...a.options):a.type===30||a.type===31||a.type===32?t.value.userIds.push(...a.options):a.type===40?t.value.userGroupIds.push(...a.options):a.type===50&&t.value.scripts.push(...a.options),n.value=!0,G.value=await _e(),S.value=await ye(),A.value=me(S.value,"id"),D.value=await fe(),T.value=await ge(),q.value=await he()}});const j=M,L=async()=>{if(!g||!await g.value.validate())return;const s={...t.value,taskDefinitionName:void 0};s.type===10?s.options=s.roleIds:s.type===20||s.type===21?s.options=s.deptIds:s.type===22?s.options=s.postIds:s.type===30||s.type===31||s.type===32?s.options=s.userIds:s.type===40?s.options=s.userGroupIds:s.type===50&&(s.options=s.scripts),s.roleIds=void 0,s.deptIds=void 0,s.postIds=void 0,s.userIds=void 0,s.userGroupIds=void 0,s.scripts=void 0,b.value=!0;try{const a=s;a.id?(await(async m=>await h.put({url:"/bpm/task-assign-rule/update",data:m}))(a),U.success(w("common.updateSuccess"))):(await(async m=>await h.post({url:"/bpm/task-assign-rule/create",data:m}))(a),U.success(w("common.createSuccess"))),n.value=!1,j("success")}finally{b.value=!1}},O=()=>{var s;(s=g.value)==null||s.resetFields()};return(s,a)=>{const m=ee,i=ae,_=le,c=te,Y=de,z=se,N=ue,X=Z;return r(),d(X,{modelValue:l(n),"onUpdate:modelValue":a[10]||(a[10]=e=>$(n)?n.value=e:null),title:"\u4FEE\u6539\u4EFB\u52A1\u89C4\u5219",width:"600"},{footer:u(()=>[o(N,{disabled:l(b),type:"primary",onClick:L},{default:u(()=>[R("\u786E \u5B9A")]),_:1},8,["disabled"]),o(N,{onClick:a[9]||(a[9]=e=>n.value=!1)},{default:u(()=>[R("\u53D6 \u6D88")]),_:1})]),default:u(()=>[o(z,{ref_key:"formRef",ref:g,model:l(t),rules:l(B),"label-width":"80px"},{default:u(()=>[o(i,{label:"\u4EFB\u52A1\u540D\u79F0",prop:"taskDefinitionName"},{default:u(()=>[o(m,{modelValue:l(t).taskDefinitionName,"onUpdate:modelValue":a[0]||(a[0]=e=>l(t).taskDefinitionName=e),disabled:"",placeholder:"\u8BF7\u8F93\u5165\u6D41\u6807\u6807\u8BC6"},null,8,["modelValue"])]),_:1}),o(i,{label:"\u4EFB\u52A1\u6807\u8BC6",prop:"taskDefinitionKey"},{default:u(()=>[o(m,{modelValue:l(t).taskDefinitionKey,"onUpdate:modelValue":a[1]||(a[1]=e=>l(t).taskDefinitionKey=e),disabled:"",placeholder:"\u8BF7\u8F93\u5165\u4EFB\u52A1\u6807\u8BC6"},null,8,["modelValue"])]),_:1}),o(i,{label:"\u89C4\u5219\u7C7B\u578B",prop:"type"},{default:u(()=>[o(c,{modelValue:l(t).type,"onUpdate:modelValue":a[2]||(a[2]=e=>l(t).type=e),clearable:"",style:{width:"100%"}},{default:u(()=>[(r(!0),y(I,null,f(l(P)(l(x).BPM_TASK_ASSIGN_RULE_TYPE),e=>(r(),d(_,{key:e.value,label:e.label,value:e.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),l(t).type===10?(r(),d(i,{key:0,label:"\u6307\u5B9A\u89D2\u8272",prop:"roleIds"},{default:u(()=>[o(c,{modelValue:l(t).roleIds,"onUpdate:modelValue":a[3]||(a[3]=e=>l(t).roleIds=e),clearable:"",multiple:"",style:{width:"100%"}},{default:u(()=>[(r(!0),y(I,null,f(l(G),e=>(r(),d(_,{key:e.id,label:e.name,value:e.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})):v("",!0),l(t).type===20||l(t).type===21?(r(),d(i,{key:1,label:"\u6307\u5B9A\u90E8\u95E8",prop:"deptIds",span:"24"},{default:u(()=>[o(Y,{ref:"treeRef",modelValue:l(t).deptIds,"onUpdate:modelValue":a[4]||(a[4]=e=>l(t).deptIds=e),data:l(A),props:l(ne),"empty-text":"\u52A0\u8F7D\u4E2D\uFF0C\u8BF7\u7A0D\u540E",multiple:"","node-key":"id","show-checkbox":""},null,8,["modelValue","data","props"])]),_:1})):v("",!0),l(t).type===22?(r(),d(i,{key:2,label:"\u6307\u5B9A\u5C97\u4F4D",prop:"postIds",span:"24"},{default:u(()=>[o(c,{modelValue:l(t).postIds,"onUpdate:modelValue":a[5]||(a[5]=e=>l(t).postIds=e),clearable:"",multiple:"",style:{width:"100%"}},{default:u(()=>[(r(!0),y(I,null,f(l(D),e=>(r(),d(_,{key:parseInt(e.id),label:e.name,value:parseInt(e.id)},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})):v("",!0),l(t).type===30||l(t).type===31||l(t).type===32?(r(),d(i,{key:3,label:"\u6307\u5B9A\u7528\u6237",prop:"userIds",span:"24"},{default:u(()=>[o(c,{modelValue:l(t).userIds,"onUpdate:modelValue":a[6]||(a[6]=e=>l(t).userIds=e),clearable:"",multiple:"",style:{width:"100%"}},{default:u(()=>[(r(!0),y(I,null,f(l(T),e=>(r(),d(_,{key:parseInt(e.id),label:e.nickname,value:parseInt(e.id)},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})):v("",!0),l(t).type===40?(r(),d(i,{key:4,label:"\u6307\u5B9A\u7528\u6237\u7EC4",prop:"userGroupIds"},{default:u(()=>[o(c,{modelValue:l(t).userGroupIds,"onUpdate:modelValue":a[7]||(a[7]=e=>l(t).userGroupIds=e),clearable:"",multiple:"",style:{width:"100%"}},{default:u(()=>[(r(!0),y(I,null,f(l(q),e=>(r(),d(_,{key:parseInt(e.id),label:e.name,value:parseInt(e.id)},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})):v("",!0),l(t).type===50?(r(),d(i,{key:5,label:"\u6307\u5B9A\u811A\u672C",prop:"scripts"},{default:u(()=>[o(c,{modelValue:l(t).scripts,"onUpdate:modelValue":a[8]||(a[8]=e=>l(t).scripts=e),clearable:"",multiple:"",style:{width:"100%"}},{default:u(()=>[(r(!0),y(I,null,f(l(E),e=>(r(),d(_,{key:e.value,label:e.label,value:e.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})):v("",!0)]),_:1},8,["model","rules"])]),_:1},8,["modelValue"])}}}),[["__file","E:/newCode/GYZX-UI-ADMIN/src/views/bpm/taskAssignRule/TaskAssignRuleForm.vue"]]),C=Object.freeze(Object.defineProperty({__proto__:null,default:k},Symbol.toStringTag,{value:"Module"}))});export{k as T,Ue as __tla,C as a,F as g};
