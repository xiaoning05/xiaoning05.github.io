import{a$ as te,b6 as B,cd as se,ba as ne,d as O,bG as oe,b0 as ie,bh as re,dG as ce,r as c,a1 as u,br as m,aS as ue,p as de,o as i,c as d,aJ as x,g as T,t as ve,a,R as g,F as A,aj as pe,a4 as f,v as me,w as fe,av as ye,b2 as ge,am as we,dH as he,bc as be,dI as _e,cN as M,dJ as ke,dK as Se,b4 as xe,__tla as ze}from"./index-d5b00dc9.js";import{E as Ee,__tla as Ce}from"./el-image-viewer-96313bcd.js";let R,Ie=Promise.all([(()=>{try{return ze}catch{}})(),(()=>{try{return Ce}catch{}})()]).then(async()=>{const j=te({hideOnClickModal:Boolean,src:{type:String,default:""},fit:{type:String,values:["","contain","cover","fill","none","scale-down"],default:""},loading:{type:String,values:["eager","lazy"]},lazy:Boolean,scrollContainer:{type:B([String,Object])},previewSrcList:{type:B(Array),default:()=>se([])},previewTeleported:Boolean,zIndex:{type:Number},initialIndex:{type:Number,default:0},infinite:{type:Boolean,default:!0},closeOnPressEscape:{type:Boolean,default:!0},zoomRate:{type:Number,default:1.2},minScale:{type:Number,default:.2},maxScale:{type:Number,default:7}}),G={load:n=>n instanceof Event,error:n=>n instanceof Event,switch:n=>ne(n),close:()=>!0,show:()=>!0},H=["src","loading"],P={key:0},F=O({name:"ElImage",inheritAttrs:!1});R=xe(ge(O({...F,props:j,emits:G,setup(n,{emit:v}){const l=n;let z="";const{t:J}=oe(),o=ie("image"),K=re(),Y=ce(),w=c(),p=c(!1),r=c(!0),h=c(!1),y=c(),s=c(),q=m&&"loading"in HTMLImageElement.prototype;let b,_;const D=u(()=>[o.e("inner"),k.value&&o.e("preview"),r.value&&o.is("loading")]),Q=u(()=>K.style),U=u(()=>{const{fit:e}=l;return m&&e?{objectFit:e}:{}}),k=u(()=>{const{previewSrcList:e}=l;return Array.isArray(e)&&e.length>0}),V=u(()=>{const{previewSrcList:e,initialIndex:t}=l;let $=t;return t>e.length-1&&($=0),$}),E=u(()=>l.loading!=="eager"&&(!q&&l.loading==="lazy"||l.lazy)),S=()=>{m&&(r.value=!0,p.value=!1,w.value=l.src)};function W(e){r.value=!1,p.value=!1,v("load",e)}function X(e){r.value=!1,p.value=!0,v("error",e)}function C(){ke(y.value,s.value)&&(S(),N())}const I=Se(C,200,!0);async function L(){var e;if(!m)return;await we();const{scrollContainer:t}=l;he(t)?s.value=t:be(t)&&t!==""?s.value=(e=document.querySelector(t))!=null?e:void 0:y.value&&(s.value=_e(y.value)),s.value&&(b=M(s,"scroll",I),setTimeout(()=>C(),100))}function N(){m&&s.value&&I&&(b==null||b(),s.value=void 0)}function Z(e){if(e.ctrlKey)return e.deltaY<0||e.deltaY>0?(e.preventDefault(),!1):void 0}function ee(){k.value&&(_=M("wheel",Z,{passive:!1}),z=document.body.style.overflow,document.body.style.overflow="hidden",h.value=!0,v("show"))}function ae(){_==null||_(),document.body.style.overflow=z,h.value=!1,v("close")}function le(e){v("switch",e)}return ue(()=>l.src,()=>{E.value?(r.value=!0,p.value=!1,N(),L()):S()}),de(()=>{E.value?L():S()}),(e,t)=>(i(),d("div",{ref_key:"container",ref:y,class:g([a(o).b(),e.$attrs.class]),style:ye(a(Q))},[p.value?x(e.$slots,"error",{key:0},()=>[T("div",{class:g(a(o).e("error"))},ve(a(J)("el.image.error")),3)]):(i(),d(A,{key:1},[w.value!==void 0?(i(),d("img",pe({key:0},a(Y),{src:w.value,loading:e.loading,style:a(U),class:a(D),onClick:ee,onLoad:W,onError:X}),null,16,H)):f("v-if",!0),r.value?(i(),d("div",{key:1,class:g(a(o).e("wrapper"))},[x(e.$slots,"placeholder",{},()=>[T("div",{class:g(a(o).e("placeholder"))},null,2)])],2)):f("v-if",!0)],64)),a(k)?(i(),d(A,{key:2},[h.value?(i(),me(a(Ee),{key:0,"z-index":e.zIndex,"initial-index":a(V),infinite:e.infinite,"zoom-rate":e.zoomRate,"min-scale":e.minScale,"max-scale":e.maxScale,"url-list":e.previewSrcList,"hide-on-click-modal":e.hideOnClickModal,teleported:e.previewTeleported,"close-on-press-escape":e.closeOnPressEscape,onClose:ae,onSwitch:le},{default:fe(()=>[e.$slots.viewer?(i(),d("div",P,[x(e.$slots,"viewer")])):f("v-if",!0)]),_:3},8,["z-index","initial-index","infinite","zoom-rate","min-scale","max-scale","url-list","hide-on-click-modal","teleported","close-on-press-escape"])):f("v-if",!0)],64)):f("v-if",!0)],6))}}),[["__file","/home/runner/work/element-plus/element-plus/packages/components/image/src/image.vue"]]))});export{R as E,Ie as __tla};
