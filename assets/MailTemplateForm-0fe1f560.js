import{n as T,d as Y,k as A,r as c,o as I,q as O,e as _,b as f,a as o,h as g,w as V,j as E,B as H,v as U,_ as N,__tla as R}from"./index-aaa5adb3.js";import{_ as q,__tla as z}from"./Dialog-9a73a39c.js";import{_ as B,__tla as G}from"./Form-93870143.js";import{g as X,c as Z,u as J,__tla as K}from"./index-ca0e42b1.js";import{d as L,__tla as Q}from"./formatTime-9c0e8879.js";import{b as W,__tla as $}from"./index-e0c35ef8.js";import{r as a,__tla as ee}from"./formRules-d4770b7e.js";import{D as ae,__tla as te}from"./dict-f2796e71.js";import{u as le,__tla as re}from"./useCrudSchemas-538534b3.js";import{u as se,__tla as oe}from"./useMessage-873da1e2.js";let p,h,k,ie=Promise.all([(()=>{try{return R}catch{}})(),(()=>{try{return z}catch{}})(),(()=>{try{return G}catch{}})(),(()=>{try{return K}catch{}})(),(()=>{try{return Q}catch{}})(),(()=>{try{return $}catch{}})(),(()=>{try{return ee}catch{}})(),(()=>{try{return te}catch{}})(),(()=>{try{return re}catch{}})(),(()=>{try{return oe}catch{}})()]).then(async()=>{let m,y,b;m=await W(),y=T({name:[a],code:[a],accountId:[a],label:[a],content:[a],params:[a],status:[a]}),b=T([{label:"\u6A21\u677F\u7F16\u7801",field:"code",isSearch:!0},{label:"\u6A21\u677F\u540D\u79F0",field:"name",isSearch:!0},{label:"\u6A21\u677F\u6807\u9898",field:"title"},{label:"\u6A21\u677F\u5185\u5BB9",field:"content",form:{component:"Editor",componentProps:{valueHtml:"",height:200}}},{label:"\u90AE\u7BB1\u8D26\u53F7",field:"accountId",width:"200px",formatter:(P,v,u)=>{var t;return(t=m.find(n=>n.id===u))==null?void 0:t.mail},search:{show:!0,component:"Select",api:()=>m,componentProps:{optionsAlias:{labelField:"mail",valueField:"id"}}},form:{component:"Select",api:()=>m,componentProps:{optionsAlias:{labelField:"mail",valueField:"id"}}}},{label:"\u53D1\u9001\u4EBA\u540D\u79F0",field:"nickname"},{label:"\u5F00\u542F\u72B6\u6001",field:"status",isSearch:!0,dictType:ae.COMMON_STATUS,dictClass:"number"},{label:"\u5907\u6CE8",field:"remark",isTable:!1},{label:"\u521B\u5EFA\u65F6\u95F4",field:"createTime",isForm:!1,formatter:L,search:{show:!0,component:"DatePicker",componentProps:{valueFormat:"YYYY-MM-DD HH:mm:ss",type:"daterange",defaultTime:[new Date("1 00:00:00"),new Date("1 23:59:59")]}}},{label:"\u64CD\u4F5C",field:"action",isForm:!1}]),{allSchemas:h}=le(b),p=N(Y({name:"SystemMailTemplateForm",__name:"MailTemplateForm",emits:["success"],setup(P,{expose:v,emit:u}){const{t}=A(),n=se(),l=c(!1),w=c(""),r=c(!1),S=c(""),i=c();v({open:async(s,e)=>{if(l.value=!0,w.value=t("action."+s),S.value=s,e){r.value=!0;try{const d=await X(e);i.value.setValues(d)}finally{r.value=!1}}}});const D=u,C=async()=>{if(i&&await i.value.getElFormRef().validate()){r.value=!0;try{const s=i.value.formModel;S.value==="create"?(await Z(s),n.success(t("common.createSuccess"))):(await J(s),n.success(t("common.updateSuccess"))),l.value=!1,D("success")}finally{r.value=!1}}};return(s,e)=>{const d=B,F=H,j=q,x=U;return I(),O(j,{modelValue:o(l),"onUpdate:modelValue":e[1]||(e[1]=M=>E(l)?l.value=M:null),"max-height":500,scroll:!0,title:o(w),width:800},{footer:_(()=>[f(F,{disabled:o(r),type:"primary",onClick:C},{default:_(()=>[g("\u786E \u5B9A")]),_:1},8,["disabled"]),f(F,{onClick:e[0]||(e[0]=M=>l.value=!1)},{default:_(()=>[g("\u53D6 \u6D88")]),_:1})]),default:_(()=>[V(f(d,{ref_key:"formRef",ref:i,rules:o(y),schema:o(h).formSchema},null,8,["rules","schema"]),[[x,o(r)]])]),_:1},8,["modelValue","title"])}}}),[["__file","E:/newCode/GYZX-UI-ADMIN/src/views/system/mail/template/MailTemplateForm.vue"]]),k=Object.freeze(Object.defineProperty({__proto__:null,default:p},Symbol.toStringTag,{value:"Module"}))});export{p as M,ie as __tla,h as a,k as b};
