import{d as G,i as L,r as m,e as O,p as T,o,v as c,w as t,f as d,a as e,h as V,x as j,c as I,F as h,q as U,a5 as k,t as B,l as J,y as W,z as X,A as Y,ai as Z,aj as H,G as K,D as Q,J as $,_ as ee,__tla as ae}from"./index-f0743f71.js";import{_ as le,__tla as se}from"./Dialog-8f786edd.js";import{g as te,__tla as ue}from"./index-5f468446.js";import{P as re,c as oe,u as de,__tla as ie}from"./index-123b98f8.js";import{a as _e,D as me,__tla as ce}from"./dict-4a9940b3.js";import{u as ne,__tla as ve}from"./useMessage-75a00a06.js";let E,pe=Promise.all([(()=>{try{return ae}catch{}})(),(()=>{try{return se}catch{}})(),(()=>{try{return ue}catch{}})(),(()=>{try{return ie}catch{}})(),(()=>{try{return ce}catch{}})(),(()=>{try{return ve}catch{}})()]).then(async()=>{E=ee(G({name:"CrmPermissionForm",__name:"PermissionForm",emits:["success"],setup(fe,{expose:P,emit:R}){const{t:p}=L(),w=ne(),i=m(!1),b=m(""),f=m(!1),n=m(""),g=m([]),s=m({}),S=O({userId:[{required:!0,message:"\u4EBA\u5458\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],level:[{required:!0,message:"\u6743\u9650\u7EA7\u522B\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}]}),y=m();P({open:async(u,l,r,_)=>{i.value=!0,b.value=p("action."+u)+"\u56E2\u961F\u6210\u5458",n.value=u,C(l,r),_&&(s.value.ids=_)},open0:async(u,l,r,_,v)=>{i.value=!0,b.value=p("action."+u)+"\u56E2\u961F\u6210\u5458",n.value=u,C(l,r),s.value.level=v,s.value.ids=[_]}});const x=R,z=async()=>{if(y&&await y.value.validate()){f.value=!0;try{const u=s.value;n.value==="create"?(await oe(e(u)),w.success(p("common.createSuccess"))):(await de(e(u)),w.success(p("common.updateSuccess"))),i.value=!1,x("success")}finally{f.value=!1}}},C=(u,l)=>{var r;(r=y.value)==null||r.resetFields(),s.value={},s.value={...s.value,bizType:u,bizId:l}};return T(async()=>{g.value=await te()}),(u,l)=>{const r=W,_=X,v=Y,M=Z,q=H,N=K,F=Q,A=le,D=$;return o(),c(A,{modelValue:e(i),"onUpdate:modelValue":l[4]||(l[4]=a=>J(i)?i.value=a:null),title:e(b),width:"30%"},{footer:t(()=>[d(F,{disabled:e(f),type:"primary",onClick:z},{default:t(()=>[V("\u786E \u5B9A")]),_:1},8,["disabled"]),d(F,{onClick:l[3]||(l[3]=a=>i.value=!1)},{default:t(()=>[V("\u53D6 \u6D88")]),_:1})]),default:t(()=>[j((o(),c(N,{ref_key:"formRef",ref:y,model:e(s),rules:e(S),"label-width":"100px"},{default:t(()=>[e(n)==="create"?(o(),c(v,{key:0,label:"\u9009\u62E9\u4EBA\u5458",prop:"userId"},{default:t(()=>[d(_,{modelValue:e(s).userId,"onUpdate:modelValue":l[0]||(l[0]=a=>e(s).userId=a)},{default:t(()=>[(o(!0),I(h,null,U(e(g),a=>(o(),c(r,{key:a.id,label:a.nickname,value:a.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})):k("",!0),d(v,{label:"\u6743\u9650\u7EA7\u522B",prop:"level"},{default:t(()=>[d(q,{modelValue:e(s).level,"onUpdate:modelValue":l[1]||(l[1]=a=>e(s).level=a)},{default:t(()=>[(o(!0),I(h,null,U(e(_e)(e(me).CRM_PERMISSION_LEVEL),a=>(o(),I(h,{key:a.value},[a.value!=e(re).OWNER?(o(),c(M,{key:0,label:a.value},{default:t(()=>[V(B(a.label),1)]),_:2},1032,["label"])):k("",!0)],64))),128))]),_:1},8,["modelValue"])]),_:1}),e(n)==="create"?(o(),c(v,{key:1,label:"\u540C\u65F6\u6DFB\u52A0\u81F3",prop:"toBizType"},{default:t(()=>[d(_,{modelValue:e(s).userId,"onUpdate:modelValue":l[2]||(l[2]=a=>e(s).userId=a)},{default:t(()=>[d(r,{value:1,label:"\u8054\u7CFB\u4EBA"}),d(r,{value:1,label:"\u5546\u673A"})]),_:1},8,["modelValue"])]),_:1})):k("",!0)]),_:1},8,["model","rules"])),[[D,e(f)]])]),_:1},8,["modelValue","title"])}}}),[["__file","E:/newCode/GYZX-UI-ADMIN/src/views/crm/permission/components/PermissionForm.vue"]])});export{pe as __tla,E as default};
