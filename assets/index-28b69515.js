import{d as re,u as oe,r as i,n as ue,aQ as de,p as pe,D as se,o as u,c as _,b as l,e as t,a,F as n,g as y,q as d,$ as w,G as ie,w as C,Z as _e,h as b,f as ne,s as ce,x as me,y as ye,z as ve,K as fe,_ as be,A as he,B as ke,i as Ve,v as Ue,__tla as we}from"./index-34f06ebd.js";import{_ as Ce,__tla as Te}from"./index.vue_vue_type_script_setup_true_lang-68fe248c.js";import{E as ge,a as Ee,b as xe,__tla as Pe}from"./el-dropdown-item-56a9fd7a.js";import{_ as De,__tla as Ie}from"./ContentWrap.vue_vue_type_script_setup_true_lang-80915c85.js";import{_ as Se,__tla as Re}from"./OrderDeliveryForm.vue_vue_type_script_setup_true_lang-d688ea87.js";import{_ as qe,__tla as Ne}from"./OrderUpdateRemarkForm.vue_vue_type_script_setup_true_lang-a5b33fff.js";import{e as Ae,__tla as Ye}from"./index-a29094c6.js";import{a as Oe,__tla as ze}from"./index-36a7f4fd.js";import{a as T,D as k,e as Fe,__tla as Le}from"./dict-e142e39a.js";import{g as Ke,__tla as Me}from"./index-367e6c19.js";import{D as g,T as He}from"./constants-99751ef9.js";import Ze,{__tla as Xe}from"./OrderTableColumn-7ceadb5b.js";import{__tla as je}from"./index-f8693880.js";import{__tla as Be}from"./index-460c50ff.js";import{__tla as Ge}from"./Dialog.vue_vue_type_style_index_0_lang-08560286.js";import{__tla as Qe}from"./useMessage-7a5ab7ef.js";import{__tla as $e}from"./el-image-a5cf0b35.js";import{__tla as Je}from"./el-image-viewer-331eba6f.js";import{__tla as We}from"./DictTag.vue_vue_type_script_lang-942df0b2.js";import"./color-f5b6e279.js";import{__tla as ea}from"./formatTime-ed0a77fd.js";import{__tla as aa}from"./index-9ab6e3b3.js";import"./_plugin-vue_export-helper-1b428a4d.js";let X,la=Promise.all([(()=>{try{return we}catch{}})(),(()=>{try{return Te}catch{}})(),(()=>{try{return Pe}catch{}})(),(()=>{try{return Ie}catch{}})(),(()=>{try{return Re}catch{}})(),(()=>{try{return Ne}catch{}})(),(()=>{try{return Ye}catch{}})(),(()=>{try{return ze}catch{}})(),(()=>{try{return Le}catch{}})(),(()=>{try{return Me}catch{}})(),(()=>{try{return Xe}catch{}})(),(()=>{try{return je}catch{}})(),(()=>{try{return Be}catch{}})(),(()=>{try{return Ge}catch{}})(),(()=>{try{return Qe}catch{}})(),(()=>{try{return $e}catch{}})(),(()=>{try{return Je}catch{}})(),(()=>{try{return We}catch{}})(),(()=>{try{return ea}catch{}})(),(()=>{try{return aa}catch{}})()]).then(async()=>{let I;I={class:"flex items-center justify-center"},X=re({name:"TradeOrder",__name:"index",setup(ta){const{currentRoute:j,push:B}=oe(),E=i(!0),S=i(2),x=i([]),R=i(),r=i({pageNo:1,pageSize:10,status:void 0,payChannelCode:void 0,createTime:void 0,terminal:void 0,type:void 0,deliveryType:void 0,logisticsId:void 0,pickUpStoreId:void 0,pickUpVerifyCode:void 0}),h=ue({queryParam:""}),q=i([{value:"no",label:"\u8BA2\u5355\u53F7"},{value:"userId",label:"\u7528\u6237UID"},{value:"userNickname",label:"\u7528\u6237\u6635\u79F0"},{value:"userMobile",label:"\u7528\u6237\u7535\u8BDD"}]),G=c=>{var o;(o=q.value.filter(p=>p.value!==c))==null||o.forEach(p=>{r.value.hasOwnProperty(p.value)&&delete r.value[p.value]})},v=async()=>{E.value=!0;try{const c=await Ae(a(r));x.value=c.list,S.value=c.total}finally{E.value=!1}},P=async()=>{r.value.pageNo=1,await v()},Q=()=>{var c;(c=R.value)==null||c.resetFields(),r.value={pageNo:1,pageSize:10,status:void 0,payChannelCode:void 0,createTime:void 0,terminal:void 0,type:void 0,deliveryType:void 0,logisticsId:void 0,pickUpStoreId:void 0,pickUpVerifyCode:void 0},P()},N=i(),A=i();de(()=>j.value,()=>{v()});const D=i([]),Y=i([]);return pe(async()=>{await v(),D.value=await Oe(),Y.value=await Ke()}),(c,o)=>{const p=ce,m=me,s=ye,$=ve,O=fe,f=be,V=he,J=ke,z=De,F=ge,W=Ee,ee=xe,ae=Ve,le=Ce,L=se("hasPermi"),te=Ue;return u(),_(n,null,[l(z,null,{default:t(()=>[l(J,{ref_key:"queryFormRef",ref:R,inline:!0,model:a(r),class:"-mb-15px","label-width":"68px"},{default:t(()=>[l(s,{label:"\u8BA2\u5355\u72B6\u6001",prop:"status"},{default:t(()=>[l(m,{modelValue:a(r).status,"onUpdate:modelValue":o[0]||(o[0]=e=>a(r).status=e),class:"!w-280px",clearable:"",placeholder:"\u5168\u90E8"},{default:t(()=>[(u(!0),_(n,null,y(a(T)(a(k).TRADE_ORDER_STATUS),e=>(u(),d(p,{key:e.value,label:e.label,value:e.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),l(s,{label:"\u652F\u4ED8\u65B9\u5F0F",prop:"payChannelCode"},{default:t(()=>[l(m,{modelValue:a(r).payChannelCode,"onUpdate:modelValue":o[1]||(o[1]=e=>a(r).payChannelCode=e),class:"!w-280px",clearable:"",placeholder:"\u5168\u90E8"},{default:t(()=>[(u(!0),_(n,null,y(a(Fe)(a(k).PAY_CHANNEL_CODE),e=>(u(),d(p,{key:e.value,label:e.label,value:e.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),l(s,{label:"\u521B\u5EFA\u65F6\u95F4",prop:"createTime"},{default:t(()=>[l($,{modelValue:a(r).createTime,"onUpdate:modelValue":o[2]||(o[2]=e=>a(r).createTime=e),"default-time":[new Date("1 00:00:00"),new Date("1 23:59:59")],class:"!w-280px","end-placeholder":"\u81EA\u5B9A\u4E49\u65F6\u95F4","start-placeholder":"\u81EA\u5B9A\u4E49\u65F6\u95F4",type:"daterange","value-format":"YYYY-MM-DD HH:mm:ss"},null,8,["modelValue","default-time"])]),_:1}),l(s,{label:"\u8BA2\u5355\u6765\u6E90",prop:"terminal"},{default:t(()=>[l(m,{modelValue:a(r).terminal,"onUpdate:modelValue":o[3]||(o[3]=e=>a(r).terminal=e),class:"!w-280px",clearable:"",placeholder:"\u5168\u90E8"},{default:t(()=>[(u(!0),_(n,null,y(a(T)(a(k).TERMINAL),e=>(u(),d(p,{key:e.value,label:e.label,value:e.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),l(s,{label:"\u8BA2\u5355\u7C7B\u578B",prop:"type"},{default:t(()=>[l(m,{modelValue:a(r).type,"onUpdate:modelValue":o[4]||(o[4]=e=>a(r).type=e),class:"!w-280px",clearable:"",placeholder:"\u5168\u90E8"},{default:t(()=>[(u(!0),_(n,null,y(a(T)(a(k).TRADE_ORDER_TYPE),e=>(u(),d(p,{key:e.value,label:e.label,value:e.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),l(s,{label:"\u914D\u9001\u65B9\u5F0F",prop:"deliveryType"},{default:t(()=>[l(m,{modelValue:a(r).deliveryType,"onUpdate:modelValue":o[5]||(o[5]=e=>a(r).deliveryType=e),class:"!w-280px",clearable:"",placeholder:"\u5168\u90E8"},{default:t(()=>[(u(!0),_(n,null,y(a(T)(a(k).TRADE_DELIVERY_TYPE),e=>(u(),d(p,{key:e.value,label:e.label,value:e.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),a(r).deliveryType===a(g).EXPRESS.type?(u(),d(s,{key:0,label:"\u5FEB\u9012\u516C\u53F8",prop:"logisticsId"},{default:t(()=>[l(m,{modelValue:a(r).logisticsId,"onUpdate:modelValue":o[6]||(o[6]=e=>a(r).logisticsId=e),class:"!w-280px",clearable:"",placeholder:"\u5168\u90E8"},{default:t(()=>[(u(!0),_(n,null,y(a(Y),e=>(u(),d(p,{key:e.id,label:e.name,value:e.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})):w("",!0),a(r).deliveryType===a(g).PICK_UP.type?(u(),d(s,{key:1,label:"\u81EA\u63D0\u95E8\u5E97",prop:"pickUpStoreId"},{default:t(()=>[l(m,{modelValue:a(r).pickUpStoreId,"onUpdate:modelValue":o[7]||(o[7]=e=>a(r).pickUpStoreId=e),class:"!w-280px",clearable:"",multiple:"",placeholder:"\u5168\u90E8"},{default:t(()=>[(u(!0),_(n,null,y(a(D),e=>(u(),d(p,{key:e.id,label:e.name,value:e.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})):w("",!0),a(r).deliveryType===a(g).PICK_UP.type?(u(),d(s,{key:2,label:"\u6838\u9500\u7801",prop:"pickUpVerifyCode"},{default:t(()=>[l(O,{modelValue:a(r).pickUpVerifyCode,"onUpdate:modelValue":o[8]||(o[8]=e=>a(r).pickUpVerifyCode=e),class:"!w-280px",clearable:"",placeholder:"\u8BF7\u8F93\u5165\u81EA\u63D0\u6838\u9500\u7801",onKeyup:ie(P,["enter"])},null,8,["modelValue"])]),_:1})):w("",!0),l(s,{label:"\u805A\u5408\u641C\u7D22"},{default:t(()=>[C(l(O,{modelValue:a(r)[a(h).queryParam],"onUpdate:modelValue":o[10]||(o[10]=e=>a(r)[a(h).queryParam]=e),type:a(h).queryParam==="userId"?"number":"text",class:"!w-280px",clearable:"",placeholder:"\u8BF7\u8F93\u5165"},{prepend:t(()=>[l(m,{modelValue:a(h).queryParam,"onUpdate:modelValue":o[9]||(o[9]=e=>a(h).queryParam=e),class:"!w-110px",clearable:"",placeholder:"\u5168\u90E8",onChange:G},{default:t(()=>[(u(!0),_(n,null,y(a(q),e=>(u(),d(p,{key:e.value,label:e.label,value:e.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1},8,["modelValue","type"]),[[_e,!0]])]),_:1}),l(s,null,{default:t(()=>[l(V,{onClick:P},{default:t(()=>[l(f,{class:"mr-5px",icon:"ep:search"}),b(" \u641C\u7D22 ")]),_:1}),l(V,{onClick:Q},{default:t(()=>[l(f,{class:"mr-5px",icon:"ep:refresh"}),b(" \u91CD\u7F6E ")]),_:1})]),_:1})]),_:1},8,["model"])]),_:1}),l(z,null,{default:t(()=>[C((u(),d(ae,{data:a(x),"row-key":"id"},{default:t(()=>[l(a(Ze),{list:a(x),"pick-up-store-list":a(D)},{default:t(({row:e})=>[ne("div",I,[C((u(),d(V,{link:"",type:"primary",onClick:K=>{return U=e.id,void B({name:"TradeOrderDetail",params:{id:U}});var U}},{default:t(()=>[l(f,{icon:"ep:notification"}),b(" \u8BE6\u60C5 ")]),_:2},1032,["onClick"])),[[L,["trade:order:query"]]]),C((u(),d(ee,{onCommand:K=>((U,M)=>{var H,Z;switch(U){case"remark":(H=A.value)==null||H.open(M);break;case"delivery":(Z=N.value)==null||Z.open(M)}})(K,e)},{dropdown:t(()=>[l(W,null,{default:t(()=>[e.deliveryType===a(g).EXPRESS.type&&e.status===a(He).UNDELIVERED.status?(u(),d(F,{key:0,command:"delivery"},{default:t(()=>[l(f,{icon:"ep:takeaway-box"}),b(" \u53D1\u8D27 ")]),_:1})):w("",!0),l(F,{command:"remark"},{default:t(()=>[l(f,{icon:"ep:chat-line-square"}),b(" \u5907\u6CE8 ")]),_:1})]),_:2},1024)]),default:t(()=>[l(V,{link:"",type:"primary"},{default:t(()=>[l(f,{icon:"ep:d-arrow-right"}),b(" \u66F4\u591A ")]),_:1})]),_:2},1032,["onCommand"])),[[L,["trade:order:update"]]])])]),_:1},8,["list","pick-up-store-list"])]),_:1},8,["data"])),[[te,a(E)]]),l(le,{limit:a(r).pageSize,"onUpdate:limit":o[11]||(o[11]=e=>a(r).pageSize=e),page:a(r).pageNo,"onUpdate:page":o[12]||(o[12]=e=>a(r).pageNo=e),total:a(S),onPagination:v},null,8,["limit","page","total"])]),_:1}),l(Se,{ref_key:"deliveryFormRef",ref:N,onSuccess:v},null,512),l(qe,{ref_key:"updateRemarkForm",ref:A,onSuccess:v},null,512)],64)}}})});export{la as __tla,X as default};
