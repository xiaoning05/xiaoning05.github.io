import{d as T,ah as X,r as v,a2 as Y,aT as Z,o as f,c as D,q as P,a as m,F as B,v as I,w as c,g as M,f as n,h as _,t as V,x as g,a4 as z,l as $,M as H,Q as J,i as O,al as R,D as W,j as w,c7 as aa,_ as la,__tla as sa}from"./index-f0743f71.js";import{E as ea,__tla as ta}from"./el-text-60e0fe3f.js";import{c as ua,__tla as ra}from"./property-fe4b4501.js";import{u as oa,__tla as ca}from"./useMessage-75a00a06.js";let E,na=Promise.all([(()=>{try{return sa}catch{}})(),(()=>{try{return ta}catch{}})(),(()=>{try{return ra}catch{}})(),(()=>{try{return ca}catch{}})()]).then(async()=>{E=la(T({name:"ProductAttributes",__name:"ProductAttributes",props:{propertyList:{type:Array,default:()=>{}},isDetail:X.bool.def(!1)},emits:["success"],setup(y,{emit:K}){const{t:L}=O(),C=oa(),e=v(""),d=v(null),x=Y(()=>a=>d.value!==null&&(d.value===a||void 0)),b=v([]),U=a=>{a!=null&&(b.value.some(r=>{var t,i;return((t=r.input)==null?void 0:t.attributes.id)===((i=a.input)==null?void 0:i.attributes.id)})||b.value.push(a))},u=v([]),q=y;Z(()=>q.propertyList,a=>{a&&(u.value=a)},{deep:!0,immediate:!0});const F=K,k=async(a,r)=>{if(e.value)try{const t=await ua({propertyId:r,name:e.value});u.value[a].values.push({id:t,name:e.value}),C.success(L("common.createSuccess")),F("success",u.value)}catch{C.error("\u6DFB\u52A0\u5931\u8D25\uFF0C\u8BF7\u91CD\u8BD5")}d.value=null,e.value=""};return(a,r)=>{const t=ea,i=R,j=W,G=aa,N=w;return f(!0),D(B,null,P(m(u),(p,l)=>(f(),I(N,{key:l},{default:c(()=>[M("div",null,[n(t,{class:"mx-1"},{default:c(()=>[_("\u5C5E\u6027\u540D\uFF1A")]),_:1}),n(i,{class:"mx-1",closable:!y.isDetail,type:"success",onClose:s=>(o=>{var h;(h=u.value)==null||h.splice(o,1)})(l)},{default:c(()=>[_(V(p.name),1)]),_:2},1032,["closable","onClose"])]),M("div",null,[n(t,{class:"mx-1"},{default:c(()=>[_("\u5C5E\u6027\u503C\uFF1A")]),_:1}),(f(!0),D(B,null,P(p.values,(s,o)=>(f(),I(i,{key:s.id,class:"mx-1",closable:!y.isDetail,onClose:h=>((Q,S)=>{var A;(A=u.value[Q].values)==null||A.splice(S,1)})(l,o)},{default:c(()=>[_(V(s.name),1)]),_:2},1032,["closable","onClose"]))),128)),g(n(m(J),{id:`input${l}`,ref_for:!0,ref:U,modelValue:m(e),"onUpdate:modelValue":r[0]||(r[0]=s=>$(e)?e.value=s:null),class:"!w-20",size:"small",onBlur:s=>k(l,p.id),onKeyup:H(s=>k(l,p.id),["enter"])},null,8,["id","modelValue","onBlur","onKeyup"]),[[z,m(x)(l)]]),g(n(j,{class:"button-new-tag ml-1",size:"small",onClick:s=>(async o=>{d.value=o,b.value[o].focus()})(l)},{default:c(()=>[_(" + \u6DFB\u52A0 ")]),_:2},1032,["onClick"]),[[z,!m(x)(l)]])]),n(G,{class:"my-10px"})]),_:2},1024))),128)}}}),[["__file","E:/newCode/GYZX-UI-ADMIN/src/views/mall/product/spu/form/ProductAttributes.vue"]])});export{na as __tla,E as default};
