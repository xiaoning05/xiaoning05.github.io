import{d as X,r as p,u as q,a1 as D,a2 as K,a as t,e as W,aT as Y,p as Z,x as B,a4 as H,o as J,v as $,w as r,f as e,M as ee,h as v,t as V,i as ae,a8 as k,a6 as te,aa as re,ab as oe,ac as le,ad as ne,A as se,j as ie,Q as pe,ae as de,k as me,G as ue,W as ce,X as _e,g as fe,af as ge,ag as he,_ as ye,__tla as we}from"./index-f0743f71.js";import{_ as xe,__tla as be}from"./Verify-5712ce9c.js";import{_ as Fe,__tla as ve}from"./XButton-a74111d2.js";import{E as Ve,__tla as ke}from"./el-link-17c2244d.js";import{u as _,__tla as Le}from"./useIcon-fb35625d.js";import{u as Ne,L as Me,a as Te,__tla as Ee}from"./useLogin-af1b323d.js";import{u as Pe,__tla as ze}from"./useMessage-75a00a06.js";import{r as f,__tla as Ie}from"./formRules-5c05c0bb.js";import{__tla as Se}from"./index-21698e53.js";let L,Ae=Promise.all([(()=>{try{return we}catch{}})(),(()=>{try{return be}catch{}})(),(()=>{try{return ve}catch{}})(),(()=>{try{return ke}catch{}})(),(()=>{try{return Le}catch{}})(),(()=>{try{return Ee}catch{}})(),(()=>{try{return ze}catch{}})(),(()=>{try{return Ie}catch{}})(),(()=>{try{return Se}catch{}})()]).then(async()=>{let g;g=(u=>(ce("data-v-1de2631f"),u=u(),_e(),u))(()=>fe("div",{style:{color:"#747579"}}," \u7528\u6237\u767B\u5F55 ",-1)),L=ye(X({name:"LoginForm",__name:"LoginForm",setup(u){const{t:d}=ae();Pe(),_({icon:"ep:house"});const N=_({icon:"ep:avatar"}),M=_({icon:"ep:lock"}),h=p(),{validForm:T}=Te(h),{setLoginState:Ue,getLoginState:E}=Ne(),{currentRoute:P,push:y}=q(),z=D(),m=p(""),c=p(!1),I=p(),S=p("blockPuzzle"),A=K(()=>t(E)===Me.LOGIN),U={tenantName:[f],username:[f],password:[f]},a=W({isShowPassword:!1,captchaEnable:"true",tenantEnable:"true",loginForm:{tenantName:"cmcc",username:"admin",password:"Aa123456",captchaVerification:"",rememberMe:!1}}),w=async()=>{k({accessToken:"a5e0d44b86d045c189882518a40b479e",expiresTime:1708635958255,refreshToken:"e079913cb8bb455383ebe97c977b5c83",userId:1}),y("/index")},x=p(),G=async l=>{c.value=!0;try{if(await(async()=>{if(a.tenantEnable==="true"){const n=await ge(a.loginForm.tenantName);he(n)}})(),!await T())return;a.loginForm.captchaVerification=l.captchaVerification;const o=await re(a.loginForm);if(!o)return;x.value=oe.service({lock:!0,text:"\u6B63\u5728\u52A0\u8F7D\u7CFB\u7EDF\u4E2D...",background:"rgba(0, 0, 0, 0.7)"}),a.loginForm.rememberMe?le(a.loginForm):ne(),k(o),m.value||(m.value="/"),m.value.indexOf("sso")!==-1?window.location.href=window.location.href.replace("/login?redirect=",""):y({path:m.value||z.addRouters[0].path})}finally{c.value=!1,x.value.close()}};return Y(()=>P.value,l=>{var o;m.value=(o=l==null?void 0:l.query)==null?void 0:o.redirect},{immediate:!0}),Z(()=>{(()=>{const l=te();l&&(a.loginForm={...a.loginForm,username:l.username?l.username:a.loginForm.username,password:l.password?l.password:a.loginForm.password,rememberMe:!!l.rememberMe,tenantName:l.tenantName?l.tenantName:a.loginForm.tenantName})})()}),(l,o)=>{const n=se,s=ie,b=pe,j=de,C=Ve,F=me,O=Fe,Q=xe,R=ue;return B((J(),$(R,{ref_key:"formLogin",ref:h,model:t(a).loginForm,rules:U,class:"login-form","label-position":"top","label-width":"120px",size:"large"},{default:r(()=>[e(F,{style:{"margin-right":"-10px","margin-left":"-10px"}},{default:r(()=>[e(s,{span:24,style:{"padding-right":"10px","padding-left":"10px"}},{default:r(()=>[e(n,null,{default:r(()=>[g]),_:1})]),_:1}),e(s,{span:24,style:{"padding-right":"10px","padding-left":"10px"}},{default:r(()=>[e(n,{prop:"username"},{default:r(()=>[e(b,{modelValue:t(a).loginForm.username,"onUpdate:modelValue":o[0]||(o[0]=i=>t(a).loginForm.username=i),placeholder:t(d)("login.usernamePlaceholder"),"prefix-icon":t(N)},null,8,["modelValue","placeholder","prefix-icon"])]),_:1})]),_:1}),e(s,{span:24,style:{"padding-right":"10px","padding-left":"10px"}},{default:r(()=>[e(n,{prop:"password"},{default:r(()=>[e(b,{modelValue:t(a).loginForm.password,"onUpdate:modelValue":o[1]||(o[1]=i=>t(a).loginForm.password=i),placeholder:t(d)("login.passwordPlaceholder"),"prefix-icon":t(M),"show-password":"",type:"password",onKeyup:o[2]||(o[2]=ee(i=>w(),["enter"]))},null,8,["modelValue","placeholder","prefix-icon"])]),_:1})]),_:1}),e(s,{span:24,style:{"padding-right":"10px","padding-left":"10px","margin-top":"-20px","margin-bottom":"-20px"}},{default:r(()=>[e(n,null,{default:r(()=>[e(F,{justify:"space-between",style:{width:"100%"}},{default:r(()=>[e(s,{span:6},{default:r(()=>[e(j,{modelValue:t(a).loginForm.rememberMe,"onUpdate:modelValue":o[3]||(o[3]=i=>t(a).loginForm.rememberMe=i)},{default:r(()=>[v(V(t(d)("login.remember")),1)]),_:1},8,["modelValue"])]),_:1}),e(s,{offset:6,span:12},{default:r(()=>[e(C,{style:{float:"right"},type:"primary"},{default:r(()=>[v(V(t(d)("login.forgetPassword")),1)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),e(s,{span:24,style:{"padding-right":"10px","padding-left":"10px"}},{default:r(()=>[e(n,null,{default:r(()=>[e(O,{loading:t(c),title:t(d)("login.login"),class:"w-[100%]",type:"primary",onClick:o[4]||(o[4]=i=>w())},null,8,["loading","title"])]),_:1})]),_:1}),e(Q,{ref_key:"verify",ref:I,captchaType:t(S),imgSize:{width:"400px",height:"200px"},mode:"pop",onSuccess:G},null,8,["captchaType"])]),_:1})]),_:1},8,["model"])),[[H,t(A)]])}}}),[["__scopeId","data-v-1de2631f"],["__file","E:/newCode/GYZX-UI-ADMIN/src/views/Login/components/LoginForm.vue"]])});export{Ae as __tla,L as default};
