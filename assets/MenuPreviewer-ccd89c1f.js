import{d as O,a2 as T,o,c as u,f as r,w,g as k,S as E,h as F,t as N,a as _,a5 as h,l as G,F as L,C as X,_ as Y,__tla as Z}from"./index-f0743f71.js";import{V as U,__tla as j}from"./vuedraggable.umd-f0c0a941.js";let q,z=Promise.all([(()=>{try{return Z}catch{}})(),(()=>{try{return j}catch{}})()]).then(async()=>{let I,y,g,x,b,V;I={class:"menu_bottom"},y=["onClick"],g={key:0,class:"submenu"},x={class:"menu_bottom subtitle"},b=["onClick"],V=["onClick"],q=Y(O({__name:"MenuPreviewer",props:{modelValue:{type:Array,required:!0},activeIndex:{type:String,required:!0},parentIndex:{type:Number,required:!0},accountId:{type:Number,required:!0}},emits:["update:modelValue","menu-clicked","submenu-clicked"],setup(M,{emit:A}){const d=M,s=A,i=T({get:()=>d.modelValue,set:n=>s("update:modelValue",n)}),P=()=>{const n=i.value.length,l={name:"\u83DC\u5355\u540D\u79F0",children:[],reply:{type:"text",accountId:d.accountId}};i.value[n]=l,f(l,n-1)},f=(n,l)=>{s("menu-clicked",n,l)},C=(n,l,a)=>{s("submenu-clicked",n,l,a)},S=({oldIndex:n,newIndex:l})=>{if(d.activeIndex==="__MENU_NOT_SELECTED__")return;let a=new Array(i.value.length).fill(!1);a[d.parentIndex]=!0;const[e]=a.splice(n,1);a.splice(l,0,e);const t=a.indexOf(!0),c=i.value[t];s("menu-clicked",c,t)},$=({newIndex:n})=>{var t;const l=d.parentIndex,a=n,e=(t=i.value[l])==null?void 0:t.children;if(e&&(e==null?void 0:e.length)>0){const c=e[a];s("submenu-clicked",c,l,a)}};return(n,l)=>{const a=X;return o(),u(L,null,[r(_(U),{modelValue:_(i),"onUpdate:modelValue":l[0]||(l[0]=e=>G(i)?i.value=e:null),"item-key":"id","ghost-class":"draggable-ghost",animation:400,onEnd:S},{item:w(({element:e,index:t})=>[k("div",I,[k("div",{onClick:c=>f(e,t),class:E(["menu_item",{active:d.activeIndex===`${t}`}])},[r(a,{icon:"ep:fold",color:"black"}),F(N(e.name),1)],10,y),d.parentIndex===t&&e.children?(o(),u("div",g,[r(_(U),{modelValue:e.children,"onUpdate:modelValue":c=>e.children=c,"item-key":"id","ghost-class":"draggable-ghost",animation:400,onEnd:$},{item:w(({element:c,index:m})=>[k("div",x,[e.children?(o(),u("div",{key:0,class:E(["menu_subItem",{active:d.activeIndex===`${t}-${m}`}]),onClick:p=>C(c,t,m)},N(c.name),11,b)):h("",!0)])]),_:2},1032,["modelValue","onUpdate:modelValue"]),!e.children||e.children.length<5?(o(),u("div",{key:0,class:"menu_bottom menu_addicon",onClick:c=>((m,p)=>{const v=p.children.length,D={name:"\u5B50\u83DC\u5355\u540D\u79F0",reply:{type:"text",accountId:d.accountId}};p.children[v]=D,C(p.children[v],m,v)})(t,e)},[r(a,{icon:"ep:plus",class:"plus"})],8,V)):h("",!0)])):h("",!0)])]),_:1},8,["modelValue"]),_(i).length<3?(o(),u("div",{key:0,class:"menu_bottom menu_addicon",onClick:P},[r(a,{icon:"ep:plus",class:"plus"})])):h("",!0)],64)}}}),[["__scopeId","data-v-733d6a82"],["__file","E:/newCode/GYZX-UI-ADMIN/src/views/mp/menu/components/MenuPreviewer.vue"]])});export{z as __tla,q as default};
