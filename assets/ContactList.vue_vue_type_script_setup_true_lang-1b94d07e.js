import{d as E,r as n,n as A,u as L,aQ as O,o as y,c as U,b as a,e as l,h as g,w as B,q as D,a as r,t as F,F as M,_ as j,A as q,aa as P,E as G,i as Q,v as H,__tla as J}from"./index-34f06ebd.js";import{_ as K,__tla as V}from"./ContentWrap.vue_vue_type_script_setup_true_lang-80915c85.js";import{_ as W,__tla as X}from"./index.vue_vue_type_script_setup_true_lang-68fe248c.js";import{_ as Y,__tla as Z}from"./DictTag.vue_vue_type_script_lang-942df0b2.js";import{E as $,__tla as aa}from"./el-link-6a9ddb0c.js";import{e as ta,__tla as ea}from"./index-f9574535.js";import{_ as ra,__tla as la}from"./ContactForm.vue_vue_type_script_setup_true_lang-d3cc1164.js";import{D as sa,__tla as oa}from"./dict-e142e39a.js";import{B as _a,__tla as ia}from"./index-ad2ad2c3.js";let b,na=Promise.all([(()=>{try{return J}catch{}})(),(()=>{try{return V}catch{}})(),(()=>{try{return X}catch{}})(),(()=>{try{return Z}catch{}})(),(()=>{try{return aa}catch{}})(),(()=>{try{return ea}catch{}})(),(()=>{try{return la}catch{}})(),(()=>{try{return oa}catch{}})(),(()=>{try{return ia}catch{}})()]).then(async()=>{b=E({name:"CrmContactList",__name:"ContactList",props:{bizType:{},bizId:{}},setup(h){const o=h,p=n(!0),m=n(0),u=n([]),t=A({pageNo:1,pageSize:10,customerId:void 0}),c=async()=>{p.value=!0;try{t.customerId=void 0;let _={list:[],total:0};if(o.bizType!==_a.CRM_CUSTOMER)return;t.customerId=o.bizId,_=await ta(t),u.value=_.list,m.value=_.total}finally{p.value=!1}},d=n(),v=()=>{d.value.open("create")},{push:C}=L();return O(()=>[o.bizId,o.bizType],()=>{t.pageNo=1,c()},{immediate:!0,deep:!0}),(_,i)=>{const z=j,N=q,I=P,w=$,s=G,k=Y,S=Q,T=W,R=K,x=H;return y(),U(M,null,[a(I,{justify:"end"},{default:l(()=>[a(N,{onClick:v},{default:l(()=>[a(z,{class:"mr-5px",icon:"system-uicons:contacts"}),g(" \u521B\u5EFA\u8054\u7CFB\u4EBA ")]),_:1})]),_:1}),a(R,{class:"mt-10px"},{default:l(()=>[B((y(),D(S,{data:r(u),stripe:!0,"show-overflow-tooltip":!0},{default:l(()=>[a(s,{label:"\u59D3\u540D",fixed:"left",align:"center",prop:"name"},{default:l(e=>[a(w,{type:"primary",underline:!1,onClick:pa=>{return f=e.row.id,void C({name:"CrmContactDetail",params:{id:f}});var f}},{default:l(()=>[g(F(e.row.name),1)]),_:2},1032,["onClick"])]),_:1}),a(s,{label:"\u624B\u673A\u53F7",align:"center",prop:"mobile"}),a(s,{label:"\u804C\u4F4D",align:"center",prop:"post"}),a(s,{label:"\u76F4\u5C5E\u4E0A\u7EA7",align:"center",prop:"parentName"}),a(s,{label:"\u662F\u5426\u5173\u952E\u51B3\u7B56\u4EBA",align:"center",prop:"master"},{default:l(e=>[a(k,{type:r(sa).INFRA_BOOLEAN_STRING,value:e.row.master},null,8,["type","value"])]),_:1})]),_:1},8,["data"])),[[x,r(p)]]),a(T,{total:r(m),page:r(t).pageNo,"onUpdate:page":i[0]||(i[0]=e=>r(t).pageNo=e),limit:r(t).pageSize,"onUpdate:limit":i[1]||(i[1]=e=>r(t).pageSize=e),onPagination:c},null,8,["total","page","limit"])]),_:1}),a(ra,{ref_key:"formRef",ref:d,onSuccess:c},null,512)],64)}}})});export{b as _,na as __tla};
