import{d as U,J as j,r as o,u as B,p as D,o as n,c as J,x as L,a as t,v as p,w as _,h as k,a4 as z,f as a,F as Q,C as W,m as q,n as E,j as H,I as G,__tla as K}from"./index-d2088aec.js";import{g as X,_ as Y,__tla as Z}from"./index-f50a4e7c.js";import{u as $,__tla as tt}from"./tagsView-b65f82a8.js";import{a as at,t as rt,__tla as _t}from"./index-2a8c377b.js";import{_ as lt,__tla as et}from"./ContractDetailsHeader.vue_vue_type_script_setup_true_lang-aacad98d.js";import{_ as ot,__tla as st}from"./ContractDetailsInfo.vue_vue_type_script_setup_true_lang-b0df661c.js";import{_ as ct,__tla as mt}from"./ContractProductList.vue_vue_type_script_setup_true_lang-429c3ed8.js";import{B as T,__tla as nt}from"./index-05c907cf.js";import{_ as ut,__tla as it}from"./ContractForm.vue_vue_type_script_setup_true_lang-086218eb.js";import{_ as ft,__tla as pt}from"./TransferForm.vue_vue_type_script_setup_true_lang-96669f93.js";import{_ as yt,__tla as ht}from"./PermissionList.vue_vue_type_script_setup_true_lang-1575a58f.js";import{u as dt,__tla as vt}from"./useMessage-c5990e2c.js";import{__tla as bt}from"./el-timeline-item-bf602b47.js";import{__tla as wt}from"./formatTime-c7e0c543.js";import{__tla as Ct}from"./dict-999fbee6.js";import"./_plugin-vue_export-helper-1b428a4d.js";import{__tla as Rt}from"./ContentWrap.vue_vue_type_script_setup_true_lang-3fd6aef1.js";import{__tla as kt}from"./index-82efac34.js";import{__tla as zt}from"./el-descriptions-item-6a175b15.js";import{__tla as Tt}from"./el-collapse-item-df5fb7ce.js";import{__tla as It}from"./DictTag.vue_vue_type_script_lang-754cee6f.js";import"./color-f5b6e279.js";import{__tla as gt}from"./formatter-38679f6e.js";import{__tla as xt}from"./Dialog.vue_vue_type_style_index_0_lang-4d2024bd.js";import{__tla as Vt}from"./index-8fa07f93.js";import{__tla as Ot}from"./index-456c5cde.js";import{__tla as At}from"./index-3b1c9cde.js";import{__tla as Ft}from"./index-63130e49.js";import{__tla as Mt}from"./ProductList.vue_vue_type_script_setup_true_lang-60623b80.js";import{__tla as Nt}from"./index-bbc28546.js";import{__tla as Pt}from"./Table.vue_vue_type_style_index_0_scoped_1ee0f9ba_lang-2efd46fd.js";import{__tla as St}from"./tsxHelper-9f8b23eb.js";import{__tla as Ut}from"./index-9309eb20.js";import{__tla as jt}from"./index.vue_vue_type_script_setup_true_lang-6baf9e60.js";import{__tla as Bt}from"./PermissionForm.vue_vue_type_script_setup_true_lang-2f5a6ef5.js";let I,Dt=Promise.all([(()=>{try{return K}catch{}})(),(()=>{try{return Z}catch{}})(),(()=>{try{return tt}catch{}})(),(()=>{try{return _t}catch{}})(),(()=>{try{return et}catch{}})(),(()=>{try{return st}catch{}})(),(()=>{try{return mt}catch{}})(),(()=>{try{return nt}catch{}})(),(()=>{try{return it}catch{}})(),(()=>{try{return pt}catch{}})(),(()=>{try{return ht}catch{}})(),(()=>{try{return vt}catch{}})(),(()=>{try{return bt}catch{}})(),(()=>{try{return wt}catch{}})(),(()=>{try{return Ct}catch{}})(),(()=>{try{return Rt}catch{}})(),(()=>{try{return kt}catch{}})(),(()=>{try{return zt}catch{}})(),(()=>{try{return Tt}catch{}})(),(()=>{try{return It}catch{}})(),(()=>{try{return gt}catch{}})(),(()=>{try{return xt}catch{}})(),(()=>{try{return Vt}catch{}})(),(()=>{try{return Ot}catch{}})(),(()=>{try{return At}catch{}})(),(()=>{try{return Ft}catch{}})(),(()=>{try{return Mt}catch{}})(),(()=>{try{return Nt}catch{}})(),(()=>{try{return Pt}catch{}})(),(()=>{try{return St}catch{}})(),(()=>{try{return Ut}catch{}})(),(()=>{try{return jt}catch{}})(),(()=>{try{return Bt}catch{}})()]).then(async()=>{I=U({name:"CrmContractDetail",__name:"index",setup(Jt){const g=j(),x=dt(),u=o(0),i=o(!0),l=o({}),c=o(),y=o(),h=async()=>{i.value=!0;try{await V(u.value),l.value=await at(u.value)}finally{i.value=!1}},d=o([]),V=async r=>{if(!r)return;const s=await X({bizType:T.CRM_CONTRACT,bizId:r});d.value=s.list},v=o(),O=()=>{var r;(r=v.value)==null||r.open("\u5408\u540C\u8F6C\u79FB",l.value.id,rt)},{delView:A}=$(),{currentRoute:F}=B(),f=()=>{A(t(F))};return D(async()=>{const r=g.params.id;if(!r)return x.warning("\u53C2\u6570\u9519\u8BEF\uFF0C\u5408\u540C\u4E0D\u80FD\u4E3A\u7A7A\uFF01"),void f();u.value=r,await h()}),(r,s)=>{const b=W,m=q,M=Y,N=E,P=H,S=G;return n(),J(Q,null,[L((n(),p(lt,{contract:t(l)},{default:_(()=>{var e,w;return[(e=t(c))!=null&&e.validateWrite?(n(),p(b,{key:0,onClick:s[0]||(s[0]=Lt=>{return C="update",R=t(l).id,void y.value.open(C,R);var C,R})},{default:_(()=>[k(" \u7F16\u8F91 ")]),_:1})):z("",!0),(w=t(c))!=null&&w.validateOwnerUser?(n(),p(b,{key:1,type:"primary",onClick:O},{default:_(()=>[k(" \u8F6C\u79FB ")]),_:1})):z("",!0)]}),_:1},8,["contract"])),[[S,t(i)]]),a(P,null,{default:_(()=>[a(N,null,{default:_(()=>[a(m,{label:"\u57FA\u672C\u4FE1\u606F"},{default:_(()=>[a(ot,{contract:t(l)},null,8,["contract"])]),_:1}),a(m,{label:"\u4EA7\u54C1"},{default:_(()=>[a(ct,{modelValue:t(l).productItems,"onUpdate:modelValue":s[1]||(s[1]=e=>t(l).productItems=e)},null,8,["modelValue"])]),_:1}),a(m,{label:"\u56E2\u961F\u6210\u5458"},{default:_(()=>{var e;return[a(yt,{ref_key:"permissionListRef",ref:c,"biz-id":t(l).id,"biz-type":t(T).CRM_CONTRACT,"show-action":!((e=t(c))!=null&&e.isPool)||!1,onQuitTeam:f},null,8,["biz-id","biz-type","show-action"])]}),_:1}),a(m,{label:"\u64CD\u4F5C\u65E5\u5FD7"},{default:_(()=>[a(M,{"log-list":t(d)},null,8,["log-list"])]),_:1})]),_:1})]),_:1}),a(ut,{ref_key:"formRef",ref:y,onSuccess:h},null,512),a(ft,{ref_key:"transferFormRef",ref:v,onSuccess:f},null,512)],64)}}})});export{Dt as __tla,I as default};
