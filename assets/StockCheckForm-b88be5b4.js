import{ao as d,d as W,k as X,r as u,n as Z,Y as H,o as w,q as S,e as l,a as e,h as F,a0 as J,b as a,w as K,j as I,L as Q,y as $,a9 as ee,z as ae,ab as te,C as le,l as se,m as ce,B as oe,v as re,_ as ue,__tla as de}from"./index-aaa5adb3.js";import{_ as ie,__tla as me}from"./Dialog-9a73a39c.js";import{_ as pe,__tla as ne}from"./ContentWrap-04d7f6d1.js";import{_ as _e,__tla as ke}from"./UploadFile-31413487.js";import fe,{__tla as he}from"./StockCheckItemForm-00aef0d0.js";import{u as ve,__tla as ye}from"./useMessage-873da1e2.js";let V,p,j,be=Promise.all([(()=>{try{return de}catch{}})(),(()=>{try{return me}catch{}})(),(()=>{try{return ne}catch{}})(),(()=>{try{return ke}catch{}})(),(()=>{try{return he}catch{}})(),(()=>{try{return ye}catch{}})()]).then(async()=>{p={getStockCheckPage:async s=>await d.get({url:"/erp/stock-check/page",params:s}),getStockCheck:async s=>await d.get({url:"/erp/stock-check/get?id="+s}),createStockCheck:async s=>await d.post({url:"/erp/stock-check/create",data:s}),updateStockCheck:async s=>await d.put({url:"/erp/stock-check/update",data:s}),updateStockCheckStatus:async(s,k)=>await d.put({url:"/erp/stock-check/update-status",params:{id:s,status:k}}),deleteStockCheck:async s=>await d.delete({url:"/erp/stock-check/delete",params:{ids:s.join(",")}}),exportStockCheck:async s=>await d.download({url:"/erp/stock-check/export-excel",params:s})},V=ue(W({name:"StockCheckForm",__name:"StockCheckForm",emits:["success"],setup(s,{expose:k,emit:q}){const{t:f}=X(),C=ve(),i=u(!1),g=u(""),m=u(!1),h=u(""),c=u({id:void 0,customerId:void 0,checkTime:void 0,remark:void 0,fileUrl:"",items:[]}),M=Z({checkTime:[{required:!0,message:"\u76D8\u70B9\u65F6\u95F4\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}]}),v=H(()=>h.value==="detail"),y=u(),b=u("item"),U=u();k({open:async(r,t)=>{if(i.value=!0,g.value=f("action."+r),h.value=r,L(),t){m.value=!0;try{c.value=await p.getStockCheck(t)}finally{m.value=!1}}}});const P=q,z=async()=>{await y.value.validate(),await U.value.validate(),m.value=!0;try{const r=c.value;h.value==="create"?(await p.createStockCheck(r),C.success(f("common.createSuccess"))):(await p.updateStockCheck(r),C.success(f("common.updateSuccess"))),i.value=!1,P("success")}finally{m.value=!1}},L=()=>{var r;c.value={id:void 0,customerId:void 0,checkTime:void 0,remark:void 0,fileUrl:void 0,items:[]},(r=y.value)==null||r.resetFields()};return(r,t)=>{const x=Q,n=$,_=ee,O=ae,R=_e,Y=te,A=le,B=se,D=ce,E=pe,T=oe,G=ie,N=re;return w(),S(G,{title:e(g),modelValue:e(i),"onUpdate:modelValue":t[6]||(t[6]=o=>I(i)?i.value=o:null),width:"1080"},{footer:l(()=>[e(v)?J("",!0):(w(),S(T,{key:0,onClick:z,type:"primary",disabled:e(m)},{default:l(()=>[F(" \u786E \u5B9A ")]),_:1},8,["disabled"])),a(T,{onClick:t[5]||(t[5]=o=>i.value=!1)},{default:l(()=>[F("\u53D6 \u6D88")]),_:1})]),default:l(()=>[K((w(),S(A,{ref_key:"formRef",ref:y,model:e(c),rules:e(M),"label-width":"100px",disabled:e(v)},{default:l(()=>[a(Y,{gutter:20},{default:l(()=>[a(_,{span:8},{default:l(()=>[a(n,{label:"\u76D8\u70B9\u5355\u53F7",prop:"no"},{default:l(()=>[a(x,{disabled:"",modelValue:e(c).no,"onUpdate:modelValue":t[0]||(t[0]=o=>e(c).no=o),placeholder:"\u4FDD\u5B58\u65F6\u81EA\u52A8\u751F\u6210"},null,8,["modelValue"])]),_:1})]),_:1}),a(_,{span:8},{default:l(()=>[a(n,{label:"\u76D8\u70B9\u65F6\u95F4",prop:"checkTime"},{default:l(()=>[a(O,{modelValue:e(c).checkTime,"onUpdate:modelValue":t[1]||(t[1]=o=>e(c).checkTime=o),type:"date","value-format":"x",placeholder:"\u9009\u62E9\u76D8\u70B9\u65F6\u95F4",class:"!w-1/1"},null,8,["modelValue"])]),_:1})]),_:1}),a(_,{span:16},{default:l(()=>[a(n,{label:"\u5907\u6CE8",prop:"remark"},{default:l(()=>[a(x,{type:"textarea",modelValue:e(c).remark,"onUpdate:modelValue":t[2]||(t[2]=o=>e(c).remark=o),rows:1,placeholder:"\u8BF7\u8F93\u5165\u5907\u6CE8"},null,8,["modelValue"])]),_:1})]),_:1}),a(_,{span:8},{default:l(()=>[a(n,{label:"\u9644\u4EF6",prop:"fileUrl"},{default:l(()=>[a(R,{"is-show-tip":!1,modelValue:e(c).fileUrl,"onUpdate:modelValue":t[3]||(t[3]=o=>e(c).fileUrl=o),limit:1},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1},8,["model","rules","disabled"])),[[N,e(m)]]),a(E,null,{default:l(()=>[a(D,{modelValue:e(b),"onUpdate:modelValue":t[4]||(t[4]=o=>I(b)?b.value=o:null),class:"-mt-15px -mb-10px"},{default:l(()=>[a(B,{label:"\u76D8\u70B9\u4EA7\u54C1\u6E05\u5355",name:"item"},{default:l(()=>[a(fe,{ref_key:"itemFormRef",ref:U,items:e(c).items,disabled:e(v)},null,8,["items","disabled"])]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["title","modelValue"])}}}),[["__file","E:/newCode/GYZX-UI-ADMIN/src/views/erp/stock/check/StockCheckForm.vue"]]),j=Object.freeze(Object.defineProperty({__proto__:null,default:V},Symbol.toStringTag,{value:"Module"}))});export{V as S,be as __tla,p as a,j as b};
