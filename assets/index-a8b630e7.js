import{d as x,aN as v,ao as g,b as t,r as c,aQ as I,p as z,o as u,q as A,e as F,f as l,at as i,a as n,c as d,F as N,g as Q,t as j,aR as V,__tla as W}from"./index-34f06ebd.js";import{e as B,__tla as G}from"./couponTemplate-7a10708f.js";import{e as R,f as H}from"./constants-99751ef9.js";import{f as E,__tla as J}from"./formatTime-ed0a77fd.js";let M,K=Promise.all([(()=>{try{return W}catch{}})(),(()=>{try{return G}catch{}})(),(()=>{try{return J}catch{}})()]).then(async()=>{let y,b,_,h,w,C,$,k,P,T;y=x({name:"CouponDiscount",props:{coupon:v()},setup(s){const e=s.coupon;let p=e.discountPercent+"",r=" \u6298";return e.discountType===R.PRICE.type&&(p=g(e.discountPrice),r=" \u5143"),()=>t("div",null,[t("span",{class:"text-20px font-bold"},[p]),t("span",null,[r])])}}),b=x({name:"CouponDiscountDesc",props:{coupon:v()},setup(s){const e=s.coupon,p=e.usePrice>0?`\u6EE1${g(e.usePrice)}\u5143\uFF0C`:"",r=e.discountType===R.PRICE.type?`\u51CF${g(e.discountPrice)}\u5143`:`\u6253${e.discountPercent}\u6298`;return()=>t("div",null,[t("span",null,[p]),t("span",null,[r])])}}),_=x({name:"CouponValidTerm",props:{coupon:v()},setup(s){const e=s.coupon,p=e.validityType===H.DATE.type?`\u6709\u6548\u671F\uFF1A${E(e.validStartTime,"YYYY-MM-DD")} \u81F3 ${E(e.validEndTime,"YYYY-MM-DD")}`:`\u9886\u53D6\u540E\u7B2C ${e.fixedStartTerm} - ${e.fixedEndTerm} \u5929\u5185\u53EF\u7528`;return()=>t("div",null,[p])}}),h={key:0,class:"m-l-16px flex flex-row justify-between p-8px"},w={class:"flex flex-col justify-evenly gap-4px"},C={class:"flex flex-col justify-evenly"},$={key:1,class:"m-l-16px flex flex-row justify-between p-8px"},k={class:"flex flex-col justify-evenly gap-4px"},P={class:"flex flex-col"},T={key:2,class:"flex flex-col items-center justify-around gap-4px p-4px"},M=x({name:"CouponCard",__name:"index",props:{property:{}},setup(s){const e=s,p=c([]);I(()=>e.property.couponIds,async()=>{var o;((o=e.property.couponIds)==null?void 0:o.length)>0&&(p.value=await B(e.property.couponIds))},{immediate:!0,deep:!0});const r=c(375),D=c(),Y=c("100%"),f=c(375);return I(()=>[e.property,r,p.value.length],()=>{f.value=(.95*r.value-e.property.space*(e.property.columns-1))/e.property.columns,Y.value=f.value*p.value.length+e.property.space*(p.value.length-1)+"px"},{immediate:!0,deep:!0}),z(()=>{var o,m;r.value=((m=(o=D.value)==null?void 0:o.wrapRef)==null?void 0:m.offsetWidth)||375}),(o,m)=>{const S=V;return u(),A(S,{class:"z-1 min-h-30px","wrap-class":"w-full",ref_key:"containerRef",ref:D},{default:F(()=>[l("div",{class:"flex flex-row text-12px",style:i({gap:`${o.property.space}px`,width:n(Y)})},[(u(!0),d(N,null,Q(n(p),(a,q)=>(u(),d("div",{class:"box-content",style:i({background:o.property.bgImg?`url(${o.property.bgImg}) 100% center / 100% 100% no-repeat`:"#fff",width:`${n(f)}px`,color:o.property.textColor}),key:q},[o.property.columns===1?(u(),d("div",h,[l("div",w,[t(n(y),{coupon:a},null,8,["coupon"]),t(n(b),{coupon:a},null,8,["coupon"]),t(n(_),{coupon:a},null,8,["coupon"])]),l("div",C,[l("div",{class:"rounded-20px p-x-8px p-y-2px",style:i({color:o.property.button.color,background:o.property.button.bgColor})}," \u7ACB\u5373\u9886\u53D6 ",4)])])):o.property.columns===2?(u(),d("div",$,[l("div",k,[t(n(y),{coupon:a},null,8,["coupon"]),l("div",null,j(a.name),1)]),l("div",P,[l("div",{class:"h-full w-20px rounded-20px p-x-2px p-y-8px text-center",style:i({color:o.property.button.color,background:o.property.button.bgColor})}," \u7ACB\u5373\u9886\u53D6 ",4)])])):(u(),d("div",T,[t(n(y),{coupon:a},null,8,["coupon"]),l("div",null,j(a.name),1),l("div",{class:"rounded-20px p-x-8px p-y-2px",style:i({color:o.property.button.color,background:o.property.button.bgColor})}," \u7ACB\u5373\u9886\u53D6 ",4)]))],4))),128))],4)]),_:1},512)}}})});export{K as __tla,M as default};
